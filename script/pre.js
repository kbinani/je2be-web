(()=>{var di=Object.create;var un=Object.defineProperty;var pi=Object.getOwnPropertyDescriptor;var mi=Object.getOwnPropertyNames;var gi=Object.getPrototypeOf,yi=Object.prototype.hasOwnProperty;var _i=t=>un(t,"__esModule",{value:!0});var ht=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,n)=>(typeof require!="undefined"?require:e)[n]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var vi=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var bi=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mi(e))!yi.call(t,i)&&(n||i!=="default")&&un(t,i,{get:()=>e[i],enumerable:!(r=pi(e,i))||r.enumerable});return t},wi=(t,e)=>bi(_i(un(t!=null?di(gi(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var fr=vi((cr,ln)=>{(function(t){typeof cr=="object"&&typeof ln!="undefined"?ln.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=t()})(function(){return function t(e,n,r){function i(u,m){if(!n[u]){if(!e[u]){var p=typeof ht=="function"&&ht;if(!m&&p)return p(u,!0);if(s)return s(u,!0);var _=new Error("Cannot find module '"+u+"'");throw _.code="MODULE_NOT_FOUND",_}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(d){var g=e[u][1][d];return i(g||d)},l,l.exports,t,e,n,r)}return n[u].exports}for(var s=typeof ht=="function"&&ht,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(a){for(var u,m,p,_,l,d,g,c=[],h=0,y=a.length,v=y,E=r.getTypeOf(a)!=="string";h<a.length;)v=y-h,p=E?(u=a[h++],m=h<y?a[h++]:0,h<y?a[h++]:0):(u=a.charCodeAt(h++),m=h<y?a.charCodeAt(h++):0,h<y?a.charCodeAt(h++):0),_=u>>2,l=(3&u)<<4|m>>4,d=1<v?(15&m)<<2|p>>6:64,g=2<v?63&p:64,c.push(s.charAt(_)+s.charAt(l)+s.charAt(d)+s.charAt(g));return c.join("")},n.decode=function(a){var u,m,p,_,l,d,g=0,c=0,h="data:";if(a.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var y,v=3*(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(a.charAt(a.length-1)===s.charAt(64)&&v--,a.charAt(a.length-2)===s.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=i.uint8array?new Uint8Array(0|v):new Array(0|v);g<a.length;)u=s.indexOf(a.charAt(g++))<<2|(_=s.indexOf(a.charAt(g++)))>>4,m=(15&_)<<4|(l=s.indexOf(a.charAt(g++)))>>2,p=(3&l)<<6|(d=s.indexOf(a.charAt(g++))),y[c++]=u,l!==64&&(y[c++]=m),d!==64&&(y[c++]=p);return y}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var r=t("./external"),i=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function u(m,p,_,l,d){this.compressedSize=m,this.uncompressedSize=p,this.crc32=_,this.compression=l,this.compressedContent=d}u.prototype={getContentWorker:function(){var m=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(m,p,_){return m.pipe(new s).pipe(new a("uncompressedSize")).pipe(p.compressWorker(_)).pipe(new a("compressedSize")).withStreamInfo("compression",p)},e.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(i){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var r=t("./utils"),i=function(){for(var s,a=[],u=0;u<256;u++){s=u;for(var m=0;m<8;m++)s=1&s?3988292384^s>>>1:s>>>1;a[u]=s}return a}();e.exports=function(s,a){return s!==void 0&&s.length?r.getTypeOf(s)!=="string"?function(u,m,p,_){var l=i,d=_+p;u^=-1;for(var g=_;g<d;g++)u=u>>>8^l[255&(u^m[g])];return-1^u}(0|a,s,s.length,0):function(u,m,p,_){var l=i,d=_+p;u^=-1;for(var g=_;g<d;g++)u=u>>>8^l[255&(u^m.charCodeAt(g))];return-1^u}(0|a,s,s.length,0):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var r=null;r=typeof Promise!="undefined"?Promise:t("lie"),e.exports={Promise:r}},{lie:37}],7:[function(t,e,n){"use strict";var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",i=t("pako"),s=t("./utils"),a=t("./stream/GenericWorker"),u=r?"uint8array":"array";function m(p,_){a.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=_,this.meta={}}n.magic="\b\0",s.inherits(m,a),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(u,p.data),!1)},m.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(_){p.push({data:_,meta:p.meta})}},n.compressWorker=function(p){return new m("Deflate",p)},n.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function r(l,d){var g,c="";for(g=0;g<d;g++)c+=String.fromCharCode(255&l),l>>>=8;return c}function i(l,d,g,c,h,y){var v,E,x=l.file,S=l.compression,A=y!==u.utf8encode,D=s.transformTo("string",y(x.name)),C=s.transformTo("string",u.utf8encode(x.name)),F=x.comment,L=s.transformTo("string",y(F)),k=s.transformTo("string",u.utf8encode(F)),R=C.length!==x.name.length,f=k.length!==F.length,z="",Y="",K="",J=x.dir,j=x.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};d&&!g||(Q.crc32=l.crc32,Q.compressedSize=l.compressedSize,Q.uncompressedSize=l.uncompressedSize);var O=0;d&&(O|=8),A||!R&&!f||(O|=2048);var P=0,X=0;J&&(P|=16),h==="UNIX"?(X=798,P|=function(V,le){var ge=V;return V||(ge=le?16893:33204),(65535&ge)<<16}(x.unixPermissions,J)):(X=20,P|=function(V){return 63&(V||0)}(x.dosPermissions)),v=j.getUTCHours(),v<<=6,v|=j.getUTCMinutes(),v<<=5,v|=j.getUTCSeconds()/2,E=j.getUTCFullYear()-1980,E<<=4,E|=j.getUTCMonth()+1,E<<=5,E|=j.getUTCDate(),R&&(Y=r(1,1)+r(m(D),4)+C,z+="up"+r(Y.length,2)+Y),f&&(K=r(1,1)+r(m(L),4)+k,z+="uc"+r(K.length,2)+K);var H="";return H+=`
\0`,H+=r(O,2),H+=S.magic,H+=r(v,2),H+=r(E,2),H+=r(Q.crc32,4),H+=r(Q.compressedSize,4),H+=r(Q.uncompressedSize,4),H+=r(D.length,2),H+=r(z.length,2),{fileRecord:p.LOCAL_FILE_HEADER+H+D+z,dirRecord:p.CENTRAL_FILE_HEADER+r(X,2)+H+r(L.length,2)+"\0\0\0\0"+r(P,4)+r(c,4)+D+z+L}}var s=t("../utils"),a=t("../stream/GenericWorker"),u=t("../utf8"),m=t("../crc32"),p=t("../signature");function _(l,d,g,c){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=g,this.encodeFileName=c,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(_,a),_.prototype.push=function(l){var d=l.meta.percent||0,g=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,a.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:g?(d+100*(g-c-1))/g:100}}))},_.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var d=this.streamFiles&&!l.file.dir;if(d){var g=i(l,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(l){this.accumulate=!1;var d=this.streamFiles&&!l.file.dir,g=i(l,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),d)this.push({data:function(c){return p.DATA_DESCRIPTOR+r(c.crc32,4)+r(c.compressedSize,4)+r(c.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var l=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var g=this.bytesWritten-l,c=function(h,y,v,E,x){var S=s.transformTo("string",x(E));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(h,2)+r(h,2)+r(y,4)+r(v,4)+r(S.length,2)+S}(this.dirRecords.length,g,l,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(l){this._sources.push(l);var d=this;return l.on("data",function(g){d.processChunk(g)}),l.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),l.on("error",function(g){d.error(g)}),this},_.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(l){var d=this._sources;if(!a.prototype.error.call(this,l))return!1;for(var g=0;g<d.length;g++)try{d[g].error(l)}catch{}return!0},_.prototype.lock=function(){a.prototype.lock.call(this);for(var l=this._sources,d=0;d<l.length;d++)l[d].lock()},e.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var r=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(s,a,u){var m=new i(a.streamFiles,u,a.platform,a.encodeFileName),p=0;try{s.forEach(function(_,l){p++;var d=function(y,v){var E=y||v,x=r[E];if(!x)throw new Error(E+" is not a valid compression method !");return x}(l.options.compression,a.compression),g=l.options.compressionOptions||a.compressionOptions||{},c=l.dir,h=l.date;l._compressWorker(d,g).withStreamInfo("file",{name:_,dir:c,date:h,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(_){m.error(_)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new r;for(var s in this)typeof this[s]!="function"&&(i[s]=this[s]);return i}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.7.1",r.loadAsync=function(i,s){return new r().loadAsync(i,s)},r.external=t("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./external"),s=t("./utf8"),a=t("./zipEntries"),u=t("./stream/Crc32Probe"),m=t("./nodejsUtils");function p(_){return new i.Promise(function(l,d){var g=_.decompressed.getContentWorker().pipe(new u);g.on("error",function(c){d(c)}).on("end",function(){g.streamInfo.crc32!==_.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}e.exports=function(_,l){var d=this;return l=r.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),m.isNode&&m.isStream(_)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",_,!0,l.optimizedBinaryString,l.base64).then(function(g){var c=new a(l);return c.load(g),c}).then(function(g){var c=[i.Promise.resolve(g)],h=g.files;if(l.checkCRC32)for(var y=0;y<h.length;y++)c.push(p(h[y]));return i.Promise.all(c)}).then(function(g){for(var c=g.shift(),h=c.files,y=0;y<h.length;y++){var v=h[y];d.file(v.fileNameStr,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:l.createFolders})}return c.zipComment.length&&(d.comment=c.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../stream/GenericWorker");function s(a,u){i.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(u)}r.inherits(s,i),s.prototype._bindStream=function(a){var u=this;(this._stream=a).pause(),a.on("data",function(m){u.push({data:m,meta:{percent:0}})}).on("error",function(m){u.isPaused?this.generatedError=m:u.error(m)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var r=t("readable-stream").Readable;function i(s,a,u){r.call(this,a),this._helper=s;var m=this;s.on("data",function(p,_){m.push(p)||m._helper.pause(),u&&u(_)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}t("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){"use strict";e.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(r,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,i);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,i)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var i=new Buffer(r);return i.fill(0),i},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,e,n){"use strict";function r(x,S,A){var D,C=s.getTypeOf(S),F=s.extend(A||{},m);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(x=h(x)),F.createFolders&&(D=c(x))&&y.call(this,D,!0);var L=C==="string"&&F.binary===!1&&F.base64===!1;A&&A.binary!==void 0||(F.binary=!L),(S instanceof p&&S.uncompressedSize===0||F.dir||!S||S.length===0)&&(F.base64=!1,F.binary=!0,S="",F.compression="STORE",C="string");var k=null;k=S instanceof p||S instanceof a?S:d.isNode&&d.isStream(S)?new g(x,S):s.prepareContent(x,S,F.binary,F.optimizedBinaryString,F.base64);var R=new _(x,k,F);this.files[x]=R}var i=t("./utf8"),s=t("./utils"),a=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),m=t("./defaults"),p=t("./compressedObject"),_=t("./zipObject"),l=t("./generate"),d=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),c=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var S=x.lastIndexOf("/");return 0<S?x.substring(0,S):""},h=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},y=function(x,S){return S=S!==void 0?S:m.createFolders,x=h(x),this.files[x]||r.call(this,x,null,{dir:!0,createFolders:S}),this.files[x]};function v(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var S,A,D;for(S in this.files)D=this.files[S],(A=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&x(A,D)},filter:function(x){var S=[];return this.forEach(function(A,D){x(A,D)&&S.push(D)}),S},file:function(x,S,A){if(arguments.length!==1)return x=this.root+x,r.call(this,x,S,A),this;if(v(x)){var D=x;return this.filter(function(F,L){return!L.dir&&D.test(F)})}var C=this.files[this.root+x];return C&&!C.dir?C:null},folder:function(x){if(!x)return this;if(v(x))return this.filter(function(C,F){return F.dir&&x.test(C)});var S=this.root+x,A=y.call(this,S),D=this.clone();return D.root=A.name,D},remove:function(x){x=this.root+x;var S=this.files[x];if(S||(x.slice(-1)!=="/"&&(x+="/"),S=this.files[x]),S&&!S.dir)delete this.files[x];else for(var A=this.filter(function(C,F){return F.name.slice(0,x.length)===x}),D=0;D<A.length;D++)delete this.files[A[D].name];return this},generate:function(x){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var S,A={};try{if((A=s.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");s.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var D=A.comment||this.comment||"";S=l.generateWorker(this,A,D)}catch(C){(S=new a("error")).error(C)}return new u(S,A.type||"string",A.mimeType)},generateAsync:function(x,S){return this.generateInternalStream(x).accumulate(S)},generateNodeStream:function(x,S){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(S)}};e.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var r=t("./DataReader");function i(s){r.call(this,s);for(var a=0;a<this.data.length;a++)s[a]=255&s[a]}t("../utils").inherits(i,r),i.prototype.byteAt=function(s){return this.data[this.zero+s]},i.prototype.lastIndexOfSignature=function(s){for(var a=s.charCodeAt(0),u=s.charCodeAt(1),m=s.charCodeAt(2),p=s.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===a&&this.data[_+1]===u&&this.data[_+2]===m&&this.data[_+3]===p)return _-this.zero;return-1},i.prototype.readAndCheckSignature=function(s){var a=s.charCodeAt(0),u=s.charCodeAt(1),m=s.charCodeAt(2),p=s.charCodeAt(3),_=this.readData(4);return a===_[0]&&u===_[1]&&m===_[2]&&p===_[3]},i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var r=t("../utils");function i(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(s){},readInt:function(s){var a,u=0;for(this.checkOffset(s),a=this.index+s-1;a>=this.index;a--)u=(u<<8)+this.byteAt(a);return this.index+=s,u},readString:function(s){return r.transformTo("string",this.readData(s))},readData:function(s){},lastIndexOfSignature:function(s){},readAndCheckSignature:function(s){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,n){"use strict";var r=t("./Uint8ArrayReader");function i(s){r.call(this,s)}t("../utils").inherits(i,r),i.prototype.readData=function(s){this.checkOffset(s);var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var r=t("./DataReader");function i(s){r.call(this,s)}t("../utils").inherits(i,r),i.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},i.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},i.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},i.prototype.readData=function(s){this.checkOffset(s);var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var r=t("./ArrayReader");function i(s){r.call(this,s)}t("../utils").inherits(i,r),i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../support"),s=t("./ArrayReader"),a=t("./StringReader"),u=t("./NodeBufferReader"),m=t("./Uint8ArrayReader");e.exports=function(p){var _=r.getTypeOf(p);return r.checkSupport(_),_!=="string"||i.uint8array?_==="nodebuffer"?new u(p):i.uint8array?new m(r.transformTo("uint8array",p)):new s(r.transformTo("array",p)):new a(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../utils");function s(a){r.call(this,"ConvertWorker to "+a),this.destType=a}i.inherits(s,r),s.prototype.processChunk=function(a){this.push({data:i.transformTo(this.destType,a.data),meta:a.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,r),s.prototype.processChunk=function(a){this.streamInfo.crc32=i(a.data,this.streamInfo.crc32||0),this.push(a)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function s(a){i.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}r.inherits(s,i),s.prototype.processChunk=function(a){if(a){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+a.data.length}i.prototype.processChunk.call(this,a)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function s(a){i.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(m){u.dataIsReady=!0,u.data=m,u.max=m&&m.length||0,u.type=r.getTypeOf(m),u.isPaused||u._tickAndRepeat()},function(m){u.error(m)})}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,u);break;case"uint8array":a=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":a=this.data.slice(this.index,u)}return this.index=u,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function r(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,s){return this._listeners[i].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,s){if(this._listeners[i])for(var a=0;a<this._listeners[i].length;a++)this._listeners[i][a].call(this,s)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var s=this;return i.on("data",function(a){s.processChunk(a)}),i.on("end",function(){s.end()}),i.on("error",function(a){s.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,s){return this.extraStreamInfo[i]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},e.exports=r},{}],29:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./ConvertWorker"),s=t("./GenericWorker"),a=t("../base64"),u=t("../support"),m=t("../external"),p=null;if(u.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(d,g){return new m.Promise(function(c,h){var y=[],v=d._internalType,E=d._outputType,x=d._mimeType;d.on("data",function(S,A){y.push(S),g&&g(A)}).on("error",function(S){y=[],h(S)}).on("end",function(){try{var S=function(A,D,C){switch(A){case"blob":return r.newBlob(r.transformTo("arraybuffer",D),C);case"base64":return a.encode(D);default:return r.transformTo(A,D)}}(E,function(A,D){var C,F=0,L=null,k=0;for(C=0;C<D.length;C++)k+=D[C].length;switch(A){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(L=new Uint8Array(k),C=0;C<D.length;C++)L.set(D[C],F),F+=D[C].length;return L;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+A+"'")}}(v,y),x);c(S)}catch(A){h(A)}y=[]}).resume()})}function l(d,g,c){var h=g;switch(g){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=g,this._mimeType=c,r.checkSupport(h),this._worker=d.pipe(new i(h)),d.lock()}catch(y){this._worker=new s("error"),this._worker.error(y)}}l.prototype={accumulate:function(d){return _(this,d)},on:function(d,g){var c=this;return d==="data"?this._worker.on(d,function(h){g.call(c,h.data,h.meta)}):this._worker.on(d,function(){r.delay(g,arguments,c)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},d)}},e.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",n.nodebuffer=typeof Buffer!="undefined",n.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var r=t("./utils"),i=t("./support"),s=t("./nodejsUtils"),a=t("./stream/GenericWorker"),u=new Array(256),m=0;m<256;m++)u[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;u[254]=u[254]=1;function p(){a.call(this,"utf-8 decode"),this.leftOver=null}function _(){a.call(this,"utf-8 encode")}n.utf8encode=function(l){return i.nodebuffer?s.newBufferFrom(l,"utf-8"):function(d){var g,c,h,y,v,E=d.length,x=0;for(y=0;y<E;y++)(64512&(c=d.charCodeAt(y)))==55296&&y+1<E&&(64512&(h=d.charCodeAt(y+1)))==56320&&(c=65536+(c-55296<<10)+(h-56320),y++),x+=c<128?1:c<2048?2:c<65536?3:4;for(g=i.uint8array?new Uint8Array(x):new Array(x),y=v=0;v<x;y++)(64512&(c=d.charCodeAt(y)))==55296&&y+1<E&&(64512&(h=d.charCodeAt(y+1)))==56320&&(c=65536+(c-55296<<10)+(h-56320),y++),c<128?g[v++]=c:(c<2048?g[v++]=192|c>>>6:(c<65536?g[v++]=224|c>>>12:(g[v++]=240|c>>>18,g[v++]=128|c>>>12&63),g[v++]=128|c>>>6&63),g[v++]=128|63&c);return g}(l)},n.utf8decode=function(l){return i.nodebuffer?r.transformTo("nodebuffer",l).toString("utf-8"):function(d){var g,c,h,y,v=d.length,E=new Array(2*v);for(g=c=0;g<v;)if((h=d[g++])<128)E[c++]=h;else if(4<(y=u[h]))E[c++]=65533,g+=y-1;else{for(h&=y===2?31:y===3?15:7;1<y&&g<v;)h=h<<6|63&d[g++],y--;1<y?E[c++]=65533:h<65536?E[c++]=h:(h-=65536,E[c++]=55296|h>>10&1023,E[c++]=56320|1023&h)}return E.length!==c&&(E.subarray?E=E.subarray(0,c):E.length=c),r.applyFromCharCode(E)}(l=r.transformTo(i.uint8array?"uint8array":"array",l))},r.inherits(p,a),p.prototype.processChunk=function(l){var d=r.transformTo(i.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var g=d;(d=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),d.set(g,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var c=function(y,v){var E;for((v=v||y.length)>y.length&&(v=y.length),E=v-1;0<=E&&(192&y[E])==128;)E--;return E<0||E===0?v:E+u[y[E]]>v?E:v}(d),h=d;c!==d.length&&(i.uint8array?(h=d.subarray(0,c),this.leftOver=d.subarray(c,d.length)):(h=d.slice(0,c),this.leftOver=d.slice(c,d.length))),this.push({data:n.utf8decode(h),meta:l.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=p,r.inherits(_,a),_.prototype.processChunk=function(l){this.push({data:n.utf8encode(l.data),meta:l.meta})},n.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){"use strict";var r=t("./support"),i=t("./base64"),s=t("./nodejsUtils"),a=t("set-immediate-shim"),u=t("./external");function m(c){return c}function p(c,h){for(var y=0;y<c.length;++y)h[y]=255&c.charCodeAt(y);return h}n.newBlob=function(c,h){n.checkSupport("blob");try{return new Blob([c],{type:h})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(c),y.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(c,h,y){var v=[],E=0,x=c.length;if(x<=y)return String.fromCharCode.apply(null,c);for(;E<x;)h==="array"||h==="nodebuffer"?v.push(String.fromCharCode.apply(null,c.slice(E,Math.min(E+y,x)))):v.push(String.fromCharCode.apply(null,c.subarray(E,Math.min(E+y,x)))),E+=y;return v.join("")},stringifyByChar:function(c){for(var h="",y=0;y<c.length;y++)h+=String.fromCharCode(c[y]);return h},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function l(c){var h=65536,y=n.getTypeOf(c),v=!0;if(y==="uint8array"?v=_.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=_.applyCanBeUsed.nodebuffer),v)for(;1<h;)try{return _.stringifyByChunk(c,y,h)}catch{h=Math.floor(h/2)}return _.stringifyByChar(c)}function d(c,h){for(var y=0;y<c.length;y++)h[y]=c[y];return h}n.applyFromCharCode=l;var g={};g.string={string:m,array:function(c){return p(c,new Array(c.length))},arraybuffer:function(c){return g.string.uint8array(c).buffer},uint8array:function(c){return p(c,new Uint8Array(c.length))},nodebuffer:function(c){return p(c,s.allocBuffer(c.length))}},g.array={string:l,array:m,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return s.newBufferFrom(c)}},g.arraybuffer={string:function(c){return l(new Uint8Array(c))},array:function(c){return d(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:m,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return s.newBufferFrom(new Uint8Array(c))}},g.uint8array={string:l,array:function(c){return d(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:m,nodebuffer:function(c){return s.newBufferFrom(c)}},g.nodebuffer={string:l,array:function(c){return d(c,new Array(c.length))},arraybuffer:function(c){return g.nodebuffer.uint8array(c).buffer},uint8array:function(c){return d(c,new Uint8Array(c.length))},nodebuffer:m},n.transformTo=function(c,h){if(h=h||"",!c)return h;n.checkSupport(c);var y=n.getTypeOf(h);return g[y][c](h)},n.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":r.nodebuffer&&s.isBuffer(c)?"nodebuffer":r.uint8array&&c instanceof Uint8Array?"uint8array":r.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(c){if(!r[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(c){var h,y,v="";for(y=0;y<(c||"").length;y++)v+="\\x"+((h=c.charCodeAt(y))<16?"0":"")+h.toString(16).toUpperCase();return v},n.delay=function(c,h,y){a(function(){c.apply(y||null,h||[])})},n.inherits=function(c,h){function y(){}y.prototype=h.prototype,c.prototype=new y},n.extend=function(){var c,h,y={};for(c=0;c<arguments.length;c++)for(h in arguments[c])arguments[c].hasOwnProperty(h)&&y[h]===void 0&&(y[h]=arguments[c][h]);return y},n.prepareContent=function(c,h,y,v,E){return u.Promise.resolve(h).then(function(x){return r.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader!="undefined"?new u.Promise(function(S,A){var D=new FileReader;D.onload=function(C){S(C.target.result)},D.onerror=function(C){A(C.target.error)},D.readAsArrayBuffer(x)}):x}).then(function(x){var S=n.getTypeOf(x);return S?(S==="arraybuffer"?x=n.transformTo("uint8array",x):S==="string"&&(E?x=i.decode(x):y&&v!==!0&&(x=function(A){return p(A,r.uint8array?new Uint8Array(A.length):new Array(A.length))}(x))),x):u.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),s=t("./signature"),a=t("./zipEntry"),u=(t("./utf8"),t("./support"));function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(_)+", expected "+i.pretty(p)+")")}},isSignature:function(p,_){var l=this.reader.index;this.reader.setIndex(p);var d=this.reader.readString(4)===_;return this.reader.setIndex(l),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),_=u.uint8array?"uint8array":"array",l=i.transformTo(_,p);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,_,l,d=this.zip64EndOfCentralSize-44;0<d;)p=this.reader.readInt(2),_=this.reader.readInt(4),l=this.reader.readData(_),this.zip64ExtensibleData[p]={id:p,length:_,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,_;for(p=0;p<this.files.length;p++)_=this.files[p],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(p=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var _=p;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var d=_-l;if(0<d)this.isSignature(_,s.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(p){this.reader=r(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),s=t("./compressedObject"),a=t("./crc32"),u=t("./utf8"),m=t("./compressions"),p=t("./support");function _(l,d){this.options=l,this.loadOptions=d}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var d,g;if(l.skip(22),this.fileNameLength=l.readInt(2),g=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=function(c){for(var h in m)if(m.hasOwnProperty(h)&&m[h].magic===c)return m[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,d,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var d=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(d),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(l){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(l){var d,g,c,h=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<h;)d=l.readInt(2),g=l.readInt(2),c=l.readData(g),this.extraFields[d]={id:d,length:g,value:c};l.setIndex(h)},handleUTF8:function(){var l=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var g=i.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var h=i.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var d=r(l.value);return d.readInt(1)!==1||a(this.fileName)!==d.readInt(4)?null:u.utf8decode(d.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var d=r(l.value);return d.readInt(1)!==1||a(this.fileComment)!==d.readInt(4)?null:u.utf8decode(d.readData(l.length-5))}return null}},e.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function r(d,g,c){this.name=d,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=g,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var i=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),a=t("./utf8"),u=t("./compressedObject"),m=t("./stream/GenericWorker");r.prototype={internalStream:function(d){var g=null,c="string";try{if(!d)throw new Error("No output type specified.");var h=(c=d.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!h&&(g=g.pipe(new a.Utf8EncodeWorker)),!y&&h&&(g=g.pipe(new a.Utf8DecodeWorker))}catch(v){(g=new m("error")).error(v)}return new i(g,c,"")},async:function(d,g){return this.internalStream(d).accumulate(g)},nodeStream:function(d,g){return this.internalStream(d||"nodebuffer").toNodejsStream(g)},_compressWorker:function(d,g){if(this._data instanceof u&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new a.Utf8EncodeWorker)),u.createWorkerFrom(c,d,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof m?this._data:new s(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<p.length;l++)r.prototype[p[l]]=_;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(r){"use strict";var i,s,a=r.MutationObserver||r.WebKitMutationObserver;if(a){var u=0,m=new a(d),p=r.document.createTextNode("");m.observe(p,{characterData:!0}),i=function(){p.data=u=++u%2}}else if(r.setImmediate||r.MessageChannel===void 0)i="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var g=r.document.createElement("script");g.onreadystatechange=function(){d(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},r.document.documentElement.appendChild(g)}:function(){setTimeout(d,0)};else{var _=new r.MessageChannel;_.port1.onmessage=d,i=function(){_.port2.postMessage(0)}}var l=[];function d(){var g,c;s=!0;for(var h=l.length;h;){for(c=l,l=[],g=-1;++g<h;)c[g]();h=l.length}s=!1}e.exports=function(g){l.push(g)!==1||s||i()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(t,e,n){"use strict";var r=t("immediate");function i(){}var s={},a=["REJECTED"],u=["FULFILLED"],m=["PENDING"];function p(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,h!==i&&g(this,h)}function _(h,y,v){this.promise=h,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function l(h,y,v){r(function(){var E;try{E=y(v)}catch(x){return s.reject(h,x)}E===h?s.reject(h,new TypeError("Cannot resolve promise with itself")):s.resolve(h,E)})}function d(h){var y=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof y=="function")return function(){y.apply(h,arguments)}}function g(h,y){var v=!1;function E(A){v||(v=!0,s.reject(h,A))}function x(A){v||(v=!0,s.resolve(h,A))}var S=c(function(){y(x,E)});S.status==="error"&&E(S.value)}function c(h,y){var v={};try{v.value=h(y),v.status="success"}catch(E){v.status="error",v.value=E}return v}(e.exports=p).prototype.finally=function(h){if(typeof h!="function")return this;var y=this.constructor;return this.then(function(v){return y.resolve(h()).then(function(){return v})},function(v){return y.resolve(h()).then(function(){throw v})})},p.prototype.catch=function(h){return this.then(null,h)},p.prototype.then=function(h,y){if(typeof h!="function"&&this.state===u||typeof y!="function"&&this.state===a)return this;var v=new this.constructor(i);return this.state!==m?l(v,this.state===u?h:y,this.outcome):this.queue.push(new _(v,h,y)),v},_.prototype.callFulfilled=function(h){s.resolve(this.promise,h)},_.prototype.otherCallFulfilled=function(h){l(this.promise,this.onFulfilled,h)},_.prototype.callRejected=function(h){s.reject(this.promise,h)},_.prototype.otherCallRejected=function(h){l(this.promise,this.onRejected,h)},s.resolve=function(h,y){var v=c(d,y);if(v.status==="error")return s.reject(h,v.value);var E=v.value;if(E)g(h,E);else{h.state=u,h.outcome=y;for(var x=-1,S=h.queue.length;++x<S;)h.queue[x].callFulfilled(y)}return h},s.reject=function(h,y){h.state=a,h.outcome=y;for(var v=-1,E=h.queue.length;++v<E;)h.queue[v].callRejected(y);return h},p.resolve=function(h){return h instanceof this?h:s.resolve(new this(i),h)},p.reject=function(h){var y=new this(i);return s.reject(y,h)},p.all=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=h.length,E=!1;if(!v)return this.resolve([]);for(var x=new Array(v),S=0,A=-1,D=new this(i);++A<v;)C(h[A],A);return D;function C(F,L){y.resolve(F).then(function(k){x[L]=k,++S!==v||E||(E=!0,s.resolve(D,x))},function(k){E||(E=!0,s.reject(D,k))})}},p.race=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=h.length,E=!1;if(!v)return this.resolve([]);for(var x=-1,S=new this(i);++x<v;)A=h[x],y.resolve(A).then(function(D){E||(E=!0,s.resolve(S,D))},function(D){E||(E=!0,s.reject(S,D))});var A;return S}},{immediate:36}],38:[function(t,e,n){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var r=t("./zlib/deflate"),i=t("./utils/common"),s=t("./utils/strings"),a=t("./zlib/messages"),u=t("./zlib/zstream"),m=Object.prototype.toString,p=0,_=-1,l=0,d=8;function g(h){if(!(this instanceof g))return new g(h);this.options=i.assign({level:_,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},h||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var v=r.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(v!==p)throw new Error(a[v]);if(y.header&&r.deflateSetHeader(this.strm,y.header),y.dictionary){var E;if(E=typeof y.dictionary=="string"?s.string2buf(y.dictionary):m.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(v=r.deflateSetDictionary(this.strm,E))!==p)throw new Error(a[v]);this._dict_set=!0}}function c(h,y){var v=new g(y);if(v.push(h,!0),v.err)throw v.msg||a[v.err];return v.result}g.prototype.push=function(h,y){var v,E,x=this.strm,S=this.options.chunkSize;if(this.ended)return!1;E=y===~~y?y:y===!0?4:0,typeof h=="string"?x.input=s.string2buf(h):m.call(h)==="[object ArrayBuffer]"?x.input=new Uint8Array(h):x.input=h,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new i.Buf8(S),x.next_out=0,x.avail_out=S),(v=r.deflate(x,E))!==1&&v!==p)return this.onEnd(v),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(i.shrinkBuf(x.output,x.next_out))):this.onData(i.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&v!==1);return E===4?(v=r.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===p):E!==2||(this.onEnd(p),!(x.avail_out=0))},g.prototype.onData=function(h){this.chunks.push(h)},g.prototype.onEnd=function(h){h===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},n.Deflate=g,n.deflate=c,n.deflateRaw=function(h,y){return(y=y||{}).raw=!0,c(h,y)},n.gzip=function(h,y){return(y=y||{}).gzip=!0,c(h,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var r=t("./zlib/inflate"),i=t("./utils/common"),s=t("./utils/strings"),a=t("./zlib/constants"),u=t("./zlib/messages"),m=t("./zlib/zstream"),p=t("./zlib/gzheader"),_=Object.prototype.toString;function l(g){if(!(this instanceof l))return new l(g);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},g||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||g&&g.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&(15&c.windowBits)==0&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var h=r.inflateInit2(this.strm,c.windowBits);if(h!==a.Z_OK)throw new Error(u[h]);this.header=new p,r.inflateGetHeader(this.strm,this.header)}function d(g,c){var h=new l(c);if(h.push(g,!0),h.err)throw h.msg||u[h.err];return h.result}l.prototype.push=function(g,c){var h,y,v,E,x,S,A=this.strm,D=this.options.chunkSize,C=this.options.dictionary,F=!1;if(this.ended)return!1;y=c===~~c?c:c===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof g=="string"?A.input=s.binstring2buf(g):_.call(g)==="[object ArrayBuffer]"?A.input=new Uint8Array(g):A.input=g,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(D),A.next_out=0,A.avail_out=D),(h=r.inflate(A,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&C&&(S=typeof C=="string"?s.string2buf(C):_.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,h=r.inflateSetDictionary(this.strm,S)),h===a.Z_BUF_ERROR&&F===!0&&(h=a.Z_OK,F=!1),h!==a.Z_STREAM_END&&h!==a.Z_OK)return this.onEnd(h),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&h!==a.Z_STREAM_END&&(A.avail_in!==0||y!==a.Z_FINISH&&y!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=s.utf8border(A.output,A.next_out),E=A.next_out-v,x=s.buf2string(A.output,v),A.next_out=E,A.avail_out=D-E,E&&i.arraySet(A.output,A.output,v,E,0),this.onData(x)):this.onData(i.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(F=!0)}while((0<A.avail_in||A.avail_out===0)&&h!==a.Z_STREAM_END);return h===a.Z_STREAM_END&&(y=a.Z_FINISH),y===a.Z_FINISH?(h=r.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===a.Z_OK):y!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(A.avail_out=0))},l.prototype.onData=function(g){this.chunks.push(g)},l.prototype.onEnd=function(g){g===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},n.Inflate=l,n.inflate=d,n.inflateRaw=function(g,c){return(c=c||{}).raw=!0,d(g,c)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";n.assign=function(a){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var m=u.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(a[p]=m[p])}}return a},n.shrinkBuf=function(a,u){return a.length===u?a:a.subarray?a.subarray(0,u):(a.length=u,a)};var i={arraySet:function(a,u,m,p,_){if(u.subarray&&a.subarray)a.set(u.subarray(m,m+p),_);else for(var l=0;l<p;l++)a[_+l]=u[m+l]},flattenChunks:function(a){var u,m,p,_,l,d;for(u=p=0,m=a.length;u<m;u++)p+=a[u].length;for(d=new Uint8Array(p),u=_=0,m=a.length;u<m;u++)l=a[u],d.set(l,_),_+=l.length;return d}},s={arraySet:function(a,u,m,p,_){for(var l=0;l<p;l++)a[_+l]=u[m+l]},flattenChunks:function(a){return[].concat.apply([],a)}};n.setTyped=function(a){a?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],42:[function(t,e,n){"use strict";var r=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var a=new r.Buf8(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function m(p,_){if(_<65537&&(p.subarray&&s||!p.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(p,_));for(var l="",d=0;d<_;d++)l+=String.fromCharCode(p[d]);return l}a[254]=a[254]=1,n.string2buf=function(p){var _,l,d,g,c,h=p.length,y=0;for(g=0;g<h;g++)(64512&(l=p.charCodeAt(g)))==55296&&g+1<h&&(64512&(d=p.charCodeAt(g+1)))==56320&&(l=65536+(l-55296<<10)+(d-56320),g++),y+=l<128?1:l<2048?2:l<65536?3:4;for(_=new r.Buf8(y),g=c=0;c<y;g++)(64512&(l=p.charCodeAt(g)))==55296&&g+1<h&&(64512&(d=p.charCodeAt(g+1)))==56320&&(l=65536+(l-55296<<10)+(d-56320),g++),l<128?_[c++]=l:(l<2048?_[c++]=192|l>>>6:(l<65536?_[c++]=224|l>>>12:(_[c++]=240|l>>>18,_[c++]=128|l>>>12&63),_[c++]=128|l>>>6&63),_[c++]=128|63&l);return _},n.buf2binstring=function(p){return m(p,p.length)},n.binstring2buf=function(p){for(var _=new r.Buf8(p.length),l=0,d=_.length;l<d;l++)_[l]=p.charCodeAt(l);return _},n.buf2string=function(p,_){var l,d,g,c,h=_||p.length,y=new Array(2*h);for(l=d=0;l<h;)if((g=p[l++])<128)y[d++]=g;else if(4<(c=a[g]))y[d++]=65533,l+=c-1;else{for(g&=c===2?31:c===3?15:7;1<c&&l<h;)g=g<<6|63&p[l++],c--;1<c?y[d++]=65533:g<65536?y[d++]=g:(g-=65536,y[d++]=55296|g>>10&1023,y[d++]=56320|1023&g)}return m(y,d)},n.utf8border=function(p,_){var l;for((_=_||p.length)>p.length&&(_=p.length),l=_-1;0<=l&&(192&p[l])==128;)l--;return l<0||l===0?_:l+a[p[l]]>_?l:_}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(r,i,s,a){for(var u=65535&r|0,m=r>>>16&65535|0,p=0;s!==0;){for(s-=p=2e3<s?2e3:s;m=m+(u=u+i[a++]|0)|0,--p;);u%=65521,m%=65521}return u|m<<16|0}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var r=function(){for(var i,s=[],a=0;a<256;a++){i=a;for(var u=0;u<8;u++)i=1&i?3988292384^i>>>1:i>>>1;s[a]=i}return s}();e.exports=function(i,s,a,u){var m=r,p=u+a;i^=-1;for(var _=u;_<p;_++)i=i>>>8^m[255&(i^s[_])];return-1^i}},{}],46:[function(t,e,n){"use strict";var r,i=t("../utils/common"),s=t("./trees"),a=t("./adler32"),u=t("./crc32"),m=t("./messages"),p=0,_=4,l=0,d=-2,g=-1,c=4,h=2,y=8,v=9,E=286,x=30,S=19,A=2*E+1,D=15,C=3,F=258,L=F+C+1,k=42,R=113,f=1,z=2,Y=3,K=4;function J(o,M){return o.msg=m[M],M}function j(o){return(o<<1)-(4<o?9:0)}function Q(o){for(var M=o.length;0<=--M;)o[M]=0}function O(o){var M=o.state,B=M.pending;B>o.avail_out&&(B=o.avail_out),B!==0&&(i.arraySet(o.output,M.pending_buf,M.pending_out,B,o.next_out),o.next_out+=B,M.pending_out+=B,o.total_out+=B,o.avail_out-=B,M.pending-=B,M.pending===0&&(M.pending_out=0))}function P(o,M){s._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,M),o.block_start=o.strstart,O(o.strm)}function X(o,M){o.pending_buf[o.pending++]=M}function H(o,M){o.pending_buf[o.pending++]=M>>>8&255,o.pending_buf[o.pending++]=255&M}function V(o,M){var B,w,b=o.max_chain_length,I=o.strstart,N=o.prev_length,U=o.nice_match,T=o.strstart>o.w_size-L?o.strstart-(o.w_size-L):0,W=o.window,$=o.w_mask,Z=o.prev,ee=o.strstart+F,ae=W[I+N-1],re=W[I+N];o.prev_length>=o.good_match&&(b>>=2),U>o.lookahead&&(U=o.lookahead);do if(W[(B=M)+N]===re&&W[B+N-1]===ae&&W[B]===W[I]&&W[++B]===W[I+1]){I+=2,B++;do;while(W[++I]===W[++B]&&W[++I]===W[++B]&&W[++I]===W[++B]&&W[++I]===W[++B]&&W[++I]===W[++B]&&W[++I]===W[++B]&&W[++I]===W[++B]&&W[++I]===W[++B]&&I<ee);if(w=F-(ee-I),I=ee-F,N<w){if(o.match_start=M,U<=(N=w))break;ae=W[I+N-1],re=W[I+N]}}while((M=Z[M&$])>T&&--b!=0);return N<=o.lookahead?N:o.lookahead}function le(o){var M,B,w,b,I,N,U,T,W,$,Z=o.w_size;do{if(b=o.window_size-o.lookahead-o.strstart,o.strstart>=Z+(Z-L)){for(i.arraySet(o.window,o.window,Z,Z,0),o.match_start-=Z,o.strstart-=Z,o.block_start-=Z,M=B=o.hash_size;w=o.head[--M],o.head[M]=Z<=w?w-Z:0,--B;);for(M=B=Z;w=o.prev[--M],o.prev[M]=Z<=w?w-Z:0,--B;);b+=Z}if(o.strm.avail_in===0)break;if(N=o.strm,U=o.window,T=o.strstart+o.lookahead,W=b,$=void 0,$=N.avail_in,W<$&&($=W),B=$===0?0:(N.avail_in-=$,i.arraySet(U,N.input,N.next_in,$,T),N.state.wrap===1?N.adler=a(N.adler,U,$,T):N.state.wrap===2&&(N.adler=u(N.adler,U,$,T)),N.next_in+=$,N.total_in+=$,$),o.lookahead+=B,o.lookahead+o.insert>=C)for(I=o.strstart-o.insert,o.ins_h=o.window[I],o.ins_h=(o.ins_h<<o.hash_shift^o.window[I+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[I+C-1])&o.hash_mask,o.prev[I&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=I,I++,o.insert--,!(o.lookahead+o.insert<C)););}while(o.lookahead<L&&o.strm.avail_in!==0)}function ge(o,M){for(var B,w;;){if(o.lookahead<L){if(le(o),o.lookahead<L&&M===p)return f;if(o.lookahead===0)break}if(B=0,o.lookahead>=C&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,B=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),B!==0&&o.strstart-B<=o.w_size-L&&(o.match_length=V(o,B)),o.match_length>=C)if(w=s._tr_tally(o,o.strstart-o.match_start,o.match_length-C),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=C){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,B=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else w=s._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(w&&(P(o,!1),o.strm.avail_out===0))return f}return o.insert=o.strstart<C-1?o.strstart:C-1,M===_?(P(o,!0),o.strm.avail_out===0?Y:K):o.last_lit&&(P(o,!1),o.strm.avail_out===0)?f:z}function ne(o,M){for(var B,w,b;;){if(o.lookahead<L){if(le(o),o.lookahead<L&&M===p)return f;if(o.lookahead===0)break}if(B=0,o.lookahead>=C&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,B=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=C-1,B!==0&&o.prev_length<o.max_lazy_match&&o.strstart-B<=o.w_size-L&&(o.match_length=V(o,B),o.match_length<=5&&(o.strategy===1||o.match_length===C&&4096<o.strstart-o.match_start)&&(o.match_length=C-1)),o.prev_length>=C&&o.match_length<=o.prev_length){for(b=o.strstart+o.lookahead-C,w=s._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-C),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=b&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,B=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=C-1,o.strstart++,w&&(P(o,!1),o.strm.avail_out===0))return f}else if(o.match_available){if((w=s._tr_tally(o,0,o.window[o.strstart-1]))&&P(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return f}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(w=s._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<C-1?o.strstart:C-1,M===_?(P(o,!0),o.strm.avail_out===0?Y:K):o.last_lit&&(P(o,!1),o.strm.avail_out===0)?f:z}function ie(o,M,B,w,b){this.good_length=o,this.max_lazy=M,this.nice_length=B,this.max_chain=w,this.func=b}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*A),this.dyn_dtree=new i.Buf16(2*(2*x+1)),this.bl_tree=new i.Buf16(2*(2*S+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(D+1),this.heap=new i.Buf16(2*E+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*E+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(o){var M;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=h,(M=o.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?k:R,o.adler=M.wrap===2?0:1,M.last_flush=p,s._tr_init(M),l):J(o,d)}function Ce(o){var M=ce(o);return M===l&&function(B){B.window_size=2*B.w_size,Q(B.head),B.max_lazy_match=r[B.level].max_lazy,B.good_match=r[B.level].good_length,B.nice_match=r[B.level].nice_length,B.max_chain_length=r[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=C-1,B.match_available=0,B.ins_h=0}(o.state),M}function Se(o,M,B,w,b,I){if(!o)return d;var N=1;if(M===g&&(M=6),w<0?(N=0,w=-w):15<w&&(N=2,w-=16),b<1||v<b||B!==y||w<8||15<w||M<0||9<M||I<0||c<I)return J(o,d);w===8&&(w=9);var U=new de;return(o.state=U).strm=o,U.wrap=N,U.gzhead=null,U.w_bits=w,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=b+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+C-1)/C),U.window=new i.Buf8(2*U.w_size),U.head=new i.Buf16(U.hash_size),U.prev=new i.Buf16(U.w_size),U.lit_bufsize=1<<b+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new i.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=M,U.strategy=I,U.method=B,Ce(o)}r=[new ie(0,0,0,0,function(o,M){var B=65535;for(B>o.pending_buf_size-5&&(B=o.pending_buf_size-5);;){if(o.lookahead<=1){if(le(o),o.lookahead===0&&M===p)return f;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var w=o.block_start+B;if((o.strstart===0||o.strstart>=w)&&(o.lookahead=o.strstart-w,o.strstart=w,P(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-L&&(P(o,!1),o.strm.avail_out===0))return f}return o.insert=0,M===_?(P(o,!0),o.strm.avail_out===0?Y:K):(o.strstart>o.block_start&&(P(o,!1),o.strm.avail_out),f)}),new ie(4,4,8,4,ge),new ie(4,5,16,8,ge),new ie(4,6,32,32,ge),new ie(4,4,16,16,ne),new ie(8,16,32,32,ne),new ie(8,16,128,128,ne),new ie(8,32,128,256,ne),new ie(32,128,258,1024,ne),new ie(32,258,258,4096,ne)],n.deflateInit=function(o,M){return Se(o,M,y,15,8,0)},n.deflateInit2=Se,n.deflateReset=Ce,n.deflateResetKeep=ce,n.deflateSetHeader=function(o,M){return o&&o.state?o.state.wrap!==2?d:(o.state.gzhead=M,l):d},n.deflate=function(o,M){var B,w,b,I;if(!o||!o.state||5<M||M<0)return o?J(o,d):d;if(w=o.state,!o.output||!o.input&&o.avail_in!==0||w.status===666&&M!==_)return J(o,o.avail_out===0?-5:d);if(w.strm=o,B=w.last_flush,w.last_flush=M,w.status===k)if(w.wrap===2)o.adler=0,X(w,31),X(w,139),X(w,8),w.gzhead?(X(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),X(w,255&w.gzhead.time),X(w,w.gzhead.time>>8&255),X(w,w.gzhead.time>>16&255),X(w,w.gzhead.time>>24&255),X(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),X(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(X(w,255&w.gzhead.extra.length),X(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(o.adler=u(o.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(X(w,0),X(w,0),X(w,0),X(w,0),X(w,0),X(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),X(w,3),w.status=R);else{var N=y+(w.w_bits-8<<4)<<8;N|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(N|=32),N+=31-N%31,w.status=R,H(w,N),w.strstart!==0&&(H(w,o.adler>>>16),H(w,65535&o.adler)),o.adler=1}if(w.status===69)if(w.gzhead.extra){for(b=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>b&&(o.adler=u(o.adler,w.pending_buf,w.pending-b,b)),O(o),b=w.pending,w.pending!==w.pending_buf_size));)X(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>b&&(o.adler=u(o.adler,w.pending_buf,w.pending-b,b)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(o.adler=u(o.adler,w.pending_buf,w.pending-b,b)),O(o),b=w.pending,w.pending===w.pending_buf_size)){I=1;break}I=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,X(w,I)}while(I!==0);w.gzhead.hcrc&&w.pending>b&&(o.adler=u(o.adler,w.pending_buf,w.pending-b,b)),I===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(o.adler=u(o.adler,w.pending_buf,w.pending-b,b)),O(o),b=w.pending,w.pending===w.pending_buf_size)){I=1;break}I=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,X(w,I)}while(I!==0);w.gzhead.hcrc&&w.pending>b&&(o.adler=u(o.adler,w.pending_buf,w.pending-b,b)),I===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&O(o),w.pending+2<=w.pending_buf_size&&(X(w,255&o.adler),X(w,o.adler>>8&255),o.adler=0,w.status=R)):w.status=R),w.pending!==0){if(O(o),o.avail_out===0)return w.last_flush=-1,l}else if(o.avail_in===0&&j(M)<=j(B)&&M!==_)return J(o,-5);if(w.status===666&&o.avail_in!==0)return J(o,-5);if(o.avail_in!==0||w.lookahead!==0||M!==p&&w.status!==666){var U=w.strategy===2?function(T,W){for(var $;;){if(T.lookahead===0&&(le(T),T.lookahead===0)){if(W===p)return f;break}if(T.match_length=0,$=s._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++,$&&(P(T,!1),T.strm.avail_out===0))return f}return T.insert=0,W===_?(P(T,!0),T.strm.avail_out===0?Y:K):T.last_lit&&(P(T,!1),T.strm.avail_out===0)?f:z}(w,M):w.strategy===3?function(T,W){for(var $,Z,ee,ae,re=T.window;;){if(T.lookahead<=F){if(le(T),T.lookahead<=F&&W===p)return f;if(T.lookahead===0)break}if(T.match_length=0,T.lookahead>=C&&0<T.strstart&&(Z=re[ee=T.strstart-1])===re[++ee]&&Z===re[++ee]&&Z===re[++ee]){ae=T.strstart+F;do;while(Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&ee<ae);T.match_length=F-(ae-ee),T.match_length>T.lookahead&&(T.match_length=T.lookahead)}if(T.match_length>=C?($=s._tr_tally(T,1,T.match_length-C),T.lookahead-=T.match_length,T.strstart+=T.match_length,T.match_length=0):($=s._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++),$&&(P(T,!1),T.strm.avail_out===0))return f}return T.insert=0,W===_?(P(T,!0),T.strm.avail_out===0?Y:K):T.last_lit&&(P(T,!1),T.strm.avail_out===0)?f:z}(w,M):r[w.level].func(w,M);if(U!==Y&&U!==K||(w.status=666),U===f||U===Y)return o.avail_out===0&&(w.last_flush=-1),l;if(U===z&&(M===1?s._tr_align(w):M!==5&&(s._tr_stored_block(w,0,0,!1),M===3&&(Q(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),O(o),o.avail_out===0))return w.last_flush=-1,l}return M!==_?l:w.wrap<=0?1:(w.wrap===2?(X(w,255&o.adler),X(w,o.adler>>8&255),X(w,o.adler>>16&255),X(w,o.adler>>24&255),X(w,255&o.total_in),X(w,o.total_in>>8&255),X(w,o.total_in>>16&255),X(w,o.total_in>>24&255)):(H(w,o.adler>>>16),H(w,65535&o.adler)),O(o),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?l:1)},n.deflateEnd=function(o){var M;return o&&o.state?(M=o.state.status)!==k&&M!==69&&M!==73&&M!==91&&M!==103&&M!==R&&M!==666?J(o,d):(o.state=null,M===R?J(o,-3):l):d},n.deflateSetDictionary=function(o,M){var B,w,b,I,N,U,T,W,$=M.length;if(!o||!o.state||(I=(B=o.state).wrap)===2||I===1&&B.status!==k||B.lookahead)return d;for(I===1&&(o.adler=a(o.adler,M,$,0)),B.wrap=0,$>=B.w_size&&(I===0&&(Q(B.head),B.strstart=0,B.block_start=0,B.insert=0),W=new i.Buf8(B.w_size),i.arraySet(W,M,$-B.w_size,B.w_size,0),M=W,$=B.w_size),N=o.avail_in,U=o.next_in,T=o.input,o.avail_in=$,o.next_in=0,o.input=M,le(B);B.lookahead>=C;){for(w=B.strstart,b=B.lookahead-(C-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[w+C-1])&B.hash_mask,B.prev[w&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=w,w++,--b;);B.strstart=w,B.lookahead=C-1,le(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=C-1,B.match_available=0,o.next_in=U,o.input=T,o.avail_in=N,B.wrap=I,l},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(r,i){var s,a,u,m,p,_,l,d,g,c,h,y,v,E,x,S,A,D,C,F,L,k,R,f,z;s=r.state,a=r.next_in,f=r.input,u=a+(r.avail_in-5),m=r.next_out,z=r.output,p=m-(i-r.avail_out),_=m+(r.avail_out-257),l=s.dmax,d=s.wsize,g=s.whave,c=s.wnext,h=s.window,y=s.hold,v=s.bits,E=s.lencode,x=s.distcode,S=(1<<s.lenbits)-1,A=(1<<s.distbits)-1;e:do{v<15&&(y+=f[a++]<<v,v+=8,y+=f[a++]<<v,v+=8),D=E[y&S];t:for(;;){if(y>>>=C=D>>>24,v-=C,(C=D>>>16&255)===0)z[m++]=65535&D;else{if(!(16&C)){if((64&C)==0){D=E[(65535&D)+(y&(1<<C)-1)];continue t}if(32&C){s.mode=12;break e}r.msg="invalid literal/length code",s.mode=30;break e}F=65535&D,(C&=15)&&(v<C&&(y+=f[a++]<<v,v+=8),F+=y&(1<<C)-1,y>>>=C,v-=C),v<15&&(y+=f[a++]<<v,v+=8,y+=f[a++]<<v,v+=8),D=x[y&A];n:for(;;){if(y>>>=C=D>>>24,v-=C,!(16&(C=D>>>16&255))){if((64&C)==0){D=x[(65535&D)+(y&(1<<C)-1)];continue n}r.msg="invalid distance code",s.mode=30;break e}if(L=65535&D,v<(C&=15)&&(y+=f[a++]<<v,(v+=8)<C&&(y+=f[a++]<<v,v+=8)),l<(L+=y&(1<<C)-1)){r.msg="invalid distance too far back",s.mode=30;break e}if(y>>>=C,v-=C,(C=m-p)<L){if(g<(C=L-C)&&s.sane){r.msg="invalid distance too far back",s.mode=30;break e}if(R=h,(k=0)===c){if(k+=d-C,C<F){for(F-=C;z[m++]=h[k++],--C;);k=m-L,R=z}}else if(c<C){if(k+=d+c-C,(C-=c)<F){for(F-=C;z[m++]=h[k++],--C;);if(k=0,c<F){for(F-=C=c;z[m++]=h[k++],--C;);k=m-L,R=z}}}else if(k+=c-C,C<F){for(F-=C;z[m++]=h[k++],--C;);k=m-L,R=z}for(;2<F;)z[m++]=R[k++],z[m++]=R[k++],z[m++]=R[k++],F-=3;F&&(z[m++]=R[k++],1<F&&(z[m++]=R[k++]))}else{for(k=m-L;z[m++]=z[k++],z[m++]=z[k++],z[m++]=z[k++],2<(F-=3););F&&(z[m++]=z[k++],1<F&&(z[m++]=z[k++]))}break}}break}}while(a<u&&m<_);a-=F=v>>3,y&=(1<<(v-=F<<3))-1,r.next_in=a,r.next_out=m,r.avail_in=a<u?u-a+5:5-(a-u),r.avail_out=m<_?_-m+257:257-(m-_),s.hold=y,s.bits=v}},{}],49:[function(t,e,n){"use strict";var r=t("../utils/common"),i=t("./adler32"),s=t("./crc32"),a=t("./inffast"),u=t("./inftrees"),m=1,p=2,_=0,l=-2,d=1,g=852,c=592;function h(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(k){var R;return k&&k.state?(R=k.state,k.total_in=k.total_out=R.total=0,k.msg="",R.wrap&&(k.adler=1&R.wrap),R.mode=d,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new r.Buf32(g),R.distcode=R.distdyn=new r.Buf32(c),R.sane=1,R.back=-1,_):l}function E(k){var R;return k&&k.state?((R=k.state).wsize=0,R.whave=0,R.wnext=0,v(k)):l}function x(k,R){var f,z;return k&&k.state?(z=k.state,R<0?(f=0,R=-R):(f=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?l:(z.window!==null&&z.wbits!==R&&(z.window=null),z.wrap=f,z.wbits=R,E(k))):l}function S(k,R){var f,z;return k?(z=new y,(k.state=z).window=null,(f=x(k,R))!==_&&(k.state=null),f):l}var A,D,C=!0;function F(k){if(C){var R;for(A=new r.Buf32(512),D=new r.Buf32(32),R=0;R<144;)k.lens[R++]=8;for(;R<256;)k.lens[R++]=9;for(;R<280;)k.lens[R++]=7;for(;R<288;)k.lens[R++]=8;for(u(m,k.lens,0,288,A,0,k.work,{bits:9}),R=0;R<32;)k.lens[R++]=5;u(p,k.lens,0,32,D,0,k.work,{bits:5}),C=!1}k.lencode=A,k.lenbits=9,k.distcode=D,k.distbits=5}function L(k,R,f,z){var Y,K=k.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new r.Buf8(K.wsize)),z>=K.wsize?(r.arraySet(K.window,R,f-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(z<(Y=K.wsize-K.wnext)&&(Y=z),r.arraySet(K.window,R,f-z,Y,K.wnext),(z-=Y)?(r.arraySet(K.window,R,f-z,z,0),K.wnext=z,K.whave=K.wsize):(K.wnext+=Y,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=Y))),0}n.inflateReset=E,n.inflateReset2=x,n.inflateResetKeep=v,n.inflateInit=function(k){return S(k,15)},n.inflateInit2=S,n.inflate=function(k,R){var f,z,Y,K,J,j,Q,O,P,X,H,V,le,ge,ne,ie,de,ce,Ce,Se,o,M,B,w,b=0,I=new r.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return l;(f=k.state).mode===12&&(f.mode=13),J=k.next_out,Y=k.output,Q=k.avail_out,K=k.next_in,z=k.input,j=k.avail_in,O=f.hold,P=f.bits,X=j,H=Q,M=_;e:for(;;)switch(f.mode){case d:if(f.wrap===0){f.mode=13;break}for(;P<16;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(2&f.wrap&&O===35615){I[f.check=0]=255&O,I[1]=O>>>8&255,f.check=s(f.check,I,2,0),P=O=0,f.mode=2;break}if(f.flags=0,f.head&&(f.head.done=!1),!(1&f.wrap)||(((255&O)<<8)+(O>>8))%31){k.msg="incorrect header check",f.mode=30;break}if((15&O)!=8){k.msg="unknown compression method",f.mode=30;break}if(P-=4,o=8+(15&(O>>>=4)),f.wbits===0)f.wbits=o;else if(o>f.wbits){k.msg="invalid window size",f.mode=30;break}f.dmax=1<<o,k.adler=f.check=1,f.mode=512&O?10:12,P=O=0;break;case 2:for(;P<16;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(f.flags=O,(255&f.flags)!=8){k.msg="unknown compression method",f.mode=30;break}if(57344&f.flags){k.msg="unknown header flags set",f.mode=30;break}f.head&&(f.head.text=O>>8&1),512&f.flags&&(I[0]=255&O,I[1]=O>>>8&255,f.check=s(f.check,I,2,0)),P=O=0,f.mode=3;case 3:for(;P<32;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}f.head&&(f.head.time=O),512&f.flags&&(I[0]=255&O,I[1]=O>>>8&255,I[2]=O>>>16&255,I[3]=O>>>24&255,f.check=s(f.check,I,4,0)),P=O=0,f.mode=4;case 4:for(;P<16;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}f.head&&(f.head.xflags=255&O,f.head.os=O>>8),512&f.flags&&(I[0]=255&O,I[1]=O>>>8&255,f.check=s(f.check,I,2,0)),P=O=0,f.mode=5;case 5:if(1024&f.flags){for(;P<16;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}f.length=O,f.head&&(f.head.extra_len=O),512&f.flags&&(I[0]=255&O,I[1]=O>>>8&255,f.check=s(f.check,I,2,0)),P=O=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(1024&f.flags&&(j<(V=f.length)&&(V=j),V&&(f.head&&(o=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Array(f.head.extra_len)),r.arraySet(f.head.extra,z,K,V,o)),512&f.flags&&(f.check=s(f.check,z,V,K)),j-=V,K+=V,f.length-=V),f.length))break e;f.length=0,f.mode=7;case 7:if(2048&f.flags){if(j===0)break e;for(V=0;o=z[K+V++],f.head&&o&&f.length<65536&&(f.head.name+=String.fromCharCode(o)),o&&V<j;);if(512&f.flags&&(f.check=s(f.check,z,V,K)),j-=V,K+=V,o)break e}else f.head&&(f.head.name=null);f.length=0,f.mode=8;case 8:if(4096&f.flags){if(j===0)break e;for(V=0;o=z[K+V++],f.head&&o&&f.length<65536&&(f.head.comment+=String.fromCharCode(o)),o&&V<j;);if(512&f.flags&&(f.check=s(f.check,z,V,K)),j-=V,K+=V,o)break e}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(512&f.flags){for(;P<16;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(O!==(65535&f.check)){k.msg="header crc mismatch",f.mode=30;break}P=O=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),k.adler=f.check=0,f.mode=12;break;case 10:for(;P<32;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}k.adler=f.check=h(O),P=O=0,f.mode=11;case 11:if(f.havedict===0)return k.next_out=J,k.avail_out=Q,k.next_in=K,k.avail_in=j,f.hold=O,f.bits=P,2;k.adler=f.check=1,f.mode=12;case 12:if(R===5||R===6)break e;case 13:if(f.last){O>>>=7&P,P-=7&P,f.mode=27;break}for(;P<3;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}switch(f.last=1&O,P-=1,3&(O>>>=1)){case 0:f.mode=14;break;case 1:if(F(f),f.mode=20,R!==6)break;O>>>=2,P-=2;break e;case 2:f.mode=17;break;case 3:k.msg="invalid block type",f.mode=30}O>>>=2,P-=2;break;case 14:for(O>>>=7&P,P-=7&P;P<32;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if((65535&O)!=(O>>>16^65535)){k.msg="invalid stored block lengths",f.mode=30;break}if(f.length=65535&O,P=O=0,f.mode=15,R===6)break e;case 15:f.mode=16;case 16:if(V=f.length){if(j<V&&(V=j),Q<V&&(V=Q),V===0)break e;r.arraySet(Y,z,K,V,J),j-=V,K+=V,Q-=V,J+=V,f.length-=V;break}f.mode=12;break;case 17:for(;P<14;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(f.nlen=257+(31&O),O>>>=5,P-=5,f.ndist=1+(31&O),O>>>=5,P-=5,f.ncode=4+(15&O),O>>>=4,P-=4,286<f.nlen||30<f.ndist){k.msg="too many length or distance symbols",f.mode=30;break}f.have=0,f.mode=18;case 18:for(;f.have<f.ncode;){for(;P<3;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}f.lens[N[f.have++]]=7&O,O>>>=3,P-=3}for(;f.have<19;)f.lens[N[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,B={bits:f.lenbits},M=u(0,f.lens,0,19,f.lencode,0,f.work,B),f.lenbits=B.bits,M){k.msg="invalid code lengths set",f.mode=30;break}f.have=0,f.mode=19;case 19:for(;f.have<f.nlen+f.ndist;){for(;ie=(b=f.lencode[O&(1<<f.lenbits)-1])>>>16&255,de=65535&b,!((ne=b>>>24)<=P);){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(de<16)O>>>=ne,P-=ne,f.lens[f.have++]=de;else{if(de===16){for(w=ne+2;P<w;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(O>>>=ne,P-=ne,f.have===0){k.msg="invalid bit length repeat",f.mode=30;break}o=f.lens[f.have-1],V=3+(3&O),O>>>=2,P-=2}else if(de===17){for(w=ne+3;P<w;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}P-=ne,o=0,V=3+(7&(O>>>=ne)),O>>>=3,P-=3}else{for(w=ne+7;P<w;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}P-=ne,o=0,V=11+(127&(O>>>=ne)),O>>>=7,P-=7}if(f.have+V>f.nlen+f.ndist){k.msg="invalid bit length repeat",f.mode=30;break}for(;V--;)f.lens[f.have++]=o}}if(f.mode===30)break;if(f.lens[256]===0){k.msg="invalid code -- missing end-of-block",f.mode=30;break}if(f.lenbits=9,B={bits:f.lenbits},M=u(m,f.lens,0,f.nlen,f.lencode,0,f.work,B),f.lenbits=B.bits,M){k.msg="invalid literal/lengths set",f.mode=30;break}if(f.distbits=6,f.distcode=f.distdyn,B={bits:f.distbits},M=u(p,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,B),f.distbits=B.bits,M){k.msg="invalid distances set",f.mode=30;break}if(f.mode=20,R===6)break e;case 20:f.mode=21;case 21:if(6<=j&&258<=Q){k.next_out=J,k.avail_out=Q,k.next_in=K,k.avail_in=j,f.hold=O,f.bits=P,a(k,H),J=k.next_out,Y=k.output,Q=k.avail_out,K=k.next_in,z=k.input,j=k.avail_in,O=f.hold,P=f.bits,f.mode===12&&(f.back=-1);break}for(f.back=0;ie=(b=f.lencode[O&(1<<f.lenbits)-1])>>>16&255,de=65535&b,!((ne=b>>>24)<=P);){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(ie&&(240&ie)==0){for(ce=ne,Ce=ie,Se=de;ie=(b=f.lencode[Se+((O&(1<<ce+Ce)-1)>>ce)])>>>16&255,de=65535&b,!(ce+(ne=b>>>24)<=P);){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}O>>>=ce,P-=ce,f.back+=ce}if(O>>>=ne,P-=ne,f.back+=ne,f.length=de,ie===0){f.mode=26;break}if(32&ie){f.back=-1,f.mode=12;break}if(64&ie){k.msg="invalid literal/length code",f.mode=30;break}f.extra=15&ie,f.mode=22;case 22:if(f.extra){for(w=f.extra;P<w;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}f.length+=O&(1<<f.extra)-1,O>>>=f.extra,P-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=23;case 23:for(;ie=(b=f.distcode[O&(1<<f.distbits)-1])>>>16&255,de=65535&b,!((ne=b>>>24)<=P);){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if((240&ie)==0){for(ce=ne,Ce=ie,Se=de;ie=(b=f.distcode[Se+((O&(1<<ce+Ce)-1)>>ce)])>>>16&255,de=65535&b,!(ce+(ne=b>>>24)<=P);){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}O>>>=ce,P-=ce,f.back+=ce}if(O>>>=ne,P-=ne,f.back+=ne,64&ie){k.msg="invalid distance code",f.mode=30;break}f.offset=de,f.extra=15&ie,f.mode=24;case 24:if(f.extra){for(w=f.extra;P<w;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}f.offset+=O&(1<<f.extra)-1,O>>>=f.extra,P-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){k.msg="invalid distance too far back",f.mode=30;break}f.mode=25;case 25:if(Q===0)break e;if(V=H-Q,f.offset>V){if((V=f.offset-V)>f.whave&&f.sane){k.msg="invalid distance too far back",f.mode=30;break}le=V>f.wnext?(V-=f.wnext,f.wsize-V):f.wnext-V,V>f.length&&(V=f.length),ge=f.window}else ge=Y,le=J-f.offset,V=f.length;for(Q<V&&(V=Q),Q-=V,f.length-=V;Y[J++]=ge[le++],--V;);f.length===0&&(f.mode=21);break;case 26:if(Q===0)break e;Y[J++]=f.length,Q--,f.mode=21;break;case 27:if(f.wrap){for(;P<32;){if(j===0)break e;j--,O|=z[K++]<<P,P+=8}if(H-=Q,k.total_out+=H,f.total+=H,H&&(k.adler=f.check=f.flags?s(f.check,Y,H,J-H):i(f.check,Y,H,J-H)),H=Q,(f.flags?O:h(O))!==f.check){k.msg="incorrect data check",f.mode=30;break}P=O=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;P<32;){if(j===0)break e;j--,O+=z[K++]<<P,P+=8}if(O!==(4294967295&f.total)){k.msg="incorrect length check",f.mode=30;break}P=O=0}f.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;case 32:default:return l}return k.next_out=J,k.avail_out=Q,k.next_in=K,k.avail_in=j,f.hold=O,f.bits=P,(f.wsize||H!==k.avail_out&&f.mode<30&&(f.mode<27||R!==4))&&L(k,k.output,k.next_out,H-k.avail_out)?(f.mode=31,-4):(X-=k.avail_in,H-=k.avail_out,k.total_in+=X,k.total_out+=H,f.total+=H,f.wrap&&H&&(k.adler=f.check=f.flags?s(f.check,Y,H,k.next_out-H):i(f.check,Y,H,k.next_out-H)),k.data_type=f.bits+(f.last?64:0)+(f.mode===12?128:0)+(f.mode===20||f.mode===15?256:0),(X==0&&H===0||R===4)&&M===_&&(M=-5),M)},n.inflateEnd=function(k){if(!k||!k.state)return l;var R=k.state;return R.window&&(R.window=null),k.state=null,_},n.inflateGetHeader=function(k,R){var f;return k&&k.state?(2&(f=k.state).wrap)==0?l:((f.head=R).done=!1,_):l},n.inflateSetDictionary=function(k,R){var f,z=R.length;return k&&k.state?(f=k.state).wrap!==0&&f.mode!==11?l:f.mode===11&&i(1,R,z,0)!==f.check?-3:L(k,R,z,z)?(f.mode=31,-4):(f.havedict=1,_):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(m,p,_,l,d,g,c,h){var y,v,E,x,S,A,D,C,F,L=h.bits,k=0,R=0,f=0,z=0,Y=0,K=0,J=0,j=0,Q=0,O=0,P=null,X=0,H=new r.Buf16(16),V=new r.Buf16(16),le=null,ge=0;for(k=0;k<=15;k++)H[k]=0;for(R=0;R<l;R++)H[p[_+R]]++;for(Y=L,z=15;1<=z&&H[z]===0;z--);if(z<Y&&(Y=z),z===0)return d[g++]=20971520,d[g++]=20971520,h.bits=1,0;for(f=1;f<z&&H[f]===0;f++);for(Y<f&&(Y=f),k=j=1;k<=15;k++)if(j<<=1,(j-=H[k])<0)return-1;if(0<j&&(m===0||z!==1))return-1;for(V[1]=0,k=1;k<15;k++)V[k+1]=V[k]+H[k];for(R=0;R<l;R++)p[_+R]!==0&&(c[V[p[_+R]]++]=R);if(A=m===0?(P=le=c,19):m===1?(P=i,X-=257,le=s,ge-=257,256):(P=a,le=u,-1),k=f,S=g,J=R=O=0,E=-1,x=(Q=1<<(K=Y))-1,m===1&&852<Q||m===2&&592<Q)return 1;for(;;){for(D=k-J,F=c[R]<A?(C=0,c[R]):c[R]>A?(C=le[ge+c[R]],P[X+c[R]]):(C=96,0),y=1<<k-J,f=v=1<<K;d[S+(O>>J)+(v-=y)]=D<<24|C<<16|F|0,v!==0;);for(y=1<<k-1;O&y;)y>>=1;if(y!==0?(O&=y-1,O+=y):O=0,R++,--H[k]==0){if(k===z)break;k=p[_+c[R]]}if(Y<k&&(O&x)!==E){for(J===0&&(J=Y),S+=f,j=1<<(K=k-J);K+J<z&&!((j-=H[K+J])<=0);)K++,j<<=1;if(Q+=1<<K,m===1&&852<Q||m===2&&592<Q)return 1;d[E=O&x]=Y<<24|K<<16|S-g|0}}return O!==0&&(d[S+O]=k-J<<24|64<<16|0),h.bits=Y,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var r=t("../utils/common"),i=0,s=1;function a(b){for(var I=b.length;0<=--I;)b[I]=0}var u=0,m=29,p=256,_=p+1+m,l=30,d=19,g=2*_+1,c=15,h=16,y=7,v=256,E=16,x=17,S=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(_+2));a(L);var k=new Array(2*l);a(k);var R=new Array(512);a(R);var f=new Array(256);a(f);var z=new Array(m);a(z);var Y,K,J,j=new Array(l);function Q(b,I,N,U,T){this.static_tree=b,this.extra_bits=I,this.extra_base=N,this.elems=U,this.max_length=T,this.has_stree=b&&b.length}function O(b,I){this.dyn_tree=b,this.max_code=0,this.stat_desc=I}function P(b){return b<256?R[b]:R[256+(b>>>7)]}function X(b,I){b.pending_buf[b.pending++]=255&I,b.pending_buf[b.pending++]=I>>>8&255}function H(b,I,N){b.bi_valid>h-N?(b.bi_buf|=I<<b.bi_valid&65535,X(b,b.bi_buf),b.bi_buf=I>>h-b.bi_valid,b.bi_valid+=N-h):(b.bi_buf|=I<<b.bi_valid&65535,b.bi_valid+=N)}function V(b,I,N){H(b,N[2*I],N[2*I+1])}function le(b,I){for(var N=0;N|=1&b,b>>>=1,N<<=1,0<--I;);return N>>>1}function ge(b,I,N){var U,T,W=new Array(c+1),$=0;for(U=1;U<=c;U++)W[U]=$=$+N[U-1]<<1;for(T=0;T<=I;T++){var Z=b[2*T+1];Z!==0&&(b[2*T]=le(W[Z]++,Z))}}function ne(b){var I;for(I=0;I<_;I++)b.dyn_ltree[2*I]=0;for(I=0;I<l;I++)b.dyn_dtree[2*I]=0;for(I=0;I<d;I++)b.bl_tree[2*I]=0;b.dyn_ltree[2*v]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function ie(b){8<b.bi_valid?X(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function de(b,I,N,U){var T=2*I,W=2*N;return b[T]<b[W]||b[T]===b[W]&&U[I]<=U[N]}function ce(b,I,N){for(var U=b.heap[N],T=N<<1;T<=b.heap_len&&(T<b.heap_len&&de(I,b.heap[T+1],b.heap[T],b.depth)&&T++,!de(I,U,b.heap[T],b.depth));)b.heap[N]=b.heap[T],N=T,T<<=1;b.heap[N]=U}function Ce(b,I,N){var U,T,W,$,Z=0;if(b.last_lit!==0)for(;U=b.pending_buf[b.d_buf+2*Z]<<8|b.pending_buf[b.d_buf+2*Z+1],T=b.pending_buf[b.l_buf+Z],Z++,U===0?V(b,T,I):(V(b,(W=f[T])+p+1,I),($=A[W])!==0&&H(b,T-=z[W],$),V(b,W=P(--U),N),($=D[W])!==0&&H(b,U-=j[W],$)),Z<b.last_lit;);V(b,v,I)}function Se(b,I){var N,U,T,W=I.dyn_tree,$=I.stat_desc.static_tree,Z=I.stat_desc.has_stree,ee=I.stat_desc.elems,ae=-1;for(b.heap_len=0,b.heap_max=g,N=0;N<ee;N++)W[2*N]!==0?(b.heap[++b.heap_len]=ae=N,b.depth[N]=0):W[2*N+1]=0;for(;b.heap_len<2;)W[2*(T=b.heap[++b.heap_len]=ae<2?++ae:0)]=1,b.depth[T]=0,b.opt_len--,Z&&(b.static_len-=$[2*T+1]);for(I.max_code=ae,N=b.heap_len>>1;1<=N;N--)ce(b,W,N);for(T=ee;N=b.heap[1],b.heap[1]=b.heap[b.heap_len--],ce(b,W,1),U=b.heap[1],b.heap[--b.heap_max]=N,b.heap[--b.heap_max]=U,W[2*T]=W[2*N]+W[2*U],b.depth[T]=(b.depth[N]>=b.depth[U]?b.depth[N]:b.depth[U])+1,W[2*N+1]=W[2*U+1]=T,b.heap[1]=T++,ce(b,W,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function(re,ke){var lt,Ae,ct,fe,Dt,on,Te=ke.dyn_tree,ir=ke.max_code,ci=ke.stat_desc.static_tree,fi=ke.stat_desc.has_stree,hi=ke.stat_desc.extra_bits,sr=ke.stat_desc.extra_base,ft=ke.stat_desc.max_length,zt=0;for(fe=0;fe<=c;fe++)re.bl_count[fe]=0;for(Te[2*re.heap[re.heap_max]+1]=0,lt=re.heap_max+1;lt<g;lt++)ft<(fe=Te[2*Te[2*(Ae=re.heap[lt])+1]+1]+1)&&(fe=ft,zt++),Te[2*Ae+1]=fe,ir<Ae||(re.bl_count[fe]++,Dt=0,sr<=Ae&&(Dt=hi[Ae-sr]),on=Te[2*Ae],re.opt_len+=on*(fe+Dt),fi&&(re.static_len+=on*(ci[2*Ae+1]+Dt)));if(zt!==0){do{for(fe=ft-1;re.bl_count[fe]===0;)fe--;re.bl_count[fe]--,re.bl_count[fe+1]+=2,re.bl_count[ft]--,zt-=2}while(0<zt);for(fe=ft;fe!==0;fe--)for(Ae=re.bl_count[fe];Ae!==0;)ir<(ct=re.heap[--lt])||(Te[2*ct+1]!==fe&&(re.opt_len+=(fe-Te[2*ct+1])*Te[2*ct],Te[2*ct+1]=fe),Ae--)}}(b,I),ge(W,ae,b.bl_count)}function o(b,I,N){var U,T,W=-1,$=I[1],Z=0,ee=7,ae=4;for($===0&&(ee=138,ae=3),I[2*(N+1)+1]=65535,U=0;U<=N;U++)T=$,$=I[2*(U+1)+1],++Z<ee&&T===$||(Z<ae?b.bl_tree[2*T]+=Z:T!==0?(T!==W&&b.bl_tree[2*T]++,b.bl_tree[2*E]++):Z<=10?b.bl_tree[2*x]++:b.bl_tree[2*S]++,W=T,ae=(Z=0)===$?(ee=138,3):T===$?(ee=6,3):(ee=7,4))}function M(b,I,N){var U,T,W=-1,$=I[1],Z=0,ee=7,ae=4;for($===0&&(ee=138,ae=3),U=0;U<=N;U++)if(T=$,$=I[2*(U+1)+1],!(++Z<ee&&T===$)){if(Z<ae)for(;V(b,T,b.bl_tree),--Z!=0;);else T!==0?(T!==W&&(V(b,T,b.bl_tree),Z--),V(b,E,b.bl_tree),H(b,Z-3,2)):Z<=10?(V(b,x,b.bl_tree),H(b,Z-3,3)):(V(b,S,b.bl_tree),H(b,Z-11,7));W=T,ae=(Z=0)===$?(ee=138,3):T===$?(ee=6,3):(ee=7,4)}}a(j);var B=!1;function w(b,I,N,U){H(b,(u<<1)+(U?1:0),3),function(T,W,$,Z){ie(T),Z&&(X(T,$),X(T,~$)),r.arraySet(T.pending_buf,T.window,W,$,T.pending),T.pending+=$}(b,I,N,!0)}n._tr_init=function(b){B||(function(){var I,N,U,T,W,$=new Array(c+1);for(T=U=0;T<m-1;T++)for(z[T]=U,I=0;I<1<<A[T];I++)f[U++]=T;for(f[U-1]=T,T=W=0;T<16;T++)for(j[T]=W,I=0;I<1<<D[T];I++)R[W++]=T;for(W>>=7;T<l;T++)for(j[T]=W<<7,I=0;I<1<<D[T]-7;I++)R[256+W++]=T;for(N=0;N<=c;N++)$[N]=0;for(I=0;I<=143;)L[2*I+1]=8,I++,$[8]++;for(;I<=255;)L[2*I+1]=9,I++,$[9]++;for(;I<=279;)L[2*I+1]=7,I++,$[7]++;for(;I<=287;)L[2*I+1]=8,I++,$[8]++;for(ge(L,_+1,$),I=0;I<l;I++)k[2*I+1]=5,k[2*I]=le(I,5);Y=new Q(L,A,p+1,_,c),K=new Q(k,D,0,l,c),J=new Q(new Array(0),C,0,d,y)}(),B=!0),b.l_desc=new O(b.dyn_ltree,Y),b.d_desc=new O(b.dyn_dtree,K),b.bl_desc=new O(b.bl_tree,J),b.bi_buf=0,b.bi_valid=0,ne(b)},n._tr_stored_block=w,n._tr_flush_block=function(b,I,N,U){var T,W,$=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(Z){var ee,ae=4093624447;for(ee=0;ee<=31;ee++,ae>>>=1)if(1&ae&&Z.dyn_ltree[2*ee]!==0)return i;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return s;for(ee=32;ee<p;ee++)if(Z.dyn_ltree[2*ee]!==0)return s;return i}(b)),Se(b,b.l_desc),Se(b,b.d_desc),$=function(Z){var ee;for(o(Z,Z.dyn_ltree,Z.l_desc.max_code),o(Z,Z.dyn_dtree,Z.d_desc.max_code),Se(Z,Z.bl_desc),ee=d-1;3<=ee&&Z.bl_tree[2*F[ee]+1]===0;ee--);return Z.opt_len+=3*(ee+1)+5+5+4,ee}(b),T=b.opt_len+3+7>>>3,(W=b.static_len+3+7>>>3)<=T&&(T=W)):T=W=N+5,N+4<=T&&I!==-1?w(b,I,N,U):b.strategy===4||W===T?(H(b,2+(U?1:0),3),Ce(b,L,k)):(H(b,4+(U?1:0),3),function(Z,ee,ae,re){var ke;for(H(Z,ee-257,5),H(Z,ae-1,5),H(Z,re-4,4),ke=0;ke<re;ke++)H(Z,Z.bl_tree[2*F[ke]+1],3);M(Z,Z.dyn_ltree,ee-1),M(Z,Z.dyn_dtree,ae-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,$+1),Ce(b,b.dyn_ltree,b.dyn_dtree)),ne(b),U&&ie(b)},n._tr_tally=function(b,I,N){return b.pending_buf[b.d_buf+2*b.last_lit]=I>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&I,b.pending_buf[b.l_buf+b.last_lit]=255&N,b.last_lit++,I===0?b.dyn_ltree[2*N]++:(b.matches++,I--,b.dyn_ltree[2*(f[N]+p+1)]++,b.dyn_dtree[2*P(I)]++),b.last_lit===b.lit_bufsize-1},n._tr_align=function(b){H(b,2,3),V(b,v,L),function(I){I.bi_valid===16?(X(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){"use strict";e.exports=typeof setImmediate=="function"?setImmediate:function(){var r=[].slice.apply(arguments);r.splice(1,0,0),setTimeout.apply(null,r)}},{}]},{},[10])(10)})});function ar(t){return t?t.type==="pre"&&typeof t.id=="string"&&t.file instanceof File:!1}function or(t){if(!t.startsWith("/"))return;let e=t.substring(1).split("/");for(let n=1;n<=e.length;n++){let r="/"+e.slice(0,n).join("/");ki(r)||FS.mkdir(r)}}function ki(t){try{return FS.stat(t),!0}catch(e){return!1}}function ur(t,e,n={}){try{switch(t){case"mem":FS.mount(MEMFS,n,e);break;case"worker":FS.mount(WORKERFS,n,e);break}}catch(r){console.trace(r)}}function lr(t){try{FS.unmount(t)}catch(e){console.trace(e)}}var li=wi(fr());function Pt(t,e=Module.HEAPU8){let n=0;for(let r=0;r<4;r++)n=n*256+e[t+3-r];return n}async function cn({zip:t,path:e}){return new Promise((n,r)=>{let i=t.file(e);if(!i){r();return}i.async("uint8array").then(s=>{n(s)}).catch(r)})}var Ot,xi=new Uint8Array(16);function fn(){if(!Ot&&(Ot=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ot))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ot(xi)}var hr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Si(t){return typeof t=="string"&&hr.test(t)}var dr=Si;var me=[];for(Ft=0;Ft<256;++Ft)me.push((Ft+256).toString(16).substr(1));var Ft;function Ei(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(me[t[e+0]]+me[t[e+1]]+me[t[e+2]]+me[t[e+3]]+"-"+me[t[e+4]]+me[t[e+5]]+"-"+me[t[e+6]]+me[t[e+7]]+"-"+me[t[e+8]]+me[t[e+9]]+"-"+me[t[e+10]]+me[t[e+11]]+me[t[e+12]]+me[t[e+13]]+me[t[e+14]]+me[t[e+15]]).toLowerCase();if(!dr(n))throw TypeError("Stringified UUID is invalid");return n}var pr=Ei;function Ci(t,e,n){t=t||{};var r=t.random||(t.rng||fn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return pr(r)}var De=Ci;function He(){let t=r=>{},e=r=>{},n=new Promise((r,i)=>{t=r,e=i});return Object.assign(n,{resolve:t,reject:e})}var hn=class{constructor(){this._string=new Map;this._void=new Map;this._strings=new Map;this._file=new Map;this._files=new Map;this.onMessage=e=>{if(Ii(e.data)){let n=e.data.id,r=e.data.value,i=this._string.get(n);this._string.delete(n),i==null||i.resolve(r)}else if(Ri(e.data)){let n=e.data.id,r=this._void.get(n);this._void.delete(n),r==null||r.resolve()}else if(Ti(e.data)){let n=e.data.id,r=this._strings.get(n);this._strings.delete(n),r==null||r.resolve(e.data.strings)}else if(Di(e.data)){let n=e.data.id,r=this._file.get(n);this._file.delete(n),r==null||r.resolve(e.data.file)}else if(Ai(e.data)){let n=e.data.id,r=this._files.get(n);this._files.delete(n),r==null||r.resolve(e.data.files)}};self.addEventListener("message",this.onMessage)}async get(e){let n=De(),r=He(),i={type:"get",id:n,key:e};return this._string.set(n,r),self.postMessage(i),r.then(async s=>{if(s===void 0)return;let u=await(await fetch(s)).arrayBuffer();return new Uint8Array(u)})}async file_(e){let n=De(),r=He(),i={type:"file",id:n,key:e};return this._file.set(n,r),self.postMessage(i),r}async put(e,n){let r=De(),i=He(),s={type:"put",id:r,key:e,buffer:n};return this._void.set(r,i),self.postMessage(s),i}async del(e){let n=De(),r=He(),i={type:"del",id:n,key:e};return this._void.set(n,r),self.postMessage(i),r}async keys({withPrefix:e}){let n=De(),r=He(),i={type:"keys_with_prefix",id:n,prefix:e};return this._strings.set(n,r),self.postMessage(i),r}async files({withPrefix:e}){let n=De(),r=He(),i={type:"files_with_prefix",id:n,prefix:e};return this._files.set(n,r),self.postMessage(i),r}async removeKeys({withPrefix:e}){let n=De(),r=He(),i={id:n,prefix:e,type:"remove_keys_with_prefix"};return this._void.set(n,r),self.postMessage(i),r}};function Ai(t){return t?t.type==="files_response"&&typeof t.id=="string"&&!!t.files:!1}function Ii(t){return t?t.type==="string_response"&&typeof t.id=="string":!1}function Ri(t){return t?t.type==="void_response"&&typeof t.id=="string":!1}function Ti(t){return t?t.type==="strings_response"&&typeof t.id=="string"&&!!t.strings:!1}function Di(t){return t?t.type==="file_response"&&typeof t.id=="string":!1}async function mr({kvs:t,prefix:e,mountPoint:n}){let r=e.endsWith("/")?e:`${e}/`,s=(await t.files({withPrefix:r})).map(a=>{let u=a.file,m=u.name.substring(r.length);return new File([u],m)});or(n),ur("worker",n,{files:s})}var oe=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,he=Object.keys,ye=Array.isArray;typeof Promise!="undefined"&&!oe.Promise&&(oe.Promise=Promise);function ve(t,e){return typeof e!="object"||he(e).forEach(function(n){t[n]=e[n]}),t}var dt=Object.getPrototypeOf,zi={}.hasOwnProperty;function xe(t,e){return zi.call(t,e)}function et(t,e){typeof e=="function"&&(e=e(dt(t))),(typeof Reflect=="undefined"?he:Reflect.ownKeys)(e).forEach(n=>{ze(t,n,e[n])})}var gr=Object.defineProperty;function ze(t,e,n,r){gr(t,e,ve(n&&xe(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function tt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ze(t.prototype,"constructor",t),{extend:et.bind(null,t.prototype)}}}}var Pi=Object.getOwnPropertyDescriptor;function dn(t,e){let n=Pi(t,e),r;return n||(r=dt(t))&&dn(r,e)}var Oi=[].slice;function Bt(t,e,n){return Oi.call(t,e,n)}function yr(t,e){return e(t)}function pt(t){if(!t)throw new Error("Assertion Failed")}function _r(t){oe.setImmediate?setImmediate(t):setTimeout(t,0)}function vr(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Fi(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function Pe(t,e){if(xe(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=Pe(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(a!==-1){var u=t[e.substr(0,a)];return u===void 0?void 0:Pe(u,e.substr(a+1))}}function Ee(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){pt(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Ee(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var a=e.substr(0,s),u=e.substr(s+1);if(u==="")n===void 0?ye(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var m=t[a];m||(m=t[a]={}),Ee(m,u,n)}}else n===void 0?ye(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Bi(t,e){typeof e=="string"?Ee(t,e,void 0):"length"in e&&[].map.call(e,function(n){Ee(t,n,void 0)})}function br(t){var e={};for(var n in t)xe(t,n)&&(e[n]=t[n]);return e}var Mi=[].concat;function wr(t){return Mi.apply([],t)}var kr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(wr([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>oe[t]),Ki=kr.map(t=>oe[t]);vr(kr,t=>[t,!0]);var je=null;function mt(t){je=typeof WeakMap!="undefined"&&new WeakMap;let e=pn(t);return je=null,e}function pn(t){if(!t||typeof t!="object")return t;let e=je&&je.get(t);if(e)return e;if(ye(t)){e=[],je&&je.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(pn(t[n]))}else if(Ki.indexOf(t.constructor)>=0)e=t;else{let s=dt(t);e=s===Object.prototype?{}:Object.create(s),je&&je.set(t,e);for(var i in t)xe(t,i)&&(e[i]=pn(t[i]))}return e}var{toString:Ni}={};function mn(t){return Ni.call(t).slice(8,-1)}var gn=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",ji=typeof gn=="symbol"?function(t){var e;return t!=null&&(e=t[gn])&&e.apply(t)}:function(){return null},nt={};function Oe(t){var e,n,r,i;if(arguments.length===1){if(ye(t))return t.slice();if(this===nt&&typeof t=="string")return[t];if(i=ji(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var yn=typeof Symbol!="undefined"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1,Ie=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xr(t,e){Ie=t,Sr=e}var Sr=()=>!0,Ui=!new Error("").stack;function $e(){if(Ui)try{throw $e.arguments,new Error}catch(t){return t}return new Error}function _n(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Sr).map(r=>`
`+r).join("")):""}var Li=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Er=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vn=Li.concat(Er),Wi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function rt(t,e){this._e=$e(),this.name=t,this.message=e}tt(rt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+_n(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Cr(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Mt(t,e,n,r){this._e=$e(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Cr(t,e)}tt(Mt).from(rt);function gt(t,e){this._e=$e(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Cr(t,e)}tt(gt).from(rt);var Zi=vn.reduce((t,e)=>(t[e]=e+"Error",t),{}),Vi=rt,te=vn.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=$e(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Wi[e]||n,this.inner=null)}return tt(r).from(Vi),t[e]=r,t},{});te.Syntax=SyntaxError;te.Type=TypeError;te.Range=RangeError;var Ar=Er.reduce((t,e)=>(t[e+"Error"]=te[e],t),{});function Hi(t,e){if(!t||t instanceof rt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Ar[t.name])return t;var n=new Ar[t.name](e||t.message,t);return"stack"in t&&ze(n,"stack",{get:function(){return this.inner.stack}}),n}var Kt=vn.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=te[e]),t),{});Kt.ModifyError=Mt;Kt.DexieError=rt;Kt.BulkError=gt;function se(){}function yt(t){return t}function $i(t,e){return t==null||t===yt?e:function(n){return e(t(n))}}function Ge(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Gi(t,e){return t===se?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ge(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ge(i,this.onerror):i),s!==void 0?s:n}}function Qi(t,e){return t===se?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ge(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ge(r,this.onerror):r)}}function Yi(t,e){return t===se?e:function(n){var r=t.apply(this,arguments);ve(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ge(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Ge(s,this.onerror):s),r===void 0?a===void 0?void 0:a:ve(r,a)}}function Xi(t,e){return t===se?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function bn(t,e){return t===se?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}var _t={},qi=100,Ji=20,Ir=100,[wn,Nt,kn]=typeof Promise=="undefined"?[]:(()=>{let t=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[t,dt(t),t];let e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,dt(e),t]})(),Rr=Nt&&Nt.then,jt=wn&&wn.constructor,xn=!!kn,Sn=!1,es=kn?()=>{kn.then(Zt)}:oe.setImmediate?setImmediate.bind(null,Zt):oe.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Zt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Zt,0)},vt=function(t,e){bt.push([t,e]),Ut&&(es(),Ut=!1)},En=!0,Ut=!0,Qe=[],Lt=[],Cn=null,An=yt,it={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Nr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Nr(t[0],t[1])}catch{}})}},q=it,bt=[],Ye=0,Wt=[];function G(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=se,this._lib=!1;var e=this._PSD=q;if(Ie&&(this._stackHolder=$e(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==_t)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Rn(this,this._value);return}this._state=null,this._value=null,++e.ref,Dr(this,t)}var In={get:function(){var t=q,e=$t;function n(r,i){var s=!t.global&&(t!==q||e!==$t);let a=s&&!Fe();var u=new G((m,p)=>{Tn(this,new Tr(Qt(r,t,s,a),Qt(i,t,s,a),m,p,t))});return Ie&&Or(u,this),u}return n.prototype=_t,n},set:function(t){ze(this,"then",t&&t.prototype===_t?In:{get:function(){return t},set:In.set})}};et(G.prototype,{then:In,_then:function(t,e){Tn(this,new Tr(null,null,t,e,q))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Vt(r)):this.then(null,r=>r&&r.name===e?n(r):Vt(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Vt(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Sn=!0;var t=Pr(this,[],Ji),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Sn=!1}}},timeout:function(t,e){return t<1/0?new G((n,r)=>{var i=setTimeout(()=>r(new te.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&ze(G.prototype,Symbol.toStringTag,"Dexie.Promise");it.env=Fr();function Tr(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}et(G,{all:function(){var t=Oe.apply(null,arguments).map(Gt);return new G(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>G.resolve(i).then(a=>{t[s]=a,--r||e(t)},n))})},resolve:t=>{if(t instanceof G)return t;if(t&&typeof t.then=="function")return new G((n,r)=>{t.then(n,r)});var e=new G(_t,!0,t);return Or(e,Cn),e},reject:Vt,race:function(){var t=Oe.apply(null,arguments).map(Gt);return new G((e,n)=>{t.map(r=>G.resolve(r).then(e,n))})},PSD:{get:()=>q,set:t=>q=t},totalEchoes:{get:()=>$t},newPSD:Ue,usePSD:at,scheduler:{get:()=>vt,set:t=>{vt=t}},rejectionMapper:{get:()=>An,set:t=>{An=t}},follow:(t,e)=>new G((n,r)=>Ue((i,s)=>{var a=q;a.unhandleds=[],a.onunhandled=s,a.finalize=Ge(function(){ns(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},a.finalize),t()},e,n,r))});jt&&(jt.allSettled&&ze(G,"allSettled",function(){let t=Oe.apply(null,arguments).map(Gt);return new G(e=>{t.length===0&&e([]);let n=t.length,r=new Array(n);t.forEach((i,s)=>G.resolve(i).then(a=>r[s]={status:"fulfilled",value:a},a=>r[s]={status:"rejected",reason:a}).then(()=>--n||e(r)))})}),jt.any&&typeof AggregateError!="undefined"&&ze(G,"any",function(){let t=Oe.apply(null,arguments).map(Gt);return new G((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length,i=new Array(r);t.forEach((s,a)=>G.resolve(s).then(u=>e(u),u=>{i[a]=u,--r||n(new AggregateError(i))}))})}));function Dr(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&wt();n&&typeof n.then=="function"?Dr(t,(i,s)=>{n instanceof G?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,zr(t)),r&&kt()}},Rn.bind(null,t))}catch(n){Rn(t,n)}}function Rn(t,e){if(Lt.push(e),t._state===null){var n=t._lib&&wt();e=An(e),t._state=!1,t._value=e,Ie&&e!==null&&typeof e=="object"&&!e._promise&&Fi(()=>{var r=dn(e,"stack");e._promise=t,ze(e,"stack",{get:()=>Sn?r&&(r.get?r.get.apply(e):r.value):t.stack})}),rs(t),zr(t),n&&kt()}}function zr(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Tn(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ye===0&&(++Ye,vt(()=>{--Ye===0&&Dn()},[]))}function Tn(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ye,vt(ts,[n,t,e])}function ts(t,e,n){try{Cn=e;var r,i=e._value;e._state?r=t(i):(Lt.length&&(Lt=[]),r=t(i),Lt.indexOf(i)===-1&&is(e)),n.resolve(r)}catch(s){n.reject(s)}finally{Cn=null,--Ye===0&&Dn(),--n.psd.ref||n.psd.finalize()}}function Pr(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,s,a;i!=null?(s=i.name||"Error",a=i.message||i,r=_n(i,0)):(s=i,a=""),e.push(s+(a?": "+a:"")+r)}return Ie&&(r=_n(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&Pr(t._prev,e,n)),e}function Or(t,e){var n=e?e._numPrev+1:0;n<qi&&(t._prev=e,t._numPrev=n)}function Zt(){wt()&&kt()}function wt(){var t=En;return En=!1,Ut=!1,t}function kt(){var t,e,n;do for(;bt.length>0;)for(t=bt,bt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(bt.length>0);En=!0,Ut=!0}function Dn(){var t=Qe;Qe=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Wt.slice(0),n=e.length;n;)e[--n]()}function ns(t){function e(){t(),Wt.splice(Wt.indexOf(e),1)}Wt.push(e),++Ye,vt(()=>{--Ye===0&&Dn()},[])}function rs(t){Qe.some(e=>e._value===t._value)||Qe.push(t)}function is(t){for(var e=Qe.length;e;)if(Qe[--e]._value===t._value){Qe.splice(e,1);return}}function Vt(t){return new G(_t,!1,t)}function ue(t,e){var n=q;return function(){var r=wt(),i=q;try{return Le(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Le(i,!1),r&&kt()}}}var _e={awaits:0,echoes:0,id:0},ss=0,Ht=[],zn=0,$t=0,as=0;function Ue(t,e,n,r){var i=q,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++as;var a=it.env;s.env=xn?{Promise:G,PromiseProp:{value:G,configurable:!0,writable:!0},all:G.all,race:G.race,allSettled:G.allSettled,any:G.any,resolve:G.resolve,reject:G.reject,nthen:Mr(a.nthen,s),gthen:Mr(a.gthen,s)}:{},e&&ve(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=at(s,t,n,r);return s.ref===0&&s.finalize(),u}function st(){return _e.id||(_e.id=++ss),++_e.awaits,_e.echoes+=Ir,_e.id}function Fe(){return _e.awaits?(--_e.awaits===0&&(_e.id=0),_e.echoes=_e.awaits*Ir,!0):!1}(""+Rr).indexOf("[native code]")===-1&&(st=Fe=se);function Gt(t){return _e.echoes&&t&&t.constructor===jt?(st(),t.then(e=>(Fe(),e),e=>(Fe(),pe(e)))):t}function os(t){++$t,(!_e.echoes||--_e.echoes===0)&&(_e.echoes=_e.id=0),Ht.push(q),Le(t,!0)}function us(){var t=Ht[Ht.length-1];Ht.pop(),Le(t,!1)}function Le(t,e){var n=q;if((e?_e.echoes&&(!zn++||t!==q):zn&&(!--zn||t!==q))&&Br(e?os.bind(null,t):us),t!==q&&(q=t,n===it&&(it.env=Fr()),xn)){var r=it.env.Promise,i=t.env;Nt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(oe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Fr(){var t=oe.Promise;return xn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(oe,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Nt.then,gthen:t.prototype.then}:{}}function at(t,e,n,r,i){var s=q;try{return Le(t,!0),e(n,r,i)}finally{Le(s,!1)}}function Br(t){Rr.call(wn,t)}function Qt(t,e,n,r){return typeof t!="function"?t:function(){var i=q;n&&st(),Le(e,!0);try{return t.apply(this,arguments)}finally{Le(i,!1),r&&Br(Fe)}}}function Mr(t,e){return function(n,r){return t.call(this,Qt(n,e),Qt(r,e))}}var Kr="unhandledrejection";function Nr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(oe.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Kr,!0,!0),ve(r,i)):oe.CustomEvent&&(r=new CustomEvent(Kr,{detail:i}),ve(r,i)),r&&oe.dispatchEvent&&(dispatchEvent(r),!oe.PromiseRejectionEvent&&oe.onunhandledrejection))try{oe.onunhandledrejection(r)}catch{}Ie&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var pe=G.reject;function jr(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!q.letThrough&&!t._vip){if(t._state.openComplete)return pe(new te.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return pe(new te.DatabaseClosed);t.open().catch(se)}return t._state.dbReadyPromise.then(()=>jr(t,e,n,r))}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create()}catch(s){return pe(s)}return i._promise(e,(s,a)=>Ue(()=>(q.trans=i,r(s,a,i)))).then(s=>i._completion.then(()=>s))}}var Ur="3.2.0",Xe=String.fromCharCode(65535),Pn=-1/0,Be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Lr="String expected.",xt=[],Yt=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ls=Yt,cs=Yt,Wr=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Xt="__dbnames",On="readonly",Fn="readwrite";function qe(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Zr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function qt(t){return typeof t=="string"&&!/\./.test(t)?e=>(e[t]===void 0&&t in e&&(e=mt(e),delete e[t]),e):e=>e}var Vr=class{_trans(e,n,r){let i=this._tx||q.trans,s=this.name;function a(m,p,_){if(!_.schema[s])throw new te.NotFound("Table "+s+" not part of transaction");return n(_.idbtrans,_)}let u=wt();try{return i&&i.db===this.db?i===q.trans?i._promise(e,a,r):Ue(()=>i._promise(e,a,r),{trans:i,transless:q.transless||q}):jr(this.db,e,[this.name],a)}finally{u&&kt()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ye(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);let n=he(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);let r=this.schema.indexes.concat(this.schema.primKey).filter(p=>p.compound&&n.every(_=>p.keyPath.indexOf(_)>=0)&&p.keyPath.every(_=>n.indexOf(_)>=0))[0];if(r&&this.db._maxKey!==Xe)return this.where(r.name).equals(r.keyPath.map(p=>e[p]));!r&&Ie&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function a(p,_){try{return s.cmp(p,_)===0}catch{return!1}}let[u,m]=n.reduce(([p,_],l)=>{let d=i[l],g=e[l];return[p||d,p||!d?qe(_,d&&d.multi?c=>{let h=Pe(c,l);return ye(h)&&h.some(y=>a(g,y))}:c=>a(g,Pe(c,l))):_]},[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(m):r?this.filter(m):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ye(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;let n=r=>{if(!r)return r;let i=Object.create(e.prototype);for(var s in r)if(xe(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){function e(n){ve(this,n)}return this.mapToClass(e)}add(e,n){let{auto:r,keyPath:i}=this.schema.primKey,s=e;return i&&r&&(s=qt(i)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[s]})).then(a=>a.numFailures?G.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Ee(e,i,a)}catch{}return a})}update(e,n){if(typeof e=="object"&&!ye(e)){let r=Pe(e,this.schema.primKey.keyPath);if(r===void 0)return pe(new te.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?he(n).forEach(i=>{Ee(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)}put(e,n){let{auto:r,keyPath:i}=this.schema.primKey,s=e;return i&&r&&(s=qt(i)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[s],keys:n!=null?[n]:null})).then(a=>a.numFailures?G.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Ee(e,i,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?G.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Zr})).then(e=>e.numFailures?G.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let s=r?r.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:u,keyPath:m}=this.schema.primKey;if(m&&i)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");let p=e.length,_=m&&u?e.map(qt(m)):e;return this.core.mutate({trans:a,type:"add",keys:i,values:_,wantResults:s}).then(({numFailures:l,results:d,lastResult:g,failures:c})=>{let h=s?d:g;if(l===0)return h;throw new gt(`${this.name}.bulkAdd(): ${l} of ${p} operations failed`,c)})})}bulkPut(e,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let s=r?r.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:u,keyPath:m}=this.schema.primKey;if(m&&i)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");let p=e.length,_=m&&u?e.map(qt(m)):e;return this.core.mutate({trans:a,type:"put",keys:i,values:_,wantResults:s}).then(({numFailures:l,results:d,lastResult:g,failures:c})=>{let h=s?d:g;if(l===0)return h;throw new gt(`${this.name}.bulkPut(): ${l} of ${p} operations failed`,c)})})}bulkDelete(e){let n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new gt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}};function St(t){var e={},n=function(u,m){if(m){for(var p=arguments.length,_=new Array(p-1);--p;)_[p-1]=arguments[p];return e[u].subscribe.apply(null,_),t}else if(typeof u=="string")return e[u]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(u,m,p){if(typeof u=="object")return a(u);m||(m=Xi),p||(p=se);var _={subscribers:[],fire:p,subscribe:function(l){_.subscribers.indexOf(l)===-1&&(_.subscribers.push(l),_.fire=m(_.fire,l))},unsubscribe:function(l){_.subscribers=_.subscribers.filter(function(d){return d!==l}),_.fire=_.subscribers.reduce(m,p)}};return e[u]=n[u]=_,_}function a(u){he(u).forEach(function(m){var p=u[m];if(ye(p))s(m,u[m][0],u[m][1]);else if(p==="asap")var _=s(m,yt,function(){for(var d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];_.subscribers.forEach(function(c){_r(function(){c.apply(null,g)})})});else throw new te.InvalidArgument("Invalid event config")})}}function Et(t,e){return tt(e).from({prototype:t}),e}function fs(t){return Et(Vr.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:St(null,{creating:[Gi,se],reading:[$i,yt],updating:[Yi,se],deleting:[Qi,se]})})}function ot(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Bn(t,e){t.filter=qe(t.filter,e)}function Mn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>qe(r(),e()):e,t.justLimit=n&&!r}function hs(t,e){t.isMatch=qe(t.isMatch,e)}function Jt(t,e){if(t.isPrimKey)return e.primaryKey;let n=e.getIndexByKeyPath(t.index);if(!n)throw new te.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Hr(t,e,n){let r=Jt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function en(t,e,n,r){let i=t.replayFilter?qe(t.filter,t.replayFilter()):t.filter;if(t.or){let s={},a=(u,m,p)=>{if(!i||i(m,p,d=>m.stop(d),d=>m.fail(d))){var _=m.primaryKey,l=""+_;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(_)),xe(s,l)||(s[l]=!0,e(u,m,p))}};return Promise.all([t.or._iterate(a,n),$r(Hr(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}else return $r(Hr(t,r,n),qe(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function $r(t,e,n,r){var i=r?(a,u,m)=>n(r(a),u,m):n,s=ue(i);return t.then(a=>{if(a)return a.start(()=>{var u=()=>a.continue();(!e||e(a,m=>u=m,m=>{a.stop(m),u=se},m=>{a.fail(m),u=se}))&&s(a.value,a,m=>u=m),u()})})}function be(t,e){try{let n=Gr(t),r=Gr(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return ps(Qr(t),Qr(e));case"Array":return ds(t,e)}}catch{}return NaN}function ds(t,e){let n=t.length,r=e.length,i=n<r?n:r;for(let s=0;s<i;++s){let a=be(t[s],e[s]);if(a!==0)return a}return n===r?0:n<r?-1:1}function ps(t,e){let n=t.length,r=e.length,i=n<r?n:r;for(let s=0;s<i;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===r?0:n<r?-1:1}function Gr(t){let e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";let n=mn(t);return n==="ArrayBuffer"?"binary":n}function Qr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Yr=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,pe.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,pe.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=qe(n.algorithm,e)}_iterate(e,n){return en(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ve(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>en(n,e,r,n.table.core))}count(e){return this._read(n=>{let r=this._ctx,i=r.table.core;if(ot(r,!0))return i.count({trans:n,query:{index:Jt(r,i.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var s=0;return en(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){let r=e.split(".").reverse(),i=r[0],s=r.length-1;function a(p,_){return _?a(p[r[_]],_-1):p[i]}var u=this._ctx.dir==="next"?1:-1;function m(p,_){var l=a(p,s),d=a(_,s);return l<d?-u:l>d?u:0}return this.toArray(function(p){return p.sort(m)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ot(r,!0)&&r.limit>0){let{valueMapper:i}=r,s=Jt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:a})=>i?a.map(i):a)}else{let i=[];return en(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0?this:(n.offset+=e,ot(n)?Mn(n,()=>{var r=e;return(i,s)=>r===0?!0:r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1)}):Mn(n,()=>{var r=e;return()=>--r<0}),this)}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Mn(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return Bn(this._ctx,function(r,i,s){return e(r.value)?(i(s),n):!0}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){return Bn(this._ctx,function(n){return e(n.value)}),hs(this._ctx,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&ot(n,!0)&&n.limit>0)return this._read(i=>{var s=Jt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Bn(this._ctx,function(i){var s=i.primaryKey.toString(),a=xe(r,s);return r[s]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=he(e),a=s.length;i=function(h){for(var y=!1,v=0;v<a;++v){var E=s[v],x=e[E];Pe(h,E)!==x&&(Ee(h,E,x),y=!0)}return y}}let u=n.table.core,{outbound:m,extractKey:p}=u.schema.primaryKey,_=this.db._options.modifyChunkSize||200,l=[],d=0,g=[],c=(h,y)=>{let{failures:v,numFailures:E}=y;d+=h-E;for(let x of he(v))l.push(v[x])};return this.clone().primaryKeys().then(h=>{let y=v=>{let E=Math.min(_,h.length-v);return u.getMany({trans:r,keys:h.slice(v,v+E),cache:"immutable"}).then(x=>{let S=[],A=[],D=m?[]:null,C=[];for(let L=0;L<E;++L){let k=x[L],R={value:mt(k),primKey:h[v+L]};i.call(R,R.value,R)!==!1&&(R.value==null?C.push(h[v+L]):!m&&be(p(k),p(R.value))!==0?(C.push(h[v+L]),S.push(R.value)):(A.push(R.value),m&&D.push(h[v+L])))}let F=ot(n)&&n.limit===1/0&&(typeof e!="function"||e===Kn)&&{index:n.index,range:n.range};return Promise.resolve(S.length>0&&u.mutate({trans:r,type:"add",values:S}).then(L=>{for(let k in L.failures)C.splice(parseInt(k),1);c(S.length,L)})).then(()=>(A.length>0||F&&typeof e=="object")&&u.mutate({trans:r,type:"put",keys:D,values:A,criteria:F,changeSpec:typeof e!="function"&&e}).then(L=>c(A.length,L))).then(()=>(C.length>0||F&&e===Kn)&&u.mutate({trans:r,type:"delete",keys:C,criteria:F}).then(L=>c(C.length,L))).then(()=>h.length>v+E&&y(v+_))})};return y(0).then(()=>{if(l.length>0)throw new Mt("Error modifying one or more objects",l,d,g);return h.length})})})}delete(){var e=this._ctx,n=e.range;return ot(e)&&(e.isPrimKey&&!cs||n.type===3)?this._write(r=>{let{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(a=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:u,lastResult:m,results:p,numFailures:_})=>{if(_)throw new Mt("Could not delete some values",Object.keys(u).map(l=>u[l]),a-_);return a-_}))}):this.modify(Kn)}},Kn=(t,e)=>e.value=null;function ms(t){return Et(Yr.prototype,function(n,r){this.db=t;let i=Zr,s=null;if(r)try{i=r()}catch(p){s=p}let a=n._ctx,u=a.table,m=u.hook.reading.fire;this._ctx={table:u,index:a.index,isPrimKey:!a.index||u.schema.primKey.keyPath&&a.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:a.or,valueMapper:m!==yt?m:null}})}function gs(t,e){return t<e?-1:t===e?0:1}function ys(t,e){return t>e?-1:t===e?0:1}function we(t,e,n){var r=t instanceof Nn?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function ut(t){return new t.Collection(t,()=>Xr("")).limit(0)}function _s(t){return t==="next"?e=>e.toUpperCase():e=>e.toLowerCase()}function vs(t){return t==="next"?e=>e.toLowerCase():e=>e.toUpperCase()}function bs(t,e,n,r,i,s){for(var a=Math.min(t.length,r.length),u=-1,m=0;m<a;++m){var p=e[m];if(p!==r[m])return i(t[m],n[m])<0?t.substr(0,m)+n[m]+n.substr(m+1):i(t[m],r[m])<0?t.substr(0,m)+r[m]+n.substr(m+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;i(t[m],p)<0&&(u=m)}return a<r.length&&s==="next"?t+n.substr(t.length):a<t.length&&s==="prev"?t.substr(0,n.length):u<0?null:t.substr(0,u)+r[u]+n.substr(u+1)}function tn(t,e,n,r){var i,s,a,u,m,p,_,l=n.length;if(!n.every(h=>typeof h=="string"))return we(t,Lr);function d(h){i=_s(h),s=vs(h),a=h==="next"?gs:ys;var y=n.map(function(v){return{lower:s(v),upper:i(v)}}).sort(function(v,E){return a(v.lower,E.lower)});u=y.map(function(v){return v.upper}),m=y.map(function(v){return v.lower}),p=h,_=h==="next"?"":r}d("next");var g=new t.Collection(t,()=>We(u[0],m[l-1]+r));g._ondirectionchange=function(h){d(h)};var c=0;return g._addAlgorithm(function(h,y,v){var E=h.key;if(typeof E!="string")return!1;var x=s(E);if(e(x,m,c))return!0;for(var S=null,A=c;A<l;++A){var D=bs(E,x,u[A],m[A],a,p);D===null&&S===null?c=A+1:(S===null||a(S,D)>0)&&(S=D)}return y(S!==null?function(){h.continue(S+_)}:v),!1}),g}function We(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Xr(t){return{type:1,lower:t,upper:t}}var Nn=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?ut(this):new this.Collection(this,()=>We(e,n,!r,!i))}catch{return we(this,Be)}}equals(e){return e==null?we(this,Be):new this.Collection(this,()=>Xr(e))}above(e){return e==null?we(this,Be):new this.Collection(this,()=>We(e,void 0,!0))}aboveOrEqual(e){return e==null?we(this,Be):new this.Collection(this,()=>We(e,void 0,!1))}below(e){return e==null?we(this,Be):new this.Collection(this,()=>We(void 0,e,!1,!0))}belowOrEqual(e){return e==null?we(this,Be):new this.Collection(this,()=>We(void 0,e))}startsWith(e){return typeof e!="string"?we(this,Lr):this.between(e,e+Xe,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):tn(this,(n,r)=>n.indexOf(r[0])===0,[e],Xe)}equalsIgnoreCase(e){return tn(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Oe.apply(nt,arguments);return e.length===0?ut(this):tn(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Oe.apply(nt,arguments);return e.length===0?ut(this):tn(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,Xe)}anyOf(){let e=Oe.apply(nt,arguments),n=this._cmp;try{e.sort(n)}catch{return we(this,Be)}if(e.length===0)return ut(this);let r=new this.Collection(this,()=>We(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,a,u)=>{let m=s.key;for(;n(m,e[i])>0;)if(++i,i===e.length)return a(u),!1;return n(m,e[i])===0?!0:(a(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[Pn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let e=Oe.apply(nt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return we(this,Be)}let n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Pn,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){let r=this._cmp,i=this._ascending,s=this._descending,a=this._min,u=this._max;if(e.length===0)return ut(this);if(!e.every(S=>S[0]!==void 0&&S[1]!==void 0&&i(S[0],S[1])<=0))return we(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);let m=!n||n.includeLowers!==!1,p=n&&n.includeUppers===!0;function _(S,A){let D=0,C=S.length;for(;D<C;++D){let F=S[D];if(r(A[0],F[1])<0&&r(A[1],F[0])>0){F[0]=a(F[0],A[0]),F[1]=u(F[1],A[1]);break}}return D===C&&S.push(A),S}let l=i;function d(S,A){return l(S[0],A[0])}let g;try{g=e.reduce(_,[]),g.sort(d)}catch{return we(this,Be)}let c=0,h=p?S=>i(S,g[c][1])>0:S=>i(S,g[c][1])>=0,y=m?S=>s(S,g[c][0])>0:S=>s(S,g[c][0])>=0;function v(S){return!h(S)&&!y(S)}let E=h,x=new this.Collection(this,()=>We(g[0][0],g[g.length-1][1],!m,!p));return x._ondirectionchange=S=>{S==="next"?(E=h,l=i):(E=y,l=s),g.sort(d)},x._addAlgorithm((S,A,D)=>{for(var C=S.key;E(C);)if(++c,c===g.length)return A(D),!1;return v(C)?!0:(this._cmp(C,g[c][1])===0||this._cmp(C,g[c][0])===0||A(()=>{l===i?S.continue(g[c][0]):S.continue(g[c][1])}),!1)}),x}startsWithAnyOf(){let e=Oe.apply(nt,arguments);return e.every(n=>typeof n=="string")?e.length===0?ut(this):this.inAnyRange(e.map(n=>[n,n+Xe])):we(this,"startsWithAnyOf() only works with strings")}};function ws(t){return Et(Nn.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};let s=t._deps.indexedDB;if(!s)throw new te.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(a,u)=>s.cmp(u,a),this._max=(a,u)=>s.cmp(a,u)>0?a:u,this._min=(a,u)=>s.cmp(a,u)<0?a:u,this._IDBKeyRange=t._deps.IDBKeyRange})}function Re(t){return ue(function(e){return Ct(e),t(e.target.error),!1})}function Ct(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var At="storagemutated",Ze="x-storagemutated-1",Ve=St(null,At),qr=class{_lock(){return pt(!q.global),++this._reculock,this._reculock===1&&!q.global&&(q.lockOwnerFor=this),this}_unlock(){if(pt(!q.global),--this._reculock===0)for(q.global||(q.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{at(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&q.lockOwnerFor!==this}create(e){if(!this.mode)return this;let n=this.db.idbdb,r=this.db._state.dbOpenError;if(pt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new te.DatabaseClosed(r);case"MissingAPIError":throw new te.MissingAPI(r.message,r);default:throw new te.OpenFailed(r)}if(!this.active)throw new te.TransactionInactive;return pt(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=ue(i=>{Ct(i),this._reject(e.error)}),e.onabort=ue(i=>{Ct(i),this.active&&this._reject(new te.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=ue(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Ve.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return pe(new te.ReadOnly("Transaction is readonly"));if(!this.active)return pe(new te.TransactionInactive);if(this._locked())return new G((s,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,a)},q])});if(r)return Ue(()=>{var s=new G((a,u)=>{this._lock();let m=n(a,u,this);m&&m.then&&m.then(a,u)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new G((s,a)=>{var u=n(s,a,this);u&&u.then&&u.then(s,a)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();let r=G.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new G((a,u)=>{r.then(m=>n._waitingQueue.push(ue(a.bind(null,m))),m=>n._waitingQueue.push(ue(u.bind(null,m)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new te.Abort))}table(e){let n=this._memoizedTables||(this._memoizedTables={});if(xe(n,e))return n[e];let r=this.schema[e];if(!r)throw new te.NotFound("Table "+e+" not part of transaction");let i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}};function ks(t){return Et(qr.prototype,function(n,r,i,s,a){this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=St(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new G((u,m)=>{this._resolve=u,this._reject=m}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},u=>{var m=this.active;return this.active=!1,this.on.error.fire(u),this.parent?this.parent._reject(u):m&&this.idbtrans&&this.idbtrans.abort(),pe(u)})})}function jn(t,e,n,r,i,s,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Jr(e)}}function Jr(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ei(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:vr(n,r=>[r.name,r])}}function xs(t){return t.length===1?t[0]:t}var It=t=>{try{return t.only([[]]),It=()=>[[]],[[]]}catch{return It=()=>Xe,Xe}};function Un(t){return t==null?()=>{}:typeof t=="string"?Ss(t):e=>Pe(e,t)}function Ss(t){return t.split(".").length===1?n=>n[t]:n=>Pe(n,t)}function ti(t){return[].slice.call(t)}var Es=0;function Rt(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Cs(t,e,n){function r(_,l){let d=ti(_.objectStoreNames);return{schema:{name:_.name,tables:d.map(g=>l.objectStore(g)).map(g=>{let{keyPath:c,autoIncrement:h}=g,y=ye(c),v=c==null,E={},x={name:g.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v,compound:y,keyPath:c,autoIncrement:h,unique:!0,extractKey:Un(c)},indexes:ti(g.indexNames).map(S=>g.index(S)).map(S=>{let{name:A,unique:D,multiEntry:C,keyPath:F}=S,L=ye(F),k={name:A,compound:L,keyPath:F,unique:D,multiEntry:C,extractKey:Un(F)};return E[Rt(F)]=k,k}),getIndexByKeyPath:S=>E[Rt(S)]};return E[":id"]=x.primaryKey,c!=null&&(E[Rt(c)]=x.primaryKey),x})},hasGetAll:d.length>0&&"getAll"in l.objectStore(d[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:l,upper:d,lowerOpen:g,upperOpen:c}=_;return l===void 0?d===void 0?null:e.upperBound(d,!!c):d===void 0?e.lowerBound(l,!!g):e.bound(l,d,!!g,!!c)}function s(_){let l=_.name;function d({trans:h,type:y,keys:v,values:E,range:x}){return new Promise((S,A)=>{S=ue(S);let D=h.objectStore(l),C=D.keyPath==null,F=y==="put"||y==="add";if(!F&&y!=="delete"&&y!=="deleteRange")throw new Error("Invalid operation type: "+y);let{length:L}=v||E||{length:1};if(v&&E&&v.length!==E.length)throw new Error("Given keys array must have same length as given values array.");if(L===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let k,R=[],f=[],z=0,Y=J=>{++z,Ct(J)};if(y==="deleteRange"){if(x.type===4)return S({numFailures:z,failures:f,results:[],lastResult:void 0});x.type===3?R.push(k=D.clear()):R.push(k=D.delete(i(x)))}else{let[J,j]=F?C?[E,v]:[E,null]:[v,null];if(F)for(let Q=0;Q<L;++Q)R.push(k=j&&j[Q]!==void 0?D[y](J[Q],j[Q]):D[y](J[Q])),k.onerror=Y;else for(let Q=0;Q<L;++Q)R.push(k=D[y](J[Q])),k.onerror=Y}let K=J=>{let j=J.target.result;R.forEach((Q,O)=>Q.error!=null&&(f[O]=Q.error)),S({numFailures:z,failures:f,results:y==="delete"?v:R.map(Q=>Q.result),lastResult:j})};k.onerror=J=>{Y(J),K(J)},k.onsuccess=K})}function g({trans:h,values:y,query:v,reverse:E,unique:x}){return new Promise((S,A)=>{S=ue(S);let{index:D,range:C}=v,F=h.objectStore(l),L=D.isPrimaryKey?F:F.index(D.name),k=E?x?"prevunique":"prev":x?"nextunique":"next",R=y||!("openKeyCursor"in L)?L.openCursor(i(C),k):L.openKeyCursor(i(C),k);R.onerror=Re(A),R.onsuccess=ue(f=>{let z=R.result;if(!z){S(null);return}z.___id=++Es,z.done=!1;let Y=z.continue.bind(z),K=z.continuePrimaryKey;K&&(K=K.bind(z));let J=z.advance.bind(z),j=()=>{throw new Error("Cursor not started")},Q=()=>{throw new Error("Cursor not stopped")};z.trans=h,z.stop=z.continue=z.continuePrimaryKey=z.advance=j,z.fail=ue(A),z.next=function(){let O=1;return this.start(()=>O--?this.continue():this.stop()).then(()=>this)},z.start=O=>{let P=new Promise((H,V)=>{H=ue(H),R.onerror=Re(V),z.fail=V,z.stop=le=>{z.stop=z.continue=z.continuePrimaryKey=z.advance=Q,H(le)}}),X=()=>{if(R.result)try{O()}catch(H){z.fail(H)}else z.done=!0,z.start=()=>{throw new Error("Cursor behind last entry")},z.stop()};return R.onsuccess=ue(H=>{R.onsuccess=X,X()}),z.continue=Y,z.continuePrimaryKey=K,z.advance=J,X(),P},S(z)},A)})}function c(h){return y=>new Promise((v,E)=>{v=ue(v);let{trans:x,values:S,limit:A,query:D}=y,C=A===1/0?void 0:A,{index:F,range:L}=D,k=x.objectStore(l),R=F.isPrimaryKey?k:k.index(F.name),f=i(L);if(A===0)return v({result:[]});if(h){let z=S?R.getAll(f,C):R.getAllKeys(f,C);z.onsuccess=Y=>v({result:Y.target.result}),z.onerror=Re(E)}else{let z=0,Y=S||!("openKeyCursor"in R)?R.openCursor(f):R.openKeyCursor(f),K=[];Y.onsuccess=J=>{let j=Y.result;if(!j)return v({result:K});if(K.push(S?j.value:j.primaryKey),++z===A)return v({result:K});j.continue()},Y.onerror=Re(E)}})}return{name:l,schema:_,mutate:d,getMany({trans:h,keys:y}){return new Promise((v,E)=>{v=ue(v);let x=h.objectStore(l),S=y.length,A=new Array(S),D=0,C=0,F,L=R=>{let f=R.target;(A[f._pos]=f.result)!=null,++C===D&&v(A)},k=Re(E);for(let R=0;R<S;++R)y[R]!=null&&(F=x.get(y[R]),F._pos=R,F.onsuccess=L,F.onerror=k,++D);D===0&&v(A)})},get({trans:h,key:y}){return new Promise((v,E)=>{v=ue(v);let S=h.objectStore(l).get(y);S.onsuccess=A=>v(A.target.result),S.onerror=Re(E)})},query:c(u),openCursor:g,count({query:h,trans:y}){let{index:v,range:E}=h;return new Promise((x,S)=>{let A=y.objectStore(l),D=v.isPrimaryKey?A:A.index(v.name),C=i(E),F=C?D.count(C):D.count();F.onsuccess=ue(L=>x(L.target.result)),F.onerror=Re(S)})}}}let{schema:a,hasGetAll:u}=r(t,n),m=a.tables.map(_=>s(_)),p={};return m.forEach(_=>p[_.name]=_),{stack:"dbcore",transaction:t.transaction.bind(t),table(_){if(!p[_])throw new Error(`Table '${_}' not found`);return p[_]},MIN_KEY:-1/0,MAX_KEY:It(e),schema:a}}function As(t,e){return e.reduce((n,{create:r})=>({...n,...r(n)}),t)}function Is(t,e,{IDBKeyRange:n,indexedDB:r},i){return{dbcore:As(Cs(e,n,i),t.dbcore)}}function Ln({_novip:t},e){let n=e.db,r=Is(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{let s=i.name;t.core.schema.tables.some(a=>a.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function nn({_novip:t},e,n,r){n.forEach(i=>{let s=r[i];e.forEach(a=>{let u=dn(a,i);(!u||"value"in u&&u.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?ze(a,i,{get(){return this.table(i)},set(m){gr(this,i,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):a[i]=new t.Table(i,s))})})}function Wn({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Rs(t,e){return t._cfg.version-e._cfg.version}function Ts(t,e,n,r){let i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);let a=s._reject.bind(s),u=q.transless||q;Ue(()=>{q.trans=s,q.transless=u,e===0?(he(i).forEach(m=>{Zn(n,m,i[m].primKey,i[m].indexes)}),Ln(t,n),G.follow(()=>t.on.populate.fire(s)).catch(a)):Ds(t,e,s,n).catch(a)})}function Ds({_novip:t},e,n,r){let i=[],s=t._versions,a=t._dbSchema=Hn(t,t.idbdb,r),u=!1;s.filter(_=>_._cfg.version>=e).forEach(_=>{i.push(()=>{let l=a,d=_._cfg.dbschema;$n(t,l,r),$n(t,d,r),a=t._dbSchema=d;let g=ni(l,d);g.add.forEach(h=>{Zn(r,h[0],h[1].primKey,h[1].indexes)}),g.change.forEach(h=>{if(h.recreate)throw new te.Upgrade("Not yet support for changing primary key");{let y=r.objectStore(h.name);h.add.forEach(v=>Vn(y,v)),h.change.forEach(v=>{y.deleteIndex(v.name),Vn(y,v)}),h.del.forEach(v=>y.deleteIndex(v))}});let c=_._cfg.contentUpgrade;if(c&&_._cfg.version>e){Ln(t,r),n._memoizedTables={},u=!0;let h=br(d);g.del.forEach(x=>{h[x]=l[x]}),Wn(t,[t.Transaction.prototype]),nn(t,[t.Transaction.prototype],he(h),h),n.schema=h;let y=yn(c);y&&st();let v,E=G.follow(()=>{if(v=c(n),v&&y){var x=Fe.bind(null,null);v.then(x,x)}});return v&&typeof v.then=="function"?G.resolve(v):E.then(()=>v)}}),i.push(l=>{if(!u||!ls){let d=_._cfg.dbschema;Ps(d,l)}Wn(t,[t.Transaction.prototype]),nn(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema})});function p(){return i.length?G.resolve(i.shift()(n.idbtrans)).then(p):G.resolve()}return p().then(()=>{zs(a,r)})}function ni(t,e){let n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){let i=t[r],s=e[r];if(!i)n.add.push([r,s]);else{let a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Yt)a.recreate=!0,n.change.push(a);else{let u=i.idxByName,m=s.idxByName,p;for(p in u)m[p]||a.del.push(p);for(p in m){let _=u[p],l=m[p];_?_.src!==l.src&&a.change.push(l):a.add.push(l)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function Zn(t,e,n,r){let i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>Vn(i,s)),i}function zs(t,e){he(t).forEach(n=>{e.db.objectStoreNames.contains(n)||Zn(e,n,t[n].primKey,t[n].indexes)})}function Ps(t,e){[].slice.call(e.db.objectStoreNames).forEach(n=>t[n]==null&&e.db.deleteObjectStore(n))}function Vn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Hn(t,e,n){let r={};return Bt(e.objectStoreNames,0).forEach(s=>{let a=n.objectStore(s),u=a.keyPath,m=jn(Jr(u),u||"",!1,!1,!!a.autoIncrement,u&&typeof u!="string",!0),p=[];for(let l=0;l<a.indexNames.length;++l){let d=a.index(a.indexNames[l]);u=d.keyPath;var _=jn(d.name,u,!!d.unique,!!d.multiEntry,!1,u&&typeof u!="string",!1);p.push(_)}r[s]=ei(s,m,p)}),r}function Os({_novip:t},e,n){t.verno=e.version/10;let r=t._dbSchema=Hn(t,e,n);t._storeNames=Bt(e.objectStoreNames,0),nn(t,[t._allTables],he(r),r)}function Fs(t,e){let n=Hn(t,t.idbdb,e),r=ni(n,t._dbSchema);return!(r.add.length||r.change.some(i=>i.add.length||i.change.length))}function $n({_novip:t},e,n){let r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){let s=r[i],a=n.objectStore(s);t._hasGetAll="getAll"in a;for(let u=0;u<a.indexNames.length;++u){let m=a.indexNames[u],p=a.index(m).keyPath,_=typeof p=="string"?p:"["+Bt(p).join("+")+"]";if(e[s]){let l=e[s].idxByName[_];l&&(l.name=m,delete e[s].idxByName[_],e[s].idxByName[m]=l)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&oe.WorkerGlobalScope&&oe instanceof oe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Bs(t){return t.split(",").map((e,n)=>{e=e.trim();let r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return jn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),ye(i),n===0)})}var ri=class{_parseStoresSpec(e,n){he(e).forEach(r=>{if(e[r]!==null){var i=Bs(e[r]),s=i.shift();if(s.multi)throw new te.Schema("Primary key cannot be multi-valued");i.forEach(a=>{if(a.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string")}),n[r]=ei(r,s,i)}})}stores(e){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?ve(this._cfg.storesSource,e):e;let r=n._versions,i={},s={};return r.forEach(a=>{ve(i,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(i,s)}),n._dbSchema=s,Wn(n,[n._allTables,n,n.Transaction.prototype]),nn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],he(s),s),n._storeNames=he(s),this}upgrade(e){return this._cfg.contentUpgrade=bn(this._cfg.contentUpgrade||se,e),this}};function Ms(t){return Et(ri.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Gn(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Ke(Xt,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Qn(t){return t&&typeof t.databases=="function"}function Ks({indexedDB:t,IDBKeyRange:e}){return Qn(t)?Promise.resolve(t.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==Xt)):Gn(t,e).toCollection().primaryKeys()}function Ns({indexedDB:t,IDBKeyRange:e},n){!Qn(t)&&n!==Xt&&Gn(t,e).put({name:n}).catch(se)}function js({indexedDB:t,IDBKeyRange:e},n){!Qn(t)&&n!==Xt&&Gn(t,e).delete(n).catch(se)}function Yn(t){return Ue(function(){return q.letThrough=!0,t()})}function Us(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function Ls(t){let e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?pe(e.dbOpenError):t);Ie&&(e.openCanceller._stackHolder=$e()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;let r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new te.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,a=null,u=!1;return G.race([r,(typeof navigator=="undefined"?G.resolve():Us()).then(()=>new G((m,p)=>{if(i(),!n)throw new te.MissingAPI;let _=t.name,l=e.autoSchema?n.open(_):n.open(_,Math.round(t.verno*10));if(!l)throw new te.MissingAPI;l.onerror=Re(p),l.onblocked=ue(t._fireOnBlocked),l.onupgradeneeded=ue(d=>{if(a=l.transaction,e.autoSchema&&!t._options.allowEmptyDB){l.onerror=Ct,a.abort(),l.result.close();let c=n.deleteDatabase(_);c.onsuccess=c.onerror=ue(()=>{p(new te.NoSuchDatabase(`Database ${_} doesnt exist`))})}else{a.onerror=Re(p);var g=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;u=g<1,t._novip.idbdb=l.result,Ts(t,g/10,a,p)}},p),l.onsuccess=ue(()=>{a=null;let d=t._novip.idbdb=l.result,g=Bt(d.objectStoreNames);if(g.length>0)try{let c=d.transaction(xs(g),"readonly");e.autoSchema?Os(t,d,c):($n(t,t._dbSchema,c),Fs(t,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ln(t,c)}catch{}xt.push(t),d.onversionchange=ue(c=>{e.vcFired=!0,t.on("versionchange").fire(c)}),d.onclose=ue(c=>{t.on("close").fire(c)}),u&&Ns(t._deps,_),m()},p)}))]).then(()=>(i(),e.onReadyBeingFired=[],G.resolve(Yn(()=>t.on.ready.fire(t.vip))).then(function m(){if(e.onReadyBeingFired.length>0){let p=e.onReadyBeingFired.reduce(bn,se);return e.onReadyBeingFired=[],G.resolve(Yn(()=>p(t.vip))).then(m)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(m=>{e.dbOpenError=m;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),pe(m)}).finally(()=>{e.openComplete=!0,s()})}function Xn(t){var e=a=>t.next(a),n=a=>t.throw(a),r=s(e),i=s(n);function s(a){return u=>{var m=a(u),p=m.value;return m.done?p:!p||typeof p.then!="function"?ye(p)?Promise.all(p).then(r,i):r(p):p.then(r,i)}}return s(e)()}function Ws(t,e,n){var r=arguments.length;if(r<2)throw new te.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=wr(i);return[t,s,n]}function Zs(t,e,n,r,i){return G.resolve().then(()=>{let s=q.transless||q,a=t._createTransaction(e,n,t._dbSchema,r),u={trans:a,transless:s};r?a.idbtrans=r.idbtrans:a.create();let m=yn(i);m&&st();let p,_=G.follow(()=>{if(p=i.call(a,a),p)if(m){var l=Fe.bind(null,null);p.then(l,l)}else typeof p.next=="function"&&typeof p.throw=="function"&&(p=Xn(p))},u);return(p&&typeof p.then=="function"?G.resolve(p).then(l=>a.active?l:pe(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):_.then(()=>p)).then(l=>(r&&a._resolve(),a._completion.then(()=>l))).catch(l=>(a._reject(l),pe(l)))})}function rn(t,e,n){let r=ye(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}function Vs(t){return{...t,table(e){let n=t.table(e),{schema:r}=n,i={},s=[];function a(d,g,c){let h=Rt(d),y=i[h]=i[h]||[],v=d==null?0:typeof d=="string"?1:d.length,E=g>0,x={...c,isVirtual:E,keyTail:g,keyLength:v,extractKey:Un(d),unique:!E&&c.unique};if(y.push(x),x.isPrimaryKey||s.push(x),v>1){let S=v===2?d[0]:d.slice(0,v-1);a(S,g+1,c)}return y.sort((S,A)=>S.keyTail-A.keyTail),x}let u=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(let d of r.indexes)a(d.keyPath,0,d);function m(d){let g=i[Rt(d)];return g&&g[0]}function p(d,g){return{type:d.type===1?2:d.type,lower:rn(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:rn(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0}}function _(d){let g=d.query.index;return g.isVirtual?{...d,query:{index:g,range:p(d.query.range,g.keyTail)}}:d}return{...n,schema:{...r,primaryKey:u,indexes:s,getIndexByKeyPath:m},count(d){return n.count(_(d))},query(d){return n.query(_(d))},openCursor(d){let{keyTail:g,isVirtual:c,keyLength:h}=d.query.index;if(!c)return n.openCursor(d);function y(v){function E(S){S!=null?v.continue(rn(S,d.reverse?t.MAX_KEY:t.MIN_KEY,g)):d.unique?v.continue(v.key.slice(0,h).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,g)):v.continue()}return Object.create(v,{continue:{value:E},continuePrimaryKey:{value(S,A){v.continuePrimaryKey(rn(S,t.MAX_KEY,g),A)}},primaryKey:{get(){return v.primaryKey}},key:{get(){let S=v.key;return h===1?S[0]:S.slice(0,h)}},value:{get(){return v.value}}})}return n.openCursor(_(d)).then(v=>v&&y(v))}}}}}var Hs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Vs};function qn(t,e,n,r){return n=n||{},r=r||"",he(t).forEach(i=>{if(!xe(e,i))n[r+i]=void 0;else{var s=t[i],a=e[i];if(typeof s=="object"&&typeof a=="object"&&s&&a){let u=mn(s),m=mn(a);u!==m?n[r+i]=e[i]:u==="Object"?qn(s,a,n,r+i+"."):s!==a&&(n[r+i]=e[i])}else s!==a&&(n[r+i]=e[i])}}),he(e).forEach(i=>{xe(t,i)||(n[r+i]=e[i])}),n}function $s(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var Gs={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){let n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){let a=q.trans,{deleting:u,creating:m,updating:p}=a.table(e).hook;switch(s.type){case"add":if(m.fire===se)break;return a._promise("readwrite",()=>_(s),!0);case"put":if(m.fire===se&&p.fire===se)break;return a._promise("readwrite",()=>_(s),!0);case"delete":if(u.fire===se)break;return a._promise("readwrite",()=>_(s),!0);case"deleteRange":if(u.fire===se)break;return a._promise("readwrite",()=>l(s),!0)}return n.mutate(s);function _(g){let c=q.trans,h=g.keys||$s(r,g);if(!h)throw new Error("Keys missing");return g=g.type==="add"||g.type==="put"?{...g,keys:h}:{...g},g.type!=="delete"&&(g.values=[...g.values]),g.keys&&(g.keys=[...g.keys]),Qs(n,g,h).then(y=>{let v=h.map((E,x)=>{let S=y[x],A={onerror:null,onsuccess:null};if(g.type==="delete")u.fire.call(A,E,S,c);else if(g.type==="add"||S===void 0){let D=m.fire.call(A,E,g.values[x],c);E==null&&D!=null&&(E=D,g.keys[x]=E,r.outbound||Ee(g.values[x],r.keyPath,E))}else{let D=qn(S,g.values[x]),C=p.fire.call(A,D,E,S,c);if(C){let F=g.values[x];Object.keys(C).forEach(L=>{xe(F,L)?F[L]=C[L]:Ee(F,L,C[L])})}}return A});return n.mutate(g).then(({failures:E,results:x,numFailures:S,lastResult:A})=>{for(let D=0;D<h.length;++D){let C=x?x[D]:h[D],F=v[D];C==null?F.onerror&&F.onerror(E[D]):F.onsuccess&&F.onsuccess(g.type==="put"&&y[D]?g.values[D]:C)}return{failures:E,results:x,numFailures:S,lastResult:A}}).catch(E=>(v.forEach(x=>x.onerror&&x.onerror(E)),Promise.reject(E)))})}function l(g){return d(g.trans,g.range,1e4)}function d(g,c,h){return n.query({trans:g,values:!1,query:{index:r,range:c},limit:h}).then(({result:y})=>_({type:"delete",keys:y,trans:g}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):y.length<h?{failures:[],numFailures:0,lastResult:void 0}:d(g,{...c,lower:y[y.length-1],lowerOpen:!0},h)))}}}}})};function Qs(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function ii(t,e,n){try{if(!e||e.keys.length<t.length)return null;let r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)be(e.keys[i],t[s])===0&&(r.push(n?mt(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}var Ys={stack:"dbcore",level:-1,create:t=>({table:e=>{let n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);let i=ii(r.keys,r.trans._cache,r.cache==="clone");return i?G.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?mt(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Jn(t){return!("from"in t)}var Me=function(t,e){if(this)ve(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{let n=new Me;return t&&"d"in t&&ve(n,t),n}};et(Me.prototype,{add(t){return sn(this,t),this},addKey(t){return Tt(this,t,t),this},addKeys(t){return t.forEach(e=>Tt(this,e,e)),this},[gn](){return er(this)}});function Tt(t,e,n){let r=be(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Jn(t))return ve(t,{from:e,to:n,d:1});let i=t.l,s=t.r;if(be(n,t.from)<0)return i?Tt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},si(t);if(be(e,t.to)>0)return s?Tt(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},si(t);be(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),be(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);let a=!t.r;i&&!t.l&&sn(t,i),s&&a&&sn(t,s)}function sn(t,e){function n(r,{from:i,to:s,l:a,r:u}){Tt(r,i,s),a&&n(r,a),u&&n(r,u)}Jn(e)||n(t,e)}function Xs(t,e){let n=er(e),r=n.next();if(r.done)return!1;let i=r.value,s=er(t),a=s.next(i.from),u=a.value;for(;!r.done&&!a.done;){if(be(u.from,i.to)<=0&&be(u.to,i.from)>=0)return!0;be(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(a=s.next(i.from)).value}return!1}function er(t){let e=Jn(t)?null:{s:0,n:t};return{next(n){let r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&be(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||be(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function si(t){var e,n;let r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){let s=i==="r"?"l":"r",a={...t},u=t[i];t.from=u.from,t.to=u.to,t[i]=u[i],a[i]=u[s],t[s]=a,a.d=ai(a)}t.d=ai(t)}function ai({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}var qs={stack:"dbcore",level:0,create:t=>{let e=t.schema.name,n=new Me(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{let i=t.table(r),{schema:s}=i,{primaryKey:a}=s,{extractKey:u,outbound:m}=a,p={...i,mutate:d=>{let g=d.trans,c=g.mutatedParts||(g.mutatedParts={}),h=D=>{let C=`idb://${e}/${r}/${D}`;return c[C]||(c[C]=new Me)},y=h(""),v=h(":dels"),{type:E}=d,[x,S]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],A=d.trans._cache;return i.mutate(d).then(D=>{if(ye(x)){E!=="delete"&&(x=D.results),y.addKeys(x);let C=ii(x,A);!C&&E!=="add"&&v.addKeys(x),(C||S)&&Js(h,s,C,S)}else if(x){let C={from:x.lower,to:x.upper};v.add(C),y.add(C)}else y.add(n),v.add(n),s.indexes.forEach(C=>h(C.name).add(n));return D})}},_=({query:{index:d,range:g}})=>{var c,h;return[d,new Me((c=g.lower)!==null&&c!==void 0?c:t.MIN_KEY,(h=g.upper)!==null&&h!==void 0?h:t.MAX_KEY)]},l={get:d=>[a,new Me(d.key)],getMany:d=>[a,new Me().addKeys(d.keys)],count:_,query:_,openCursor:_};return he(l).forEach(d=>{p[d]=function(g){let{subscr:c}=q;if(c){let h=S=>{let A=`idb://${e}/${r}/${S}`;return c[A]||(c[A]=new Me)},y=h(""),v=h(":dels"),[E,x]=l[d](g);if(h(E.name||"").add(x),!E.isPrimaryKey)if(d==="count")v.add(n);else{let S=d==="query"&&m&&g.values&&i.query({...g,values:!1});return i[d].apply(this,arguments).then(A=>{if(d==="query"){if(m&&g.values)return S.then(({result:C})=>(y.addKeys(C),A));let D=g.values?A.result.map(u):A.result;g.values?y.addKeys(D):v.addKeys(D)}else if(d==="openCursor"){let D=A,C=g.values;return D&&Object.create(D,{key:{get(){return v.addKey(D.primaryKey),D.key}},primaryKey:{get(){let F=D.primaryKey;return v.addKey(F),F}},value:{get(){return C&&y.addKey(D.primaryKey),D.value}}})}return A})}}return i[d].apply(this,arguments)}}),p}}}};function Js(t,e,n,r){function i(s){let a=t(s.name||"");function u(p){return p!=null?s.extractKey(p):null}let m=p=>s.multiEntry&&ye(p)?p.forEach(_=>a.addKey(_)):a.addKey(p);(n||r).forEach((p,_)=>{let l=n&&u(n[_]),d=r&&u(r[_]);be(l,d)!==0&&(l!=null&&m(l),d!=null&&m(d))})}e.indexes.forEach(i)}var Ke=class{constructor(e,n){this._middlewares={},this.verno=0;let r=Ke.dependencies;this._options=n={addons:Ke.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:se,dbReadyPromise:null,cancelOpen:se,openCanceller:null,autoSchema:!0};s.dbReadyPromise=new G(a=>{s.dbReadyResolve=a}),s.openCanceller=new G((a,u)=>{s.cancelOpen=u}),this._state=s,this.name=e,this.on=St(this,"populate","blocked","versionchange","close",{ready:[bn,se]}),this.on.ready.subscribe=yr(this.on.ready.subscribe,a=>(u,m)=>{Ke.vip(()=>{let p=this._state;if(p.openComplete)p.dbOpenError||G.resolve().then(u),m&&a(u);else if(p.onReadyBeingFired)p.onReadyBeingFired.push(u),m&&a(u);else{a(u);let _=this;m||a(function l(){_.on.ready.unsubscribe(u),_.on.ready.unsubscribe(l)})}})}),this.Collection=ms(this),this.Table=fs(this),this.Transaction=ks(this),this.Version=Ms(this),this.WhereClause=ws(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=It(n.IDBKeyRange),this._createTransaction=(a,u,m,p)=>new this.Transaction(a,u,m,this._options.chromeTransactionDurability,p),this._fireOnBlocked=a=>{this.on("blocked").fire(a),xt.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(a))},this.use(Hs),this.use(Gs),this.use(qs),this.use(Ys),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new te.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);let n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Rs),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||q.letThrough||this._vip)?e():new G((n,r)=>{if(this._state.openComplete)return r(new te.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){r(new te.DatabaseClosed);return}this.open().catch(se)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});let s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((a,u)=>a.level-u.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:n?i.name!==n:!1)),this}open(){return Ls(this)}_close(){let e=this._state,n=xt.indexOf(this);if(n>=0&&xt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new G(r=>{e.dbReadyResolve=r}),e.openCanceller=new G((r,i)=>{e.cancelOpen=i})}close(){this._close();let e=this._state;this._options.autoOpen=!1,e.dbOpenError=new te.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){let e=arguments.length>0,n=this._state;return new G((r,i)=>{let s=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=ue(()=>{js(this._deps,this.name),r()}),a.onerror=Re(i),a.onblocked=this._fireOnBlocked};if(e)throw new te.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return he(this._allTables).map(e=>this._allTables[e])}transaction(){let e=Ws.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=q.trans;(!i||i.db!==this||e.indexOf("!")!==-1)&&(i=null);let s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");let a,u;try{if(u=n.map(p=>{var _=p instanceof this.Table?p.name:p;if(typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),e=="r"||e===On)a=On;else if(e=="rw"||e==Fn)a=Fn;else throw new te.InvalidArgument("Invalid transaction mode: "+e);if(i){if(i.mode===On&&a===Fn)if(s)i=null;else throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&u.forEach(p=>{if(i&&i.storeNames.indexOf(p)===-1)if(s)i=null;else throw new te.SubTransaction("Table "+p+" not included in parent transaction.")}),s&&i&&!i.active&&(i=null)}}catch(p){return i?i._promise(null,(_,l)=>{l(p)}):pe(p)}let m=Zs.bind(null,this,a,u,i,r);return i?i._promise(a,m,"lock"):q.trans?at(q.transless,()=>this._whenReady(m)):this._whenReady(m)}table(e){if(!xe(this._allTables,e))throw new te.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}},ea=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",oi=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)}[ea](){return this}};function ui(t,e){return he(e).forEach(n=>{let r=t[n]||(t[n]=new Me);sn(r,e[n])}),t}function ta(t){return new oi(e=>{let n=yn(t);function r(g){n&&st();let c=()=>Ue(t,{subscr:g,trans:null}),h=q.trans?at(q.transless,c):c();return n&&h.then(Fe,Fe),h}let i=!1,s={},a={},u={get closed(){return i},unsubscribe:()=>{i=!0,Ve.storagemutated.unsubscribe(l)}};e.start&&e.start(u);let m=!1,p=!1;function _(){return he(a).some(g=>s[g]&&Xs(s[g],a[g]))}let l=g=>{ui(s,g),_()&&d()},d=()=>{if(m||i)return;s={};let g={},c=r(g);p||(Ve(At,l),p=!0),m=!0,Promise.resolve(c).then(h=>{m=!1,!i&&(_()?d():(s={},a=g,e.next&&e.next(h)))},h=>{m=!1,e.error&&e.error(h),u.unsubscribe()})};return d(),u})}var tr;try{tr={indexedDB:oe.indexedDB||oe.mozIndexedDB||oe.webkitIndexedDB||oe.msIndexedDB,IDBKeyRange:oe.IDBKeyRange||oe.webkitIDBKeyRange}}catch{tr={indexedDB:null,IDBKeyRange:null}}var Je=Ke;et(Je,{...Kt,delete(t){return new Je(t,{addons:[]}).delete()},exists(t){return new Je(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(t){try{return Ks(Je.dependencies).then(t)}catch{return pe(new te.MissingAPI)}},defineClass(){function t(e){ve(this,e)}return t},ignoreTransaction(t){return q.trans?at(q.transless,t):t()},vip:Yn,async:function(t){return function(){try{var e=Xn(t.apply(this,arguments));return!e||typeof e.then!="function"?G.resolve(e):e}catch(n){return pe(n)}}},spawn:function(t,e,n){try{var r=Xn(t.apply(n,e||[]));return!r||typeof r.then!="function"?G.resolve(r):r}catch(i){return pe(i)}},currentTransaction:{get:()=>q.trans||null},waitFor:function(t,e){let n=G.resolve(typeof t=="function"?Je.ignoreTransaction(t):t).timeout(e||6e4);return q.trans?q.trans.waitFor(n):n},Promise:G,debug:{get:()=>Ie,set:t=>{xr(t,t==="dexie"?()=>!0:Wr)}},derive:tt,extend:ve,props:et,override:yr,Events:St,on:Ve,liveQuery:ta,extendObservabilitySet:ui,getByKeyPath:Pe,setByKeyPath:Ee,delByKeyPath:Bi,shallowClone:br,deepClone:mt,getObjectDiff:qn,cmp:be,asap:_r,minKey:Pn,addons:[],connections:xt,errnames:Zi,dependencies:tr,semVer:Ur,version:Ur.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,n*2))});Je.maxKey=It(Je.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Ve(At,t=>{if(!Ne){let e;Yt?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ze,!0,!0,t)):e=new CustomEvent(Ze,{detail:t}),Ne=!0,dispatchEvent(e),Ne=!1}}),addEventListener(Ze,({detail:t})=>{Ne||an(t)}));function an(t){let e=Ne;try{Ne=!0,Ve.storagemutated.fire(t)}finally{Ne=e}}var Ne=!1;if(typeof BroadcastChannel!="undefined"){let t=new BroadcastChannel(Ze);Ve(At,e=>{Ne||t.postMessage(e)}),t.onmessage=e=>{e.data&&an(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Ve(At,e=>{try{Ne||(typeof localStorage!="undefined"&&localStorage.setItem(Ze,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ze,changedParts:e})))}catch{}}),addEventListener("storage",e=>{if(e.key===Ze){let n=JSON.parse(e.newValue);n&&an(n.changedParts)}});let t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",na)}function na({data:t}){t&&t.type===Ze&&an(t.changedParts)}G.rejectionMapper=Hi;xr(Ie,Wr);var nr=class extends Ke{constructor(){super("je2be-dlv2");this.version(1).stores({dlFiles:"&id,files"})}};self.addEventListener("message",t=>{if(ar(t.data)){let{id:e}=t.data;ra(t.data).finally(()=>{Module.RemoveAll(`/je2be/${e}`)})}});self.importScripts("./pre-wasm.js");var rr=new hn;async function ra(t){console.log(`[pre] (${t.id}) start`);let{id:e,file:n}=t,r=indexedDB.deleteDatabase("je2be-dl");r.onerror=c=>console.error(c),r.onsuccess=()=>console.log('[pre] deleted legacy "je2be-dl" table'),await new nr().dlFiles.clear(),console.log(`[pre] (${e}) extract...`);let s=await ia(n,e),a=s.length*32*32,u={type:"export_done",id:e,numTotalChunks:a};self.postMessage(u),console.log(`[pre] (${e}) extract done`),console.log(`[pre] (${e}) pre...`),await mr({kvs:rr,prefix:`/je2be/${e}/in`,mountPoint:`/je2be/${e}/in`});let m=0,p=Module._malloc(4),_=Module.Pre(e,`/je2be/${e}/in`,`/je2be/${e}/out`,m,p);lr(`/je2be/${e}/in`),console.log(`[pre] (${e}) pre done`),console.log(`[pre] (${e}) queue...`);let l=[],d=Pt(p);for(let c=0;c+1<_;c+=2){let h=Pt(d+c*4),y=Pt(d+c*4+4);l.push(h),l.push(y)}Module._free(d),Module._free(p),sa(e,s,l),console.log(`[pre] (${e}) queue done: queue length=${s.length}`);let g={id:e,type:"queueing_finished"};self.postMessage(g)}async function ia(t,e){let n;try{n=await li.default.loadAsync(t)}catch(y){throw{type:"Unzip"}}let r=[];if(n.forEach(y=>{!y.endsWith("level.dat")||r.push(y)}),r.length===0)throw{type:"NoLevelDatFound"};if(r.length!==1)throw{type:"2OrMoreLevelDatFound"};let i=r[0],s=i.lastIndexOf("level.dat"),a=i.substring(0,s),u=[],m=[],p=[];n.forEach((y,v)=>{if(!!y.startsWith(a)&&!v.dir){if(y.endsWith(".mca")){if(y.includes("/region/")){m.push(y);return}else if(y.includes("/entities/")){p.push(y);return}}u.push(y)}});let _=u.length+m.length+p.length,l={type:"progress",id:e,stage:"unzip",progress:-1,total:_};self.postMessage(l);let d=0,g=[...u,...p].map(async y=>{let v=y.substring(a.length),E=`/je2be/${e}/in/${v}`,x=await cn({zip:n,path:y});await rr.put(E,x),d++;let S={type:"progress",id:e,stage:"unzip",progress:d,total:_};self.postMessage(S)});await Promise.all(g);let c=[],h=m.map(async y=>{let v=y.substring(a.length),E=`/je2be/${e}/in/${v}`,x=await cn({zip:n,path:y}),S=0;if(v.startsWith("region/"))S=0;else if(v.startsWith("DIM1/region/"))S=2;else if(v.startsWith("DIM-1/region/"))S=1;else return;let D=y.split("/").pop().split("."),C=parseInt(D[1],10),F=parseInt(D[2],10),L={rx:C,rz:F,dim:S};c.push(L),await rr.put(E,x),d++;let k={type:"progress",id:e,stage:"unzip",progress:d,total:_};self.postMessage(k)});return await Promise.all(h),c}function sa(t,e,n){for(let r of e){let{rx:i,rz:s,dim:a}=r,u={type:"region",id:t,rx:i,rz:s,dim:a,javaEditionMap:n};self.postMessage(u)}}})();
/*!

JSZip v3.7.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
