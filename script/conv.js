(()=>{var ei=Object.create;var rn=Object.defineProperty;var ti=Object.getOwnPropertyDescriptor;var ni=Object.getOwnPropertyNames;var ri=Object.getPrototypeOf,ii=Object.prototype.hasOwnProperty;var si=e=>rn(e,"__esModule",{value:!0});var ct=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,n)=>(typeof require!="undefined"?require:t)[n]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var ai=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var oi=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ni(t))!ii.call(e,i)&&(n||i!=="default")&&rn(e,i,{get:()=>t[i],enumerable:!(r=ti(t,i))||r.enumerable});return e},ui=(e,t)=>oi(si(rn(e!=null?ei(ri(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Qn=ai((qn,sn)=>{(function(e){typeof qn=="object"&&typeof sn!="undefined"?sn.exports=e():typeof define=="function"&&define.amd?define([],e):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=e()})(function(){return function e(t,n,r){function i(l,m){if(!n[l]){if(!t[l]){var p=typeof ct=="function"&&ct;if(!m&&p)return p(l,!0);if(s)return s(l,!0);var y=new Error("Cannot find module '"+l+"'");throw y.code="MODULE_NOT_FOUND",y}var u=n[l]={exports:{}};t[l][0].call(u.exports,function(d){var g=t[l][1][d];return i(g||d)},u,u.exports,e,t,n,r)}return n[l].exports}for(var s=typeof ct=="function"&&ct,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(a){for(var l,m,p,y,u,d,g,h=[],f=0,_=a.length,v=_,E=r.getTypeOf(a)!=="string";f<a.length;)v=_-f,p=E?(l=a[f++],m=f<_?a[f++]:0,f<_?a[f++]:0):(l=a.charCodeAt(f++),m=f<_?a.charCodeAt(f++):0,f<_?a.charCodeAt(f++):0),y=l>>2,u=(3&l)<<4|m>>4,d=1<v?(15&m)<<2|p>>6:64,g=2<v?63&p:64,h.push(s.charAt(y)+s.charAt(u)+s.charAt(d)+s.charAt(g));return h.join("")},n.decode=function(a){var l,m,p,y,u,d,g=0,h=0,f="data:";if(a.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var _,v=3*(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(a.charAt(a.length-1)===s.charAt(64)&&v--,a.charAt(a.length-2)===s.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=i.uint8array?new Uint8Array(0|v):new Array(0|v);g<a.length;)l=s.indexOf(a.charAt(g++))<<2|(y=s.indexOf(a.charAt(g++)))>>4,m=(15&y)<<4|(u=s.indexOf(a.charAt(g++)))>>2,p=(3&u)<<6|(d=s.indexOf(a.charAt(g++))),_[h++]=l,u!==64&&(_[h++]=m),d!==64&&(_[h++]=p);return _}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function l(m,p,y,u,d){this.compressedSize=m,this.uncompressedSize=p,this.crc32=y,this.compression=u,this.compressedContent=d}l.prototype={getContentWorker:function(){var m=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(m,p,y){return m.pipe(new s).pipe(new a("uncompressedSize")).pipe(p.compressWorker(y)).pipe(new a("compressedSize")).withStreamInfo("compression",p)},t.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(i){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var s,a=[],l=0;l<256;l++){s=l;for(var m=0;m<8;m++)s=1&s?3988292384^s>>>1:s>>>1;a[l]=s}return a}();t.exports=function(s,a){return s!==void 0&&s.length?r.getTypeOf(s)!=="string"?function(l,m,p,y){var u=i,d=y+p;l^=-1;for(var g=y;g<d;g++)l=l>>>8^u[255&(l^m[g])];return-1^l}(0|a,s,s.length,0):function(l,m,p,y){var u=i,d=y+p;l^=-1;for(var g=y;g<d;g++)l=l>>>8^u[255&(l^m.charCodeAt(g))];return-1^l}(0|a,s,s.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r=typeof Promise!="undefined"?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",i=e("pako"),s=e("./utils"),a=e("./stream/GenericWorker"),l=r?"uint8array":"array";function m(p,y){a.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=y,this.meta={}}n.magic="\b\0",s.inherits(m,a),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(l,p.data),!1)},m.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(y){p.push({data:y,meta:p.meta})}},n.compressWorker=function(p){return new m("Deflate",p)},n.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(u,d){var g,h="";for(g=0;g<d;g++)h+=String.fromCharCode(255&u),u>>>=8;return h}function i(u,d,g,h,f,_){var v,E,x=u.file,S=u.compression,A=_!==l.utf8encode,R=s.transformTo("string",_(x.name)),C=s.transformTo("string",l.utf8encode(x.name)),F=x.comment,L=s.transformTo("string",_(F)),k=s.transformTo("string",l.utf8encode(F)),T=C.length!==x.name.length,c=k.length!==F.length,O="",X="",K="",Q=x.dir,j=x.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};d&&!g||(Y.crc32=u.crc32,Y.compressedSize=u.compressedSize,Y.uncompressedSize=u.uncompressedSize);var B=0;d&&(B|=8),A||!T&&!c||(B|=2048);var D=0,J=0;Q&&(D|=16),f==="UNIX"?(J=798,D|=function(H,le){var me=H;return H||(me=le?16893:33204),(65535&me)<<16}(x.unixPermissions,Q)):(J=20,D|=function(H){return 63&(H||0)}(x.dosPermissions)),v=j.getUTCHours(),v<<=6,v|=j.getUTCMinutes(),v<<=5,v|=j.getUTCSeconds()/2,E=j.getUTCFullYear()-1980,E<<=4,E|=j.getUTCMonth()+1,E<<=5,E|=j.getUTCDate(),T&&(X=r(1,1)+r(m(R),4)+C,O+="up"+r(X.length,2)+X),c&&(K=r(1,1)+r(m(L),4)+k,O+="uc"+r(K.length,2)+K);var V="";return V+=`
\0`,V+=r(B,2),V+=S.magic,V+=r(v,2),V+=r(E,2),V+=r(Y.crc32,4),V+=r(Y.compressedSize,4),V+=r(Y.uncompressedSize,4),V+=r(R.length,2),V+=r(O.length,2),{fileRecord:p.LOCAL_FILE_HEADER+V+R+O,dirRecord:p.CENTRAL_FILE_HEADER+r(J,2)+V+r(L.length,2)+"\0\0\0\0"+r(D,4)+r(h,4)+R+O+L}}var s=e("../utils"),a=e("../stream/GenericWorker"),l=e("../utf8"),m=e("../crc32"),p=e("../signature");function y(u,d,g,h){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=g,this.encodeFileName=h,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(y,a),y.prototype.push=function(u){var d=u.meta.percent||0,g=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,a.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:g?(d+100*(g-h-1))/g:100}}))},y.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var d=this.streamFiles&&!u.file.dir;if(d){var g=i(u,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(u){this.accumulate=!1;var d=this.streamFiles&&!u.file.dir,g=i(u,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),d)this.push({data:function(h){return p.DATA_DESCRIPTOR+r(h.crc32,4)+r(h.compressedSize,4)+r(h.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var u=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var g=this.bytesWritten-u,h=function(f,_,v,E,x){var S=s.transformTo("string",x(E));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(f,2)+r(f,2)+r(_,4)+r(v,4)+r(S.length,2)+S}(this.dirRecords.length,g,u,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(u){this._sources.push(u);var d=this;return u.on("data",function(g){d.processChunk(g)}),u.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),u.on("error",function(g){d.error(g)}),this},y.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(u){var d=this._sources;if(!a.prototype.error.call(this,u))return!1;for(var g=0;g<d.length;g++)try{d[g].error(u)}catch{}return!0},y.prototype.lock=function(){a.prototype.lock.call(this);for(var u=this._sources,d=0;d<u.length;d++)u[d].lock()},t.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(s,a,l){var m=new i(a.streamFiles,l,a.platform,a.encodeFileName),p=0;try{s.forEach(function(y,u){p++;var d=function(_,v){var E=_||v,x=r[E];if(!x)throw new Error(E+" is not a valid compression method !");return x}(u.options.compression,a.compression),g=u.options.compressionOptions||a.compressionOptions||{},h=u.dir,f=u.date;u._compressWorker(d,g).withStreamInfo("file",{name:y,dir:h,date:f,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(y){m.error(y)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new r;for(var s in this)typeof this[s]!="function"&&(i[s]=this[s]);return i}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.7.1",r.loadAsync=function(i,s){return new r().loadAsync(i,s)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),s=e("./utf8"),a=e("./zipEntries"),l=e("./stream/Crc32Probe"),m=e("./nodejsUtils");function p(y){return new i.Promise(function(u,d){var g=y.decompressed.getContentWorker().pipe(new l);g.on("error",function(h){d(h)}).on("end",function(){g.streamInfo.crc32!==y.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}t.exports=function(y,u){var d=this;return u=r.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),m.isNode&&m.isStream(y)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",y,!0,u.optimizedBinaryString,u.base64).then(function(g){var h=new a(u);return h.load(g),h}).then(function(g){var h=[i.Promise.resolve(g)],f=g.files;if(u.checkCRC32)for(var _=0;_<f.length;_++)h.push(p(f[_]));return i.Promise.all(h)}).then(function(g){for(var h=g.shift(),f=h.files,_=0;_<f.length;_++){var v=f[_];d.file(v.fileNameStr,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:u.createFolders})}return h.zipComment.length&&(d.comment=h.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function s(a,l){i.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(l)}r.inherits(s,i),s.prototype._bindStream=function(a){var l=this;(this._stream=a).pause(),a.on("data",function(m){l.push({data:m,meta:{percent:0}})}).on("error",function(m){l.isPaused?this.generatedError=m:l.error(m)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(s,a,l){r.call(this,a),this._helper=s;var m=this;s.on("data",function(p,y){m.push(p)||m._helper.pause(),l&&l(y)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(r,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,i);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,i)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var i=new Buffer(r);return i.fill(0),i},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(e,t,n){"use strict";function r(x,S,A){var R,C=s.getTypeOf(S),F=s.extend(A||{},m);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(x=f(x)),F.createFolders&&(R=h(x))&&_.call(this,R,!0);var L=C==="string"&&F.binary===!1&&F.base64===!1;A&&A.binary!==void 0||(F.binary=!L),(S instanceof p&&S.uncompressedSize===0||F.dir||!S||S.length===0)&&(F.base64=!1,F.binary=!0,S="",F.compression="STORE",C="string");var k=null;k=S instanceof p||S instanceof a?S:d.isNode&&d.isStream(S)?new g(x,S):s.prepareContent(x,S,F.binary,F.optimizedBinaryString,F.base64);var T=new y(x,k,F);this.files[x]=T}var i=e("./utf8"),s=e("./utils"),a=e("./stream/GenericWorker"),l=e("./stream/StreamHelper"),m=e("./defaults"),p=e("./compressedObject"),y=e("./zipObject"),u=e("./generate"),d=e("./nodejsUtils"),g=e("./nodejs/NodejsStreamInputAdapter"),h=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var S=x.lastIndexOf("/");return 0<S?x.substring(0,S):""},f=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},_=function(x,S){return S=S!==void 0?S:m.createFolders,x=f(x),this.files[x]||r.call(this,x,null,{dir:!0,createFolders:S}),this.files[x]};function v(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var S,A,R;for(S in this.files)R=this.files[S],(A=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&x(A,R)},filter:function(x){var S=[];return this.forEach(function(A,R){x(A,R)&&S.push(R)}),S},file:function(x,S,A){if(arguments.length!==1)return x=this.root+x,r.call(this,x,S,A),this;if(v(x)){var R=x;return this.filter(function(F,L){return!L.dir&&R.test(F)})}var C=this.files[this.root+x];return C&&!C.dir?C:null},folder:function(x){if(!x)return this;if(v(x))return this.filter(function(C,F){return F.dir&&x.test(C)});var S=this.root+x,A=_.call(this,S),R=this.clone();return R.root=A.name,R},remove:function(x){x=this.root+x;var S=this.files[x];if(S||(x.slice(-1)!=="/"&&(x+="/"),S=this.files[x]),S&&!S.dir)delete this.files[x];else for(var A=this.filter(function(C,F){return F.name.slice(0,x.length)===x}),R=0;R<A.length;R++)delete this.files[A[R].name];return this},generate:function(x){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var S,A={};try{if((A=s.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");s.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var R=A.comment||this.comment||"";S=u.generateWorker(this,A,R)}catch(C){(S=new a("error")).error(C)}return new l(S,A.type||"string",A.mimeType)},generateAsync:function(x,S){return this.generateInternalStream(x).accumulate(S)},generateNodeStream:function(x,S){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(S)}};t.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(s){r.call(this,s);for(var a=0;a<this.data.length;a++)s[a]=255&s[a]}e("../utils").inherits(i,r),i.prototype.byteAt=function(s){return this.data[this.zero+s]},i.prototype.lastIndexOfSignature=function(s){for(var a=s.charCodeAt(0),l=s.charCodeAt(1),m=s.charCodeAt(2),p=s.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===a&&this.data[y+1]===l&&this.data[y+2]===m&&this.data[y+3]===p)return y-this.zero;return-1},i.prototype.readAndCheckSignature=function(s){var a=s.charCodeAt(0),l=s.charCodeAt(1),m=s.charCodeAt(2),p=s.charCodeAt(3),y=this.readData(4);return a===y[0]&&l===y[1]&&m===y[2]&&p===y[3]},i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(s){},readInt:function(s){var a,l=0;for(this.checkOffset(s),a=this.index+s-1;a>=this.index;a--)l=(l<<8)+this.byteAt(a);return this.index+=s,l},readString:function(s){return r.transformTo("string",this.readData(s))},readData:function(s){},lastIndexOfSignature:function(s){},readAndCheckSignature:function(s){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(s){r.call(this,s)}e("../utils").inherits(i,r),i.prototype.readData=function(s){this.checkOffset(s);var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(s){r.call(this,s)}e("../utils").inherits(i,r),i.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},i.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},i.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},i.prototype.readData=function(s){this.checkOffset(s);var a=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(s){r.call(this,s)}e("../utils").inherits(i,r),i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,a},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),s=e("./ArrayReader"),a=e("./StringReader"),l=e("./NodeBufferReader"),m=e("./Uint8ArrayReader");t.exports=function(p){var y=r.getTypeOf(p);return r.checkSupport(y),y!=="string"||i.uint8array?y==="nodebuffer"?new l(p):i.uint8array?new m(r.transformTo("uint8array",p)):new s(r.transformTo("array",p)):new a(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function s(a){r.call(this,"ConvertWorker to "+a),this.destType=a}i.inherits(s,r),s.prototype.processChunk=function(a){this.push({data:i.transformTo(this.destType,a.data),meta:a.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,r),s.prototype.processChunk=function(a){this.streamInfo.crc32=i(a.data,this.streamInfo.crc32||0),this.push(a)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(a){i.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}r.inherits(s,i),s.prototype.processChunk=function(a){if(a){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+a.data.length}i.prototype.processChunk.call(this,a)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(a){i.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(m){l.dataIsReady=!0,l.data=m,l.max=m&&m.length||0,l.type=r.getTypeOf(m),l.isPaused||l._tickAndRepeat()},function(m){l.error(m)})}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,l);break;case"uint8array":a=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":a=this.data.slice(this.index,l)}return this.index=l,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,s){return this._listeners[i].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,s){if(this._listeners[i])for(var a=0;a<this._listeners[i].length;a++)this._listeners[i][a].call(this,s)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var s=this;return i.on("data",function(a){s.processChunk(a)}),i.on("end",function(){s.end()}),i.on("error",function(a){s.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,s){return this.extraStreamInfo[i]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),a=e("../base64"),l=e("../support"),m=e("../external"),p=null;if(l.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(d,g){return new m.Promise(function(h,f){var _=[],v=d._internalType,E=d._outputType,x=d._mimeType;d.on("data",function(S,A){_.push(S),g&&g(A)}).on("error",function(S){_=[],f(S)}).on("end",function(){try{var S=function(A,R,C){switch(A){case"blob":return r.newBlob(r.transformTo("arraybuffer",R),C);case"base64":return a.encode(R);default:return r.transformTo(A,R)}}(E,function(A,R){var C,F=0,L=null,k=0;for(C=0;C<R.length;C++)k+=R[C].length;switch(A){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(L=new Uint8Array(k),C=0;C<R.length;C++)L.set(R[C],F),F+=R[C].length;return L;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+A+"'")}}(v,_),x);h(S)}catch(A){f(A)}_=[]}).resume()})}function u(d,g,h){var f=g;switch(g){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=g,this._mimeType=h,r.checkSupport(f),this._worker=d.pipe(new i(f)),d.lock()}catch(_){this._worker=new s("error"),this._worker.error(_)}}u.prototype={accumulate:function(d){return y(this,d)},on:function(d,g){var h=this;return d==="data"?this._worker.on(d,function(f){g.call(h,f.data,f.meta)}):this._worker.on(d,function(){r.delay(g,arguments,h)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},d)}},t.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",n.nodebuffer=typeof Buffer!="undefined",n.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),s=e("./nodejsUtils"),a=e("./stream/GenericWorker"),l=new Array(256),m=0;m<256;m++)l[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;l[254]=l[254]=1;function p(){a.call(this,"utf-8 decode"),this.leftOver=null}function y(){a.call(this,"utf-8 encode")}n.utf8encode=function(u){return i.nodebuffer?s.newBufferFrom(u,"utf-8"):function(d){var g,h,f,_,v,E=d.length,x=0;for(_=0;_<E;_++)(64512&(h=d.charCodeAt(_)))==55296&&_+1<E&&(64512&(f=d.charCodeAt(_+1)))==56320&&(h=65536+(h-55296<<10)+(f-56320),_++),x+=h<128?1:h<2048?2:h<65536?3:4;for(g=i.uint8array?new Uint8Array(x):new Array(x),_=v=0;v<x;_++)(64512&(h=d.charCodeAt(_)))==55296&&_+1<E&&(64512&(f=d.charCodeAt(_+1)))==56320&&(h=65536+(h-55296<<10)+(f-56320),_++),h<128?g[v++]=h:(h<2048?g[v++]=192|h>>>6:(h<65536?g[v++]=224|h>>>12:(g[v++]=240|h>>>18,g[v++]=128|h>>>12&63),g[v++]=128|h>>>6&63),g[v++]=128|63&h);return g}(u)},n.utf8decode=function(u){return i.nodebuffer?r.transformTo("nodebuffer",u).toString("utf-8"):function(d){var g,h,f,_,v=d.length,E=new Array(2*v);for(g=h=0;g<v;)if((f=d[g++])<128)E[h++]=f;else if(4<(_=l[f]))E[h++]=65533,g+=_-1;else{for(f&=_===2?31:_===3?15:7;1<_&&g<v;)f=f<<6|63&d[g++],_--;1<_?E[h++]=65533:f<65536?E[h++]=f:(f-=65536,E[h++]=55296|f>>10&1023,E[h++]=56320|1023&f)}return E.length!==h&&(E.subarray?E=E.subarray(0,h):E.length=h),r.applyFromCharCode(E)}(u=r.transformTo(i.uint8array?"uint8array":"array",u))},r.inherits(p,a),p.prototype.processChunk=function(u){var d=r.transformTo(i.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var g=d;(d=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),d.set(g,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var h=function(_,v){var E;for((v=v||_.length)>_.length&&(v=_.length),E=v-1;0<=E&&(192&_[E])==128;)E--;return E<0||E===0?v:E+l[_[E]]>v?E:v}(d),f=d;h!==d.length&&(i.uint8array?(f=d.subarray(0,h),this.leftOver=d.subarray(h,d.length)):(f=d.slice(0,h),this.leftOver=d.slice(h,d.length))),this.push({data:n.utf8decode(f),meta:u.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=p,r.inherits(y,a),y.prototype.processChunk=function(u){this.push({data:n.utf8encode(u.data),meta:u.meta})},n.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),a=e("set-immediate-shim"),l=e("./external");function m(h){return h}function p(h,f){for(var _=0;_<h.length;++_)f[_]=255&h.charCodeAt(_);return f}n.newBlob=function(h,f){n.checkSupport("blob");try{return new Blob([h],{type:f})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(h),_.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(h,f,_){var v=[],E=0,x=h.length;if(x<=_)return String.fromCharCode.apply(null,h);for(;E<x;)f==="array"||f==="nodebuffer"?v.push(String.fromCharCode.apply(null,h.slice(E,Math.min(E+_,x)))):v.push(String.fromCharCode.apply(null,h.subarray(E,Math.min(E+_,x)))),E+=_;return v.join("")},stringifyByChar:function(h){for(var f="",_=0;_<h.length;_++)f+=String.fromCharCode(h[_]);return f},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function u(h){var f=65536,_=n.getTypeOf(h),v=!0;if(_==="uint8array"?v=y.applyCanBeUsed.uint8array:_==="nodebuffer"&&(v=y.applyCanBeUsed.nodebuffer),v)for(;1<f;)try{return y.stringifyByChunk(h,_,f)}catch{f=Math.floor(f/2)}return y.stringifyByChar(h)}function d(h,f){for(var _=0;_<h.length;_++)f[_]=h[_];return f}n.applyFromCharCode=u;var g={};g.string={string:m,array:function(h){return p(h,new Array(h.length))},arraybuffer:function(h){return g.string.uint8array(h).buffer},uint8array:function(h){return p(h,new Uint8Array(h.length))},nodebuffer:function(h){return p(h,s.allocBuffer(h.length))}},g.array={string:u,array:m,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return s.newBufferFrom(h)}},g.arraybuffer={string:function(h){return u(new Uint8Array(h))},array:function(h){return d(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:m,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return s.newBufferFrom(new Uint8Array(h))}},g.uint8array={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:m,nodebuffer:function(h){return s.newBufferFrom(h)}},g.nodebuffer={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return g.nodebuffer.uint8array(h).buffer},uint8array:function(h){return d(h,new Uint8Array(h.length))},nodebuffer:m},n.transformTo=function(h,f){if(f=f||"",!h)return f;n.checkSupport(h);var _=n.getTypeOf(f);return g[_][h](f)},n.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":r.nodebuffer&&s.isBuffer(h)?"nodebuffer":r.uint8array&&h instanceof Uint8Array?"uint8array":r.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(h){if(!r[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(h){var f,_,v="";for(_=0;_<(h||"").length;_++)v+="\\x"+((f=h.charCodeAt(_))<16?"0":"")+f.toString(16).toUpperCase();return v},n.delay=function(h,f,_){a(function(){h.apply(_||null,f||[])})},n.inherits=function(h,f){function _(){}_.prototype=f.prototype,h.prototype=new _},n.extend=function(){var h,f,_={};for(h=0;h<arguments.length;h++)for(f in arguments[h])arguments[h].hasOwnProperty(f)&&_[f]===void 0&&(_[f]=arguments[h][f]);return _},n.prepareContent=function(h,f,_,v,E){return l.Promise.resolve(f).then(function(x){return r.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader!="undefined"?new l.Promise(function(S,A){var R=new FileReader;R.onload=function(C){S(C.target.result)},R.onerror=function(C){A(C.target.error)},R.readAsArrayBuffer(x)}):x}).then(function(x){var S=n.getTypeOf(x);return S?(S==="arraybuffer"?x=n.transformTo("uint8array",x):S==="string"&&(E?x=i.decode(x):_&&v!==!0&&(x=function(A){return p(A,r.uint8array?new Uint8Array(A.length):new Array(A.length))}(x))),x):l.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),a=e("./zipEntry"),l=(e("./utf8"),e("./support"));function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(y)+", expected "+i.pretty(p)+")")}},isSignature:function(p,y){var u=this.reader.index;this.reader.setIndex(p);var d=this.reader.readString(4)===y;return this.reader.setIndex(u),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),y=l.uint8array?"uint8array":"array",u=i.transformTo(y,p);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,y,u,d=this.zip64EndOfCentralSize-44;0<d;)p=this.reader.readInt(2),y=this.reader.readInt(4),u=this.reader.readData(y),this.zip64ExtensibleData[p]={id:p,length:y,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,y;for(p=0;p<this.files.length;p++)y=this.files[p],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(p=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var y=p;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var d=y-u;if(0<d)this.isSignature(y,s.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(p){this.reader=r(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),a=e("./crc32"),l=e("./utf8"),m=e("./compressions"),p=e("./support");function y(u,d){this.options=u,this.loadOptions=d}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var d,g;if(u.skip(22),this.fileNameLength=u.readInt(2),g=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=function(h){for(var f in m)if(m.hasOwnProperty(f)&&m[f].magic===h)return m[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,d,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var d=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(d),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(u){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(u){var d,g,h,f=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<f;)d=u.readInt(2),g=u.readInt(2),h=u.readData(g),this.extraFields[d]={id:d,length:g,value:h};u.setIndex(f)},handleUTF8:function(){var u=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var g=i.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var f=i.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var d=r(u.value);return d.readInt(1)!==1||a(this.fileName)!==d.readInt(4)?null:l.utf8decode(d.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var d=r(u.value);return d.readInt(1)!==1||a(this.fileComment)!==d.readInt(4)?null:l.utf8decode(d.readData(u.length-5))}return null}},t.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(d,g,h){this.name=d,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=g,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var i=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),a=e("./utf8"),l=e("./compressedObject"),m=e("./stream/GenericWorker");r.prototype={internalStream:function(d){var g=null,h="string";try{if(!d)throw new Error("No output type specified.");var f=(h=d.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),g=this._decompressWorker();var _=!this._dataBinary;_&&!f&&(g=g.pipe(new a.Utf8EncodeWorker)),!_&&f&&(g=g.pipe(new a.Utf8DecodeWorker))}catch(v){(g=new m("error")).error(v)}return new i(g,h,"")},async:function(d,g){return this.internalStream(d).accumulate(g)},nodeStream:function(d,g){return this.internalStream(d||"nodebuffer").toNodejsStream(g)},_compressWorker:function(d,g){if(this._data instanceof l&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new a.Utf8EncodeWorker)),l.createWorkerFrom(h,d,g)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof m?this._data:new s(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<p.length;u++)r.prototype[p[u]]=y;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(r){"use strict";var i,s,a=r.MutationObserver||r.WebKitMutationObserver;if(a){var l=0,m=new a(d),p=r.document.createTextNode("");m.observe(p,{characterData:!0}),i=function(){p.data=l=++l%2}}else if(r.setImmediate||r.MessageChannel===void 0)i="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var g=r.document.createElement("script");g.onreadystatechange=function(){d(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},r.document.documentElement.appendChild(g)}:function(){setTimeout(d,0)};else{var y=new r.MessageChannel;y.port1.onmessage=d,i=function(){y.port2.postMessage(0)}}var u=[];function d(){var g,h;s=!0;for(var f=u.length;f;){for(h=u,u=[],g=-1;++g<f;)h[g]();f=u.length}s=!1}t.exports=function(g){u.push(g)!==1||s||i()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var s={},a=["REJECTED"],l=["FULFILLED"],m=["PENDING"];function p(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,f!==i&&g(this,f)}function y(f,_,v){this.promise=f,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function u(f,_,v){r(function(){var E;try{E=_(v)}catch(x){return s.reject(f,x)}E===f?s.reject(f,new TypeError("Cannot resolve promise with itself")):s.resolve(f,E)})}function d(f){var _=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof _=="function")return function(){_.apply(f,arguments)}}function g(f,_){var v=!1;function E(A){v||(v=!0,s.reject(f,A))}function x(A){v||(v=!0,s.resolve(f,A))}var S=h(function(){_(x,E)});S.status==="error"&&E(S.value)}function h(f,_){var v={};try{v.value=f(_),v.status="success"}catch(E){v.status="error",v.value=E}return v}(t.exports=p).prototype.finally=function(f){if(typeof f!="function")return this;var _=this.constructor;return this.then(function(v){return _.resolve(f()).then(function(){return v})},function(v){return _.resolve(f()).then(function(){throw v})})},p.prototype.catch=function(f){return this.then(null,f)},p.prototype.then=function(f,_){if(typeof f!="function"&&this.state===l||typeof _!="function"&&this.state===a)return this;var v=new this.constructor(i);return this.state!==m?u(v,this.state===l?f:_,this.outcome):this.queue.push(new y(v,f,_)),v},y.prototype.callFulfilled=function(f){s.resolve(this.promise,f)},y.prototype.otherCallFulfilled=function(f){u(this.promise,this.onFulfilled,f)},y.prototype.callRejected=function(f){s.reject(this.promise,f)},y.prototype.otherCallRejected=function(f){u(this.promise,this.onRejected,f)},s.resolve=function(f,_){var v=h(d,_);if(v.status==="error")return s.reject(f,v.value);var E=v.value;if(E)g(f,E);else{f.state=l,f.outcome=_;for(var x=-1,S=f.queue.length;++x<S;)f.queue[x].callFulfilled(_)}return f},s.reject=function(f,_){f.state=a,f.outcome=_;for(var v=-1,E=f.queue.length;++v<E;)f.queue[v].callRejected(_);return f},p.resolve=function(f){return f instanceof this?f:s.resolve(new this(i),f)},p.reject=function(f){var _=new this(i);return s.reject(_,f)},p.all=function(f){var _=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=f.length,E=!1;if(!v)return this.resolve([]);for(var x=new Array(v),S=0,A=-1,R=new this(i);++A<v;)C(f[A],A);return R;function C(F,L){_.resolve(F).then(function(k){x[L]=k,++S!==v||E||(E=!0,s.resolve(R,x))},function(k){E||(E=!0,s.reject(R,k))})}},p.race=function(f){var _=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=f.length,E=!1;if(!v)return this.resolve([]);for(var x=-1,S=new this(i);++x<v;)A=f[x],_.resolve(A).then(function(R){E||(E=!0,s.resolve(S,R))},function(R){E||(E=!0,s.reject(S,R))});var A;return S}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),a=e("./zlib/messages"),l=e("./zlib/zstream"),m=Object.prototype.toString,p=0,y=-1,u=0,d=8;function g(f){if(!(this instanceof g))return new g(f);this.options=i.assign({level:y,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},f||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var v=r.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(v!==p)throw new Error(a[v]);if(_.header&&r.deflateSetHeader(this.strm,_.header),_.dictionary){var E;if(E=typeof _.dictionary=="string"?s.string2buf(_.dictionary):m.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(v=r.deflateSetDictionary(this.strm,E))!==p)throw new Error(a[v]);this._dict_set=!0}}function h(f,_){var v=new g(_);if(v.push(f,!0),v.err)throw v.msg||a[v.err];return v.result}g.prototype.push=function(f,_){var v,E,x=this.strm,S=this.options.chunkSize;if(this.ended)return!1;E=_===~~_?_:_===!0?4:0,typeof f=="string"?x.input=s.string2buf(f):m.call(f)==="[object ArrayBuffer]"?x.input=new Uint8Array(f):x.input=f,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new i.Buf8(S),x.next_out=0,x.avail_out=S),(v=r.deflate(x,E))!==1&&v!==p)return this.onEnd(v),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(i.shrinkBuf(x.output,x.next_out))):this.onData(i.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&v!==1);return E===4?(v=r.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===p):E!==2||(this.onEnd(p),!(x.avail_out=0))},g.prototype.onData=function(f){this.chunks.push(f)},g.prototype.onEnd=function(f){f===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},n.Deflate=g,n.deflate=h,n.deflateRaw=function(f,_){return(_=_||{}).raw=!0,h(f,_)},n.gzip=function(f,_){return(_=_||{}).gzip=!0,h(f,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),a=e("./zlib/constants"),l=e("./zlib/messages"),m=e("./zlib/zstream"),p=e("./zlib/gzheader"),y=Object.prototype.toString;function u(g){if(!(this instanceof u))return new u(g);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},g||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||g&&g.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&(15&h.windowBits)==0&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var f=r.inflateInit2(this.strm,h.windowBits);if(f!==a.Z_OK)throw new Error(l[f]);this.header=new p,r.inflateGetHeader(this.strm,this.header)}function d(g,h){var f=new u(h);if(f.push(g,!0),f.err)throw f.msg||l[f.err];return f.result}u.prototype.push=function(g,h){var f,_,v,E,x,S,A=this.strm,R=this.options.chunkSize,C=this.options.dictionary,F=!1;if(this.ended)return!1;_=h===~~h?h:h===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof g=="string"?A.input=s.binstring2buf(g):y.call(g)==="[object ArrayBuffer]"?A.input=new Uint8Array(g):A.input=g,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(R),A.next_out=0,A.avail_out=R),(f=r.inflate(A,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&C&&(S=typeof C=="string"?s.string2buf(C):y.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,f=r.inflateSetDictionary(this.strm,S)),f===a.Z_BUF_ERROR&&F===!0&&(f=a.Z_OK,F=!1),f!==a.Z_STREAM_END&&f!==a.Z_OK)return this.onEnd(f),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&f!==a.Z_STREAM_END&&(A.avail_in!==0||_!==a.Z_FINISH&&_!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=s.utf8border(A.output,A.next_out),E=A.next_out-v,x=s.buf2string(A.output,v),A.next_out=E,A.avail_out=R-E,E&&i.arraySet(A.output,A.output,v,E,0),this.onData(x)):this.onData(i.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(F=!0)}while((0<A.avail_in||A.avail_out===0)&&f!==a.Z_STREAM_END);return f===a.Z_STREAM_END&&(_=a.Z_FINISH),_===a.Z_FINISH?(f=r.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===a.Z_OK):_!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(A.avail_out=0))},u.prototype.onData=function(g){this.chunks.push(g)},u.prototype.onEnd=function(g){g===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},n.Inflate=u,n.inflate=d,n.inflateRaw=function(g,h){return(h=h||{}).raw=!0,d(g,h)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";n.assign=function(a){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var m=l.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(a[p]=m[p])}}return a},n.shrinkBuf=function(a,l){return a.length===l?a:a.subarray?a.subarray(0,l):(a.length=l,a)};var i={arraySet:function(a,l,m,p,y){if(l.subarray&&a.subarray)a.set(l.subarray(m,m+p),y);else for(var u=0;u<p;u++)a[y+u]=l[m+u]},flattenChunks:function(a){var l,m,p,y,u,d;for(l=p=0,m=a.length;l<m;l++)p+=a[l].length;for(d=new Uint8Array(p),l=y=0,m=a.length;l<m;l++)u=a[l],d.set(u,y),y+=u.length;return d}},s={arraySet:function(a,l,m,p,y){for(var u=0;u<p;u++)a[y+u]=l[m+u]},flattenChunks:function(a){return[].concat.apply([],a)}};n.setTyped=function(a){a?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var a=new r.Buf8(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function m(p,y){if(y<65537&&(p.subarray&&s||!p.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(p,y));for(var u="",d=0;d<y;d++)u+=String.fromCharCode(p[d]);return u}a[254]=a[254]=1,n.string2buf=function(p){var y,u,d,g,h,f=p.length,_=0;for(g=0;g<f;g++)(64512&(u=p.charCodeAt(g)))==55296&&g+1<f&&(64512&(d=p.charCodeAt(g+1)))==56320&&(u=65536+(u-55296<<10)+(d-56320),g++),_+=u<128?1:u<2048?2:u<65536?3:4;for(y=new r.Buf8(_),g=h=0;h<_;g++)(64512&(u=p.charCodeAt(g)))==55296&&g+1<f&&(64512&(d=p.charCodeAt(g+1)))==56320&&(u=65536+(u-55296<<10)+(d-56320),g++),u<128?y[h++]=u:(u<2048?y[h++]=192|u>>>6:(u<65536?y[h++]=224|u>>>12:(y[h++]=240|u>>>18,y[h++]=128|u>>>12&63),y[h++]=128|u>>>6&63),y[h++]=128|63&u);return y},n.buf2binstring=function(p){return m(p,p.length)},n.binstring2buf=function(p){for(var y=new r.Buf8(p.length),u=0,d=y.length;u<d;u++)y[u]=p.charCodeAt(u);return y},n.buf2string=function(p,y){var u,d,g,h,f=y||p.length,_=new Array(2*f);for(u=d=0;u<f;)if((g=p[u++])<128)_[d++]=g;else if(4<(h=a[g]))_[d++]=65533,u+=h-1;else{for(g&=h===2?31:h===3?15:7;1<h&&u<f;)g=g<<6|63&p[u++],h--;1<h?_[d++]=65533:g<65536?_[d++]=g:(g-=65536,_[d++]=55296|g>>10&1023,_[d++]=56320|1023&g)}return m(_,d)},n.utf8border=function(p,y){var u;for((y=y||p.length)>p.length&&(y=p.length),u=y-1;0<=u&&(192&p[u])==128;)u--;return u<0||u===0?y:u+a[p[u]]>y?u:y}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(r,i,s,a){for(var l=65535&r|0,m=r>>>16&65535|0,p=0;s!==0;){for(s-=p=2e3<s?2e3:s;m=m+(l=l+i[a++]|0)|0,--p;);l%=65521,m%=65521}return l|m<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var i,s=[],a=0;a<256;a++){i=a;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;s[a]=i}return s}();t.exports=function(i,s,a,l){var m=r,p=l+a;i^=-1;for(var y=l;y<p;y++)i=i>>>8^m[255&(i^s[y])];return-1^i}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),s=e("./trees"),a=e("./adler32"),l=e("./crc32"),m=e("./messages"),p=0,y=4,u=0,d=-2,g=-1,h=4,f=2,_=8,v=9,E=286,x=30,S=19,A=2*E+1,R=15,C=3,F=258,L=F+C+1,k=42,T=113,c=1,O=2,X=3,K=4;function Q(o,M){return o.msg=m[M],M}function j(o){return(o<<1)-(4<o?9:0)}function Y(o){for(var M=o.length;0<=--M;)o[M]=0}function B(o){var M=o.state,P=M.pending;P>o.avail_out&&(P=o.avail_out),P!==0&&(i.arraySet(o.output,M.pending_buf,M.pending_out,P,o.next_out),o.next_out+=P,M.pending_out+=P,o.total_out+=P,o.avail_out-=P,M.pending-=P,M.pending===0&&(M.pending_out=0))}function D(o,M){s._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,M),o.block_start=o.strstart,B(o.strm)}function J(o,M){o.pending_buf[o.pending++]=M}function V(o,M){o.pending_buf[o.pending++]=M>>>8&255,o.pending_buf[o.pending++]=255&M}function H(o,M){var P,w,b=o.max_chain_length,I=o.strstart,N=o.prev_length,U=o.nice_match,z=o.strstart>o.w_size-L?o.strstart-(o.w_size-L):0,W=o.window,$=o.w_mask,Z=o.prev,ee=o.strstart+F,ae=W[I+N-1],re=W[I+N];o.prev_length>=o.good_match&&(b>>=2),U>o.lookahead&&(U=o.lookahead);do if(W[(P=M)+N]===re&&W[P+N-1]===ae&&W[P]===W[I]&&W[++P]===W[I+1]){I+=2,P++;do;while(W[++I]===W[++P]&&W[++I]===W[++P]&&W[++I]===W[++P]&&W[++I]===W[++P]&&W[++I]===W[++P]&&W[++I]===W[++P]&&W[++I]===W[++P]&&W[++I]===W[++P]&&I<ee);if(w=F-(ee-I),I=ee-F,N<w){if(o.match_start=M,U<=(N=w))break;ae=W[I+N-1],re=W[I+N]}}while((M=Z[M&$])>z&&--b!=0);return N<=o.lookahead?N:o.lookahead}function le(o){var M,P,w,b,I,N,U,z,W,$,Z=o.w_size;do{if(b=o.window_size-o.lookahead-o.strstart,o.strstart>=Z+(Z-L)){for(i.arraySet(o.window,o.window,Z,Z,0),o.match_start-=Z,o.strstart-=Z,o.block_start-=Z,M=P=o.hash_size;w=o.head[--M],o.head[M]=Z<=w?w-Z:0,--P;);for(M=P=Z;w=o.prev[--M],o.prev[M]=Z<=w?w-Z:0,--P;);b+=Z}if(o.strm.avail_in===0)break;if(N=o.strm,U=o.window,z=o.strstart+o.lookahead,W=b,$=void 0,$=N.avail_in,W<$&&($=W),P=$===0?0:(N.avail_in-=$,i.arraySet(U,N.input,N.next_in,$,z),N.state.wrap===1?N.adler=a(N.adler,U,$,z):N.state.wrap===2&&(N.adler=l(N.adler,U,$,z)),N.next_in+=$,N.total_in+=$,$),o.lookahead+=P,o.lookahead+o.insert>=C)for(I=o.strstart-o.insert,o.ins_h=o.window[I],o.ins_h=(o.ins_h<<o.hash_shift^o.window[I+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[I+C-1])&o.hash_mask,o.prev[I&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=I,I++,o.insert--,!(o.lookahead+o.insert<C)););}while(o.lookahead<L&&o.strm.avail_in!==0)}function me(o,M){for(var P,w;;){if(o.lookahead<L){if(le(o),o.lookahead<L&&M===p)return c;if(o.lookahead===0)break}if(P=0,o.lookahead>=C&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),P!==0&&o.strstart-P<=o.w_size-L&&(o.match_length=H(o,P)),o.match_length>=C)if(w=s._tr_tally(o,o.strstart-o.match_start,o.match_length-C),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=C){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else w=s._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(w&&(D(o,!1),o.strm.avail_out===0))return c}return o.insert=o.strstart<C-1?o.strstart:C-1,M===y?(D(o,!0),o.strm.avail_out===0?X:K):o.last_lit&&(D(o,!1),o.strm.avail_out===0)?c:O}function ne(o,M){for(var P,w,b;;){if(o.lookahead<L){if(le(o),o.lookahead<L&&M===p)return c;if(o.lookahead===0)break}if(P=0,o.lookahead>=C&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=C-1,P!==0&&o.prev_length<o.max_lazy_match&&o.strstart-P<=o.w_size-L&&(o.match_length=H(o,P),o.match_length<=5&&(o.strategy===1||o.match_length===C&&4096<o.strstart-o.match_start)&&(o.match_length=C-1)),o.prev_length>=C&&o.match_length<=o.prev_length){for(b=o.strstart+o.lookahead-C,w=s._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-C),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=b&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+C-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=C-1,o.strstart++,w&&(D(o,!1),o.strm.avail_out===0))return c}else if(o.match_available){if((w=s._tr_tally(o,0,o.window[o.strstart-1]))&&D(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return c}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(w=s._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<C-1?o.strstart:C-1,M===y?(D(o,!0),o.strm.avail_out===0?X:K):o.last_lit&&(D(o,!1),o.strm.avail_out===0)?c:O}function ie(o,M,P,w,b){this.good_length=o,this.max_lazy=M,this.nice_length=P,this.max_chain=w,this.func=b}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*A),this.dyn_dtree=new i.Buf16(2*(2*x+1)),this.bl_tree=new i.Buf16(2*(2*S+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(R+1),this.heap=new i.Buf16(2*E+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*E+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(o){var M;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=f,(M=o.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?k:T,o.adler=M.wrap===2?0:1,M.last_flush=p,s._tr_init(M),u):Q(o,d)}function Ee(o){var M=ce(o);return M===u&&function(P){P.window_size=2*P.w_size,Y(P.head),P.max_lazy_match=r[P.level].max_lazy,P.good_match=r[P.level].good_length,P.nice_match=r[P.level].nice_length,P.max_chain_length=r[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=C-1,P.match_available=0,P.ins_h=0}(o.state),M}function xe(o,M,P,w,b,I){if(!o)return d;var N=1;if(M===g&&(M=6),w<0?(N=0,w=-w):15<w&&(N=2,w-=16),b<1||v<b||P!==_||w<8||15<w||M<0||9<M||I<0||h<I)return Q(o,d);w===8&&(w=9);var U=new de;return(o.state=U).strm=o,U.wrap=N,U.gzhead=null,U.w_bits=w,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=b+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+C-1)/C),U.window=new i.Buf8(2*U.w_size),U.head=new i.Buf16(U.hash_size),U.prev=new i.Buf16(U.w_size),U.lit_bufsize=1<<b+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new i.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=M,U.strategy=I,U.method=P,Ee(o)}r=[new ie(0,0,0,0,function(o,M){var P=65535;for(P>o.pending_buf_size-5&&(P=o.pending_buf_size-5);;){if(o.lookahead<=1){if(le(o),o.lookahead===0&&M===p)return c;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var w=o.block_start+P;if((o.strstart===0||o.strstart>=w)&&(o.lookahead=o.strstart-w,o.strstart=w,D(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-L&&(D(o,!1),o.strm.avail_out===0))return c}return o.insert=0,M===y?(D(o,!0),o.strm.avail_out===0?X:K):(o.strstart>o.block_start&&(D(o,!1),o.strm.avail_out),c)}),new ie(4,4,8,4,me),new ie(4,5,16,8,me),new ie(4,6,32,32,me),new ie(4,4,16,16,ne),new ie(8,16,32,32,ne),new ie(8,16,128,128,ne),new ie(8,32,128,256,ne),new ie(32,128,258,1024,ne),new ie(32,258,258,4096,ne)],n.deflateInit=function(o,M){return xe(o,M,_,15,8,0)},n.deflateInit2=xe,n.deflateReset=Ee,n.deflateResetKeep=ce,n.deflateSetHeader=function(o,M){return o&&o.state?o.state.wrap!==2?d:(o.state.gzhead=M,u):d},n.deflate=function(o,M){var P,w,b,I;if(!o||!o.state||5<M||M<0)return o?Q(o,d):d;if(w=o.state,!o.output||!o.input&&o.avail_in!==0||w.status===666&&M!==y)return Q(o,o.avail_out===0?-5:d);if(w.strm=o,P=w.last_flush,w.last_flush=M,w.status===k)if(w.wrap===2)o.adler=0,J(w,31),J(w,139),J(w,8),w.gzhead?(J(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),J(w,255&w.gzhead.time),J(w,w.gzhead.time>>8&255),J(w,w.gzhead.time>>16&255),J(w,w.gzhead.time>>24&255),J(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),J(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(J(w,255&w.gzhead.extra.length),J(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(o.adler=l(o.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(J(w,0),J(w,0),J(w,0),J(w,0),J(w,0),J(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),J(w,3),w.status=T);else{var N=_+(w.w_bits-8<<4)<<8;N|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(N|=32),N+=31-N%31,w.status=T,V(w,N),w.strstart!==0&&(V(w,o.adler>>>16),V(w,65535&o.adler)),o.adler=1}if(w.status===69)if(w.gzhead.extra){for(b=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>b&&(o.adler=l(o.adler,w.pending_buf,w.pending-b,b)),B(o),b=w.pending,w.pending!==w.pending_buf_size));)J(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>b&&(o.adler=l(o.adler,w.pending_buf,w.pending-b,b)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(o.adler=l(o.adler,w.pending_buf,w.pending-b,b)),B(o),b=w.pending,w.pending===w.pending_buf_size)){I=1;break}I=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,J(w,I)}while(I!==0);w.gzhead.hcrc&&w.pending>b&&(o.adler=l(o.adler,w.pending_buf,w.pending-b,b)),I===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(o.adler=l(o.adler,w.pending_buf,w.pending-b,b)),B(o),b=w.pending,w.pending===w.pending_buf_size)){I=1;break}I=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,J(w,I)}while(I!==0);w.gzhead.hcrc&&w.pending>b&&(o.adler=l(o.adler,w.pending_buf,w.pending-b,b)),I===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&B(o),w.pending+2<=w.pending_buf_size&&(J(w,255&o.adler),J(w,o.adler>>8&255),o.adler=0,w.status=T)):w.status=T),w.pending!==0){if(B(o),o.avail_out===0)return w.last_flush=-1,u}else if(o.avail_in===0&&j(M)<=j(P)&&M!==y)return Q(o,-5);if(w.status===666&&o.avail_in!==0)return Q(o,-5);if(o.avail_in!==0||w.lookahead!==0||M!==p&&w.status!==666){var U=w.strategy===2?function(z,W){for(var $;;){if(z.lookahead===0&&(le(z),z.lookahead===0)){if(W===p)return c;break}if(z.match_length=0,$=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,$&&(D(z,!1),z.strm.avail_out===0))return c}return z.insert=0,W===y?(D(z,!0),z.strm.avail_out===0?X:K):z.last_lit&&(D(z,!1),z.strm.avail_out===0)?c:O}(w,M):w.strategy===3?function(z,W){for(var $,Z,ee,ae,re=z.window;;){if(z.lookahead<=F){if(le(z),z.lookahead<=F&&W===p)return c;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=C&&0<z.strstart&&(Z=re[ee=z.strstart-1])===re[++ee]&&Z===re[++ee]&&Z===re[++ee]){ae=z.strstart+F;do;while(Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&Z===re[++ee]&&ee<ae);z.match_length=F-(ae-ee),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=C?($=s._tr_tally(z,1,z.match_length-C),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):($=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),$&&(D(z,!1),z.strm.avail_out===0))return c}return z.insert=0,W===y?(D(z,!0),z.strm.avail_out===0?X:K):z.last_lit&&(D(z,!1),z.strm.avail_out===0)?c:O}(w,M):r[w.level].func(w,M);if(U!==X&&U!==K||(w.status=666),U===c||U===X)return o.avail_out===0&&(w.last_flush=-1),u;if(U===O&&(M===1?s._tr_align(w):M!==5&&(s._tr_stored_block(w,0,0,!1),M===3&&(Y(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),B(o),o.avail_out===0))return w.last_flush=-1,u}return M!==y?u:w.wrap<=0?1:(w.wrap===2?(J(w,255&o.adler),J(w,o.adler>>8&255),J(w,o.adler>>16&255),J(w,o.adler>>24&255),J(w,255&o.total_in),J(w,o.total_in>>8&255),J(w,o.total_in>>16&255),J(w,o.total_in>>24&255)):(V(w,o.adler>>>16),V(w,65535&o.adler)),B(o),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?u:1)},n.deflateEnd=function(o){var M;return o&&o.state?(M=o.state.status)!==k&&M!==69&&M!==73&&M!==91&&M!==103&&M!==T&&M!==666?Q(o,d):(o.state=null,M===T?Q(o,-3):u):d},n.deflateSetDictionary=function(o,M){var P,w,b,I,N,U,z,W,$=M.length;if(!o||!o.state||(I=(P=o.state).wrap)===2||I===1&&P.status!==k||P.lookahead)return d;for(I===1&&(o.adler=a(o.adler,M,$,0)),P.wrap=0,$>=P.w_size&&(I===0&&(Y(P.head),P.strstart=0,P.block_start=0,P.insert=0),W=new i.Buf8(P.w_size),i.arraySet(W,M,$-P.w_size,P.w_size,0),M=W,$=P.w_size),N=o.avail_in,U=o.next_in,z=o.input,o.avail_in=$,o.next_in=0,o.input=M,le(P);P.lookahead>=C;){for(w=P.strstart,b=P.lookahead-(C-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[w+C-1])&P.hash_mask,P.prev[w&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=w,w++,--b;);P.strstart=w,P.lookahead=C-1,le(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=C-1,P.match_available=0,o.next_in=U,o.input=z,o.avail_in=N,P.wrap=I,u},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(r,i){var s,a,l,m,p,y,u,d,g,h,f,_,v,E,x,S,A,R,C,F,L,k,T,c,O;s=r.state,a=r.next_in,c=r.input,l=a+(r.avail_in-5),m=r.next_out,O=r.output,p=m-(i-r.avail_out),y=m+(r.avail_out-257),u=s.dmax,d=s.wsize,g=s.whave,h=s.wnext,f=s.window,_=s.hold,v=s.bits,E=s.lencode,x=s.distcode,S=(1<<s.lenbits)-1,A=(1<<s.distbits)-1;e:do{v<15&&(_+=c[a++]<<v,v+=8,_+=c[a++]<<v,v+=8),R=E[_&S];t:for(;;){if(_>>>=C=R>>>24,v-=C,(C=R>>>16&255)===0)O[m++]=65535&R;else{if(!(16&C)){if((64&C)==0){R=E[(65535&R)+(_&(1<<C)-1)];continue t}if(32&C){s.mode=12;break e}r.msg="invalid literal/length code",s.mode=30;break e}F=65535&R,(C&=15)&&(v<C&&(_+=c[a++]<<v,v+=8),F+=_&(1<<C)-1,_>>>=C,v-=C),v<15&&(_+=c[a++]<<v,v+=8,_+=c[a++]<<v,v+=8),R=x[_&A];n:for(;;){if(_>>>=C=R>>>24,v-=C,!(16&(C=R>>>16&255))){if((64&C)==0){R=x[(65535&R)+(_&(1<<C)-1)];continue n}r.msg="invalid distance code",s.mode=30;break e}if(L=65535&R,v<(C&=15)&&(_+=c[a++]<<v,(v+=8)<C&&(_+=c[a++]<<v,v+=8)),u<(L+=_&(1<<C)-1)){r.msg="invalid distance too far back",s.mode=30;break e}if(_>>>=C,v-=C,(C=m-p)<L){if(g<(C=L-C)&&s.sane){r.msg="invalid distance too far back",s.mode=30;break e}if(T=f,(k=0)===h){if(k+=d-C,C<F){for(F-=C;O[m++]=f[k++],--C;);k=m-L,T=O}}else if(h<C){if(k+=d+h-C,(C-=h)<F){for(F-=C;O[m++]=f[k++],--C;);if(k=0,h<F){for(F-=C=h;O[m++]=f[k++],--C;);k=m-L,T=O}}}else if(k+=h-C,C<F){for(F-=C;O[m++]=f[k++],--C;);k=m-L,T=O}for(;2<F;)O[m++]=T[k++],O[m++]=T[k++],O[m++]=T[k++],F-=3;F&&(O[m++]=T[k++],1<F&&(O[m++]=T[k++]))}else{for(k=m-L;O[m++]=O[k++],O[m++]=O[k++],O[m++]=O[k++],2<(F-=3););F&&(O[m++]=O[k++],1<F&&(O[m++]=O[k++]))}break}}break}}while(a<l&&m<y);a-=F=v>>3,_&=(1<<(v-=F<<3))-1,r.next_in=a,r.next_out=m,r.avail_in=a<l?l-a+5:5-(a-l),r.avail_out=m<y?y-m+257:257-(m-y),s.hold=_,s.bits=v}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),a=e("./inffast"),l=e("./inftrees"),m=1,p=2,y=0,u=-2,d=1,g=852,h=592;function f(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(k){var T;return k&&k.state?(T=k.state,k.total_in=k.total_out=T.total=0,k.msg="",T.wrap&&(k.adler=1&T.wrap),T.mode=d,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new r.Buf32(g),T.distcode=T.distdyn=new r.Buf32(h),T.sane=1,T.back=-1,y):u}function E(k){var T;return k&&k.state?((T=k.state).wsize=0,T.whave=0,T.wnext=0,v(k)):u}function x(k,T){var c,O;return k&&k.state?(O=k.state,T<0?(c=0,T=-T):(c=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?u:(O.window!==null&&O.wbits!==T&&(O.window=null),O.wrap=c,O.wbits=T,E(k))):u}function S(k,T){var c,O;return k?(O=new _,(k.state=O).window=null,(c=x(k,T))!==y&&(k.state=null),c):u}var A,R,C=!0;function F(k){if(C){var T;for(A=new r.Buf32(512),R=new r.Buf32(32),T=0;T<144;)k.lens[T++]=8;for(;T<256;)k.lens[T++]=9;for(;T<280;)k.lens[T++]=7;for(;T<288;)k.lens[T++]=8;for(l(m,k.lens,0,288,A,0,k.work,{bits:9}),T=0;T<32;)k.lens[T++]=5;l(p,k.lens,0,32,R,0,k.work,{bits:5}),C=!1}k.lencode=A,k.lenbits=9,k.distcode=R,k.distbits=5}function L(k,T,c,O){var X,K=k.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new r.Buf8(K.wsize)),O>=K.wsize?(r.arraySet(K.window,T,c-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(O<(X=K.wsize-K.wnext)&&(X=O),r.arraySet(K.window,T,c-O,X,K.wnext),(O-=X)?(r.arraySet(K.window,T,c-O,O,0),K.wnext=O,K.whave=K.wsize):(K.wnext+=X,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=X))),0}n.inflateReset=E,n.inflateReset2=x,n.inflateResetKeep=v,n.inflateInit=function(k){return S(k,15)},n.inflateInit2=S,n.inflate=function(k,T){var c,O,X,K,Q,j,Y,B,D,J,V,H,le,me,ne,ie,de,ce,Ee,xe,o,M,P,w,b=0,I=new r.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return u;(c=k.state).mode===12&&(c.mode=13),Q=k.next_out,X=k.output,Y=k.avail_out,K=k.next_in,O=k.input,j=k.avail_in,B=c.hold,D=c.bits,J=j,V=Y,M=y;e:for(;;)switch(c.mode){case d:if(c.wrap===0){c.mode=13;break}for(;D<16;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(2&c.wrap&&B===35615){I[c.check=0]=255&B,I[1]=B>>>8&255,c.check=s(c.check,I,2,0),D=B=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&B)<<8)+(B>>8))%31){k.msg="incorrect header check",c.mode=30;break}if((15&B)!=8){k.msg="unknown compression method",c.mode=30;break}if(D-=4,o=8+(15&(B>>>=4)),c.wbits===0)c.wbits=o;else if(o>c.wbits){k.msg="invalid window size",c.mode=30;break}c.dmax=1<<o,k.adler=c.check=1,c.mode=512&B?10:12,D=B=0;break;case 2:for(;D<16;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(c.flags=B,(255&c.flags)!=8){k.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){k.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=B>>8&1),512&c.flags&&(I[0]=255&B,I[1]=B>>>8&255,c.check=s(c.check,I,2,0)),D=B=0,c.mode=3;case 3:for(;D<32;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}c.head&&(c.head.time=B),512&c.flags&&(I[0]=255&B,I[1]=B>>>8&255,I[2]=B>>>16&255,I[3]=B>>>24&255,c.check=s(c.check,I,4,0)),D=B=0,c.mode=4;case 4:for(;D<16;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}c.head&&(c.head.xflags=255&B,c.head.os=B>>8),512&c.flags&&(I[0]=255&B,I[1]=B>>>8&255,c.check=s(c.check,I,2,0)),D=B=0,c.mode=5;case 5:if(1024&c.flags){for(;D<16;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}c.length=B,c.head&&(c.head.extra_len=B),512&c.flags&&(I[0]=255&B,I[1]=B>>>8&255,c.check=s(c.check,I,2,0)),D=B=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(j<(H=c.length)&&(H=j),H&&(c.head&&(o=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),r.arraySet(c.head.extra,O,K,H,o)),512&c.flags&&(c.check=s(c.check,O,H,K)),j-=H,K+=H,c.length-=H),c.length))break e;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(j===0)break e;for(H=0;o=O[K+H++],c.head&&o&&c.length<65536&&(c.head.name+=String.fromCharCode(o)),o&&H<j;);if(512&c.flags&&(c.check=s(c.check,O,H,K)),j-=H,K+=H,o)break e}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(j===0)break e;for(H=0;o=O[K+H++],c.head&&o&&c.length<65536&&(c.head.comment+=String.fromCharCode(o)),o&&H<j;);if(512&c.flags&&(c.check=s(c.check,O,H,K)),j-=H,K+=H,o)break e}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;D<16;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(B!==(65535&c.check)){k.msg="header crc mismatch",c.mode=30;break}D=B=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),k.adler=c.check=0,c.mode=12;break;case 10:for(;D<32;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}k.adler=c.check=f(B),D=B=0,c.mode=11;case 11:if(c.havedict===0)return k.next_out=Q,k.avail_out=Y,k.next_in=K,k.avail_in=j,c.hold=B,c.bits=D,2;k.adler=c.check=1,c.mode=12;case 12:if(T===5||T===6)break e;case 13:if(c.last){B>>>=7&D,D-=7&D,c.mode=27;break}for(;D<3;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}switch(c.last=1&B,D-=1,3&(B>>>=1)){case 0:c.mode=14;break;case 1:if(F(c),c.mode=20,T!==6)break;B>>>=2,D-=2;break e;case 2:c.mode=17;break;case 3:k.msg="invalid block type",c.mode=30}B>>>=2,D-=2;break;case 14:for(B>>>=7&D,D-=7&D;D<32;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if((65535&B)!=(B>>>16^65535)){k.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&B,D=B=0,c.mode=15,T===6)break e;case 15:c.mode=16;case 16:if(H=c.length){if(j<H&&(H=j),Y<H&&(H=Y),H===0)break e;r.arraySet(X,O,K,H,Q),j-=H,K+=H,Y-=H,Q+=H,c.length-=H;break}c.mode=12;break;case 17:for(;D<14;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(c.nlen=257+(31&B),B>>>=5,D-=5,c.ndist=1+(31&B),B>>>=5,D-=5,c.ncode=4+(15&B),B>>>=4,D-=4,286<c.nlen||30<c.ndist){k.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;D<3;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}c.lens[N[c.have++]]=7&B,B>>>=3,D-=3}for(;c.have<19;)c.lens[N[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,P={bits:c.lenbits},M=l(0,c.lens,0,19,c.lencode,0,c.work,P),c.lenbits=P.bits,M){k.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;ie=(b=c.lencode[B&(1<<c.lenbits)-1])>>>16&255,de=65535&b,!((ne=b>>>24)<=D);){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(de<16)B>>>=ne,D-=ne,c.lens[c.have++]=de;else{if(de===16){for(w=ne+2;D<w;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(B>>>=ne,D-=ne,c.have===0){k.msg="invalid bit length repeat",c.mode=30;break}o=c.lens[c.have-1],H=3+(3&B),B>>>=2,D-=2}else if(de===17){for(w=ne+3;D<w;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}D-=ne,o=0,H=3+(7&(B>>>=ne)),B>>>=3,D-=3}else{for(w=ne+7;D<w;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}D-=ne,o=0,H=11+(127&(B>>>=ne)),B>>>=7,D-=7}if(c.have+H>c.nlen+c.ndist){k.msg="invalid bit length repeat",c.mode=30;break}for(;H--;)c.lens[c.have++]=o}}if(c.mode===30)break;if(c.lens[256]===0){k.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,P={bits:c.lenbits},M=l(m,c.lens,0,c.nlen,c.lencode,0,c.work,P),c.lenbits=P.bits,M){k.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,P={bits:c.distbits},M=l(p,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,P),c.distbits=P.bits,M){k.msg="invalid distances set",c.mode=30;break}if(c.mode=20,T===6)break e;case 20:c.mode=21;case 21:if(6<=j&&258<=Y){k.next_out=Q,k.avail_out=Y,k.next_in=K,k.avail_in=j,c.hold=B,c.bits=D,a(k,V),Q=k.next_out,X=k.output,Y=k.avail_out,K=k.next_in,O=k.input,j=k.avail_in,B=c.hold,D=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;ie=(b=c.lencode[B&(1<<c.lenbits)-1])>>>16&255,de=65535&b,!((ne=b>>>24)<=D);){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(ie&&(240&ie)==0){for(ce=ne,Ee=ie,xe=de;ie=(b=c.lencode[xe+((B&(1<<ce+Ee)-1)>>ce)])>>>16&255,de=65535&b,!(ce+(ne=b>>>24)<=D);){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}B>>>=ce,D-=ce,c.back+=ce}if(B>>>=ne,D-=ne,c.back+=ne,c.length=de,ie===0){c.mode=26;break}if(32&ie){c.back=-1,c.mode=12;break}if(64&ie){k.msg="invalid literal/length code",c.mode=30;break}c.extra=15&ie,c.mode=22;case 22:if(c.extra){for(w=c.extra;D<w;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}c.length+=B&(1<<c.extra)-1,B>>>=c.extra,D-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;ie=(b=c.distcode[B&(1<<c.distbits)-1])>>>16&255,de=65535&b,!((ne=b>>>24)<=D);){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if((240&ie)==0){for(ce=ne,Ee=ie,xe=de;ie=(b=c.distcode[xe+((B&(1<<ce+Ee)-1)>>ce)])>>>16&255,de=65535&b,!(ce+(ne=b>>>24)<=D);){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}B>>>=ce,D-=ce,c.back+=ce}if(B>>>=ne,D-=ne,c.back+=ne,64&ie){k.msg="invalid distance code",c.mode=30;break}c.offset=de,c.extra=15&ie,c.mode=24;case 24:if(c.extra){for(w=c.extra;D<w;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}c.offset+=B&(1<<c.extra)-1,B>>>=c.extra,D-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){k.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(Y===0)break e;if(H=V-Y,c.offset>H){if((H=c.offset-H)>c.whave&&c.sane){k.msg="invalid distance too far back",c.mode=30;break}le=H>c.wnext?(H-=c.wnext,c.wsize-H):c.wnext-H,H>c.length&&(H=c.length),me=c.window}else me=X,le=Q-c.offset,H=c.length;for(Y<H&&(H=Y),Y-=H,c.length-=H;X[Q++]=me[le++],--H;);c.length===0&&(c.mode=21);break;case 26:if(Y===0)break e;X[Q++]=c.length,Y--,c.mode=21;break;case 27:if(c.wrap){for(;D<32;){if(j===0)break e;j--,B|=O[K++]<<D,D+=8}if(V-=Y,k.total_out+=V,c.total+=V,V&&(k.adler=c.check=c.flags?s(c.check,X,V,Q-V):i(c.check,X,V,Q-V)),V=Y,(c.flags?B:f(B))!==c.check){k.msg="incorrect data check",c.mode=30;break}D=B=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;D<32;){if(j===0)break e;j--,B+=O[K++]<<D,D+=8}if(B!==(4294967295&c.total)){k.msg="incorrect length check",c.mode=30;break}D=B=0}c.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;case 32:default:return u}return k.next_out=Q,k.avail_out=Y,k.next_in=K,k.avail_in=j,c.hold=B,c.bits=D,(c.wsize||V!==k.avail_out&&c.mode<30&&(c.mode<27||T!==4))&&L(k,k.output,k.next_out,V-k.avail_out)?(c.mode=31,-4):(J-=k.avail_in,V-=k.avail_out,k.total_in+=J,k.total_out+=V,c.total+=V,c.wrap&&V&&(k.adler=c.check=c.flags?s(c.check,X,V,k.next_out-V):i(c.check,X,V,k.next_out-V)),k.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(J==0&&V===0||T===4)&&M===y&&(M=-5),M)},n.inflateEnd=function(k){if(!k||!k.state)return u;var T=k.state;return T.window&&(T.window=null),k.state=null,y},n.inflateGetHeader=function(k,T){var c;return k&&k.state?(2&(c=k.state).wrap)==0?u:((c.head=T).done=!1,y):u},n.inflateSetDictionary=function(k,T){var c,O=T.length;return k&&k.state?(c=k.state).wrap!==0&&c.mode!==11?u:c.mode===11&&i(1,T,O,0)!==c.check?-3:L(k,T,O,O)?(c.mode=31,-4):(c.havedict=1,y):u},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(m,p,y,u,d,g,h,f){var _,v,E,x,S,A,R,C,F,L=f.bits,k=0,T=0,c=0,O=0,X=0,K=0,Q=0,j=0,Y=0,B=0,D=null,J=0,V=new r.Buf16(16),H=new r.Buf16(16),le=null,me=0;for(k=0;k<=15;k++)V[k]=0;for(T=0;T<u;T++)V[p[y+T]]++;for(X=L,O=15;1<=O&&V[O]===0;O--);if(O<X&&(X=O),O===0)return d[g++]=20971520,d[g++]=20971520,f.bits=1,0;for(c=1;c<O&&V[c]===0;c++);for(X<c&&(X=c),k=j=1;k<=15;k++)if(j<<=1,(j-=V[k])<0)return-1;if(0<j&&(m===0||O!==1))return-1;for(H[1]=0,k=1;k<15;k++)H[k+1]=H[k]+V[k];for(T=0;T<u;T++)p[y+T]!==0&&(h[H[p[y+T]]++]=T);if(A=m===0?(D=le=h,19):m===1?(D=i,J-=257,le=s,me-=257,256):(D=a,le=l,-1),k=c,S=g,Q=T=B=0,E=-1,x=(Y=1<<(K=X))-1,m===1&&852<Y||m===2&&592<Y)return 1;for(;;){for(R=k-Q,F=h[T]<A?(C=0,h[T]):h[T]>A?(C=le[me+h[T]],D[J+h[T]]):(C=96,0),_=1<<k-Q,c=v=1<<K;d[S+(B>>Q)+(v-=_)]=R<<24|C<<16|F|0,v!==0;);for(_=1<<k-1;B&_;)_>>=1;if(_!==0?(B&=_-1,B+=_):B=0,T++,--V[k]==0){if(k===O)break;k=p[y+h[T]]}if(X<k&&(B&x)!==E){for(Q===0&&(Q=X),S+=c,j=1<<(K=k-Q);K+Q<O&&!((j-=V[K+Q])<=0);)K++,j<<=1;if(Y+=1<<K,m===1&&852<Y||m===2&&592<Y)return 1;d[E=B&x]=X<<24|K<<16|S-g|0}}return B!==0&&(d[S+B]=k-Q<<24|64<<16|0),f.bits=X,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,s=1;function a(b){for(var I=b.length;0<=--I;)b[I]=0}var l=0,m=29,p=256,y=p+1+m,u=30,d=19,g=2*y+1,h=15,f=16,_=7,v=256,E=16,x=17,S=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(y+2));a(L);var k=new Array(2*u);a(k);var T=new Array(512);a(T);var c=new Array(256);a(c);var O=new Array(m);a(O);var X,K,Q,j=new Array(u);function Y(b,I,N,U,z){this.static_tree=b,this.extra_bits=I,this.extra_base=N,this.elems=U,this.max_length=z,this.has_stree=b&&b.length}function B(b,I){this.dyn_tree=b,this.max_code=0,this.stat_desc=I}function D(b){return b<256?T[b]:T[256+(b>>>7)]}function J(b,I){b.pending_buf[b.pending++]=255&I,b.pending_buf[b.pending++]=I>>>8&255}function V(b,I,N){b.bi_valid>f-N?(b.bi_buf|=I<<b.bi_valid&65535,J(b,b.bi_buf),b.bi_buf=I>>f-b.bi_valid,b.bi_valid+=N-f):(b.bi_buf|=I<<b.bi_valid&65535,b.bi_valid+=N)}function H(b,I,N){V(b,N[2*I],N[2*I+1])}function le(b,I){for(var N=0;N|=1&b,b>>>=1,N<<=1,0<--I;);return N>>>1}function me(b,I,N){var U,z,W=new Array(h+1),$=0;for(U=1;U<=h;U++)W[U]=$=$+N[U-1]<<1;for(z=0;z<=I;z++){var Z=b[2*z+1];Z!==0&&(b[2*z]=le(W[Z]++,Z))}}function ne(b){var I;for(I=0;I<y;I++)b.dyn_ltree[2*I]=0;for(I=0;I<u;I++)b.dyn_dtree[2*I]=0;for(I=0;I<d;I++)b.bl_tree[2*I]=0;b.dyn_ltree[2*v]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function ie(b){8<b.bi_valid?J(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function de(b,I,N,U){var z=2*I,W=2*N;return b[z]<b[W]||b[z]===b[W]&&U[I]<=U[N]}function ce(b,I,N){for(var U=b.heap[N],z=N<<1;z<=b.heap_len&&(z<b.heap_len&&de(I,b.heap[z+1],b.heap[z],b.depth)&&z++,!de(I,U,b.heap[z],b.depth));)b.heap[N]=b.heap[z],N=z,z<<=1;b.heap[N]=U}function Ee(b,I,N){var U,z,W,$,Z=0;if(b.last_lit!==0)for(;U=b.pending_buf[b.d_buf+2*Z]<<8|b.pending_buf[b.d_buf+2*Z+1],z=b.pending_buf[b.l_buf+Z],Z++,U===0?H(b,z,I):(H(b,(W=c[z])+p+1,I),($=A[W])!==0&&V(b,z-=O[W],$),H(b,W=D(--U),N),($=R[W])!==0&&V(b,U-=j[W],$)),Z<b.last_lit;);H(b,v,I)}function xe(b,I){var N,U,z,W=I.dyn_tree,$=I.stat_desc.static_tree,Z=I.stat_desc.has_stree,ee=I.stat_desc.elems,ae=-1;for(b.heap_len=0,b.heap_max=g,N=0;N<ee;N++)W[2*N]!==0?(b.heap[++b.heap_len]=ae=N,b.depth[N]=0):W[2*N+1]=0;for(;b.heap_len<2;)W[2*(z=b.heap[++b.heap_len]=ae<2?++ae:0)]=1,b.depth[z]=0,b.opt_len--,Z&&(b.static_len-=$[2*z+1]);for(I.max_code=ae,N=b.heap_len>>1;1<=N;N--)ce(b,W,N);for(z=ee;N=b.heap[1],b.heap[1]=b.heap[b.heap_len--],ce(b,W,1),U=b.heap[1],b.heap[--b.heap_max]=N,b.heap[--b.heap_max]=U,W[2*z]=W[2*N]+W[2*U],b.depth[z]=(b.depth[N]>=b.depth[U]?b.depth[N]:b.depth[U])+1,W[2*N+1]=W[2*U+1]=z,b.heap[1]=z++,ce(b,W,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function(re,we){var ot,Ce,ut,he,Tt,nn,Te=we.dyn_tree,Yn=we.max_code,Jr=we.stat_desc.static_tree,qr=we.stat_desc.has_stree,Qr=we.stat_desc.extra_bits,Xn=we.stat_desc.extra_base,lt=we.stat_desc.max_length,zt=0;for(he=0;he<=h;he++)re.bl_count[he]=0;for(Te[2*re.heap[re.heap_max]+1]=0,ot=re.heap_max+1;ot<g;ot++)lt<(he=Te[2*Te[2*(Ce=re.heap[ot])+1]+1]+1)&&(he=lt,zt++),Te[2*Ce+1]=he,Yn<Ce||(re.bl_count[he]++,Tt=0,Xn<=Ce&&(Tt=Qr[Ce-Xn]),nn=Te[2*Ce],re.opt_len+=nn*(he+Tt),qr&&(re.static_len+=nn*(Jr[2*Ce+1]+Tt)));if(zt!==0){do{for(he=lt-1;re.bl_count[he]===0;)he--;re.bl_count[he]--,re.bl_count[he+1]+=2,re.bl_count[lt]--,zt-=2}while(0<zt);for(he=lt;he!==0;he--)for(Ce=re.bl_count[he];Ce!==0;)Yn<(ut=re.heap[--ot])||(Te[2*ut+1]!==he&&(re.opt_len+=(he-Te[2*ut+1])*Te[2*ut],Te[2*ut+1]=he),Ce--)}}(b,I),me(W,ae,b.bl_count)}function o(b,I,N){var U,z,W=-1,$=I[1],Z=0,ee=7,ae=4;for($===0&&(ee=138,ae=3),I[2*(N+1)+1]=65535,U=0;U<=N;U++)z=$,$=I[2*(U+1)+1],++Z<ee&&z===$||(Z<ae?b.bl_tree[2*z]+=Z:z!==0?(z!==W&&b.bl_tree[2*z]++,b.bl_tree[2*E]++):Z<=10?b.bl_tree[2*x]++:b.bl_tree[2*S]++,W=z,ae=(Z=0)===$?(ee=138,3):z===$?(ee=6,3):(ee=7,4))}function M(b,I,N){var U,z,W=-1,$=I[1],Z=0,ee=7,ae=4;for($===0&&(ee=138,ae=3),U=0;U<=N;U++)if(z=$,$=I[2*(U+1)+1],!(++Z<ee&&z===$)){if(Z<ae)for(;H(b,z,b.bl_tree),--Z!=0;);else z!==0?(z!==W&&(H(b,z,b.bl_tree),Z--),H(b,E,b.bl_tree),V(b,Z-3,2)):Z<=10?(H(b,x,b.bl_tree),V(b,Z-3,3)):(H(b,S,b.bl_tree),V(b,Z-11,7));W=z,ae=(Z=0)===$?(ee=138,3):z===$?(ee=6,3):(ee=7,4)}}a(j);var P=!1;function w(b,I,N,U){V(b,(l<<1)+(U?1:0),3),function(z,W,$,Z){ie(z),Z&&(J(z,$),J(z,~$)),r.arraySet(z.pending_buf,z.window,W,$,z.pending),z.pending+=$}(b,I,N,!0)}n._tr_init=function(b){P||(function(){var I,N,U,z,W,$=new Array(h+1);for(z=U=0;z<m-1;z++)for(O[z]=U,I=0;I<1<<A[z];I++)c[U++]=z;for(c[U-1]=z,z=W=0;z<16;z++)for(j[z]=W,I=0;I<1<<R[z];I++)T[W++]=z;for(W>>=7;z<u;z++)for(j[z]=W<<7,I=0;I<1<<R[z]-7;I++)T[256+W++]=z;for(N=0;N<=h;N++)$[N]=0;for(I=0;I<=143;)L[2*I+1]=8,I++,$[8]++;for(;I<=255;)L[2*I+1]=9,I++,$[9]++;for(;I<=279;)L[2*I+1]=7,I++,$[7]++;for(;I<=287;)L[2*I+1]=8,I++,$[8]++;for(me(L,y+1,$),I=0;I<u;I++)k[2*I+1]=5,k[2*I]=le(I,5);X=new Y(L,A,p+1,y,h),K=new Y(k,R,0,u,h),Q=new Y(new Array(0),C,0,d,_)}(),P=!0),b.l_desc=new B(b.dyn_ltree,X),b.d_desc=new B(b.dyn_dtree,K),b.bl_desc=new B(b.bl_tree,Q),b.bi_buf=0,b.bi_valid=0,ne(b)},n._tr_stored_block=w,n._tr_flush_block=function(b,I,N,U){var z,W,$=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(Z){var ee,ae=4093624447;for(ee=0;ee<=31;ee++,ae>>>=1)if(1&ae&&Z.dyn_ltree[2*ee]!==0)return i;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return s;for(ee=32;ee<p;ee++)if(Z.dyn_ltree[2*ee]!==0)return s;return i}(b)),xe(b,b.l_desc),xe(b,b.d_desc),$=function(Z){var ee;for(o(Z,Z.dyn_ltree,Z.l_desc.max_code),o(Z,Z.dyn_dtree,Z.d_desc.max_code),xe(Z,Z.bl_desc),ee=d-1;3<=ee&&Z.bl_tree[2*F[ee]+1]===0;ee--);return Z.opt_len+=3*(ee+1)+5+5+4,ee}(b),z=b.opt_len+3+7>>>3,(W=b.static_len+3+7>>>3)<=z&&(z=W)):z=W=N+5,N+4<=z&&I!==-1?w(b,I,N,U):b.strategy===4||W===z?(V(b,2+(U?1:0),3),Ee(b,L,k)):(V(b,4+(U?1:0),3),function(Z,ee,ae,re){var we;for(V(Z,ee-257,5),V(Z,ae-1,5),V(Z,re-4,4),we=0;we<re;we++)V(Z,Z.bl_tree[2*F[we]+1],3);M(Z,Z.dyn_ltree,ee-1),M(Z,Z.dyn_dtree,ae-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,$+1),Ee(b,b.dyn_ltree,b.dyn_dtree)),ne(b),U&&ie(b)},n._tr_tally=function(b,I,N){return b.pending_buf[b.d_buf+2*b.last_lit]=I>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&I,b.pending_buf[b.l_buf+b.last_lit]=255&N,b.last_lit++,I===0?b.dyn_ltree[2*N]++:(b.matches++,I--,b.dyn_ltree[2*(c[N]+p+1)]++,b.dyn_dtree[2*D(I)]++),b.last_lit===b.lit_bufsize-1},n._tr_align=function(b){V(b,2,3),H(b,v,L),function(I){I.bi_valid===16?(J(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){"use strict";t.exports=typeof setImmediate=="function"?setImmediate:function(){var r=[].slice.apply(arguments);r.splice(1,0,0),setTimeout.apply(null,r)}},{}]},{},[10])(10)})});function Jn(e){return e?e.type==="start"&&typeof e.id=="string"&&e.file instanceof File:!1}var Xr=ui(Qn());function Je(e){if(!e.startsWith("/"))return;let t=e.substring(1).split("/");for(let n=1;n<=t.length;n++){let r="/"+t.slice(0,n).join("/");li(r)||FS.mkdir(r)}}function er(e){let t=e.split("/");return t.slice(0,t.length-1).join("/")}function li(e){try{return FS.stat(e),!0}catch(t){return!1}}function tr(e){try{return FS.unmount(e),!0}catch(t){console.error(t)}return!1}function nr(e){try{return FS.mount(IDBFS,{},e),!0}catch(t){console.error(t)}return!1}var oe=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,fe=Object.keys,ge=Array.isArray;typeof Promise!="undefined"&&!oe.Promise&&(oe.Promise=Promise);function _e(e,t){return typeof t!="object"||fe(t).forEach(function(n){e[n]=t[n]}),e}var ht=Object.getPrototypeOf,ci={}.hasOwnProperty;function ke(e,t){return ci.call(e,t)}function qe(e,t){typeof t=="function"&&(t=t(ht(e))),(typeof Reflect=="undefined"?fe:Reflect.ownKeys)(t).forEach(n=>{ze(e,n,t[n])})}var rr=Object.defineProperty;function ze(e,t,n,r){rr(e,t,_e(n&&ke(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Qe(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ze(e.prototype,"constructor",e),{extend:qe.bind(null,e.prototype)}}}}var hi=Object.getOwnPropertyDescriptor;function an(e,t){let n=hi(e,t),r;return n||(r=ht(e))&&an(r,t)}var fi=[].slice;function Ot(e,t,n){return fi.call(e,t,n)}function ir(e,t){return t(e)}function ft(e){if(!e)throw new Error("Assertion Failed")}function sr(e){oe.setImmediate?setImmediate(e):setTimeout(e,0)}function ar(e,t){return e.reduce((n,r,i)=>{var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function di(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function Oe(e,t){if(ke(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=Oe(e,t[r]);n.push(s)}return n}var a=t.indexOf(".");if(a!==-1){var l=e[t.substr(0,a)];return l===void 0?void 0:Oe(l,t.substr(a+1))}}function Se(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ft(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Se(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var a=t.substr(0,s),l=t.substr(s+1);if(l==="")n===void 0?ge(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var m=e[a];m||(m=e[a]={}),Se(m,l,n)}}else n===void 0?ge(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function pi(e,t){typeof t=="string"?Se(e,t,void 0):"length"in t&&[].map.call(t,function(n){Se(e,n,void 0)})}function or(e){var t={};for(var n in e)ke(e,n)&&(t[n]=e[n]);return t}var mi=[].concat;function ur(e){return mi.apply([],e)}var lr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ur([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>oe[e]),gi=lr.map(e=>oe[e]);ar(lr,e=>[e,!0]);var Ke=null;function dt(e){Ke=typeof WeakMap!="undefined"&&new WeakMap;let t=on(e);return Ke=null,t}function on(e){if(!e||typeof e!="object")return e;let t=Ke&&Ke.get(e);if(t)return t;if(ge(e)){t=[],Ke&&Ke.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(on(e[n]))}else if(gi.indexOf(e.constructor)>=0)t=e;else{let s=ht(e);t=s===Object.prototype?{}:Object.create(s),Ke&&Ke.set(e,t);for(var i in e)ke(e,i)&&(t[i]=on(e[i]))}return t}var{toString:yi}={};function un(e){return yi.call(e).slice(8,-1)}var ln=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",_i=typeof ln=="symbol"?function(e){var t;return e!=null&&(t=e[ln])&&t.apply(e)}:function(){return null},et={};function Re(e){var t,n,r,i;if(arguments.length===1){if(ge(e))return e.slice();if(this===et&&typeof e=="string")return[e];if(i=_i(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var cn=typeof Symbol!="undefined"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1,Ae=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function cr(e,t){Ae=e,hr=t}var hr=()=>!0,vi=!new Error("").stack;function Ze(){if(vi)try{throw Ze.arguments,new Error}catch(e){return e}return new Error}function hn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(hr).map(r=>`
`+r).join("")):""}var bi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],fr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fn=bi.concat(fr),wi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function tt(e,t){this._e=Ze(),this.name=e,this.message=t}Qe(tt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+hn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function dr(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Rt(e,t,n,r){this._e=Ze(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=dr(e,t)}Qe(Rt).from(tt);function pt(e,t){this._e=Ze(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=dr(e,t)}Qe(pt).from(tt);var ki=fn.reduce((e,t)=>(e[t]=t+"Error",e),{}),xi=tt,te=fn.reduce((e,t)=>{var n=t+"Error";function r(i,s){this._e=Ze(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=wi[t]||n,this.inner=null)}return Qe(r).from(xi),e[t]=r,e},{});te.Syntax=SyntaxError;te.Type=TypeError;te.Range=RangeError;var pr=fr.reduce((e,t)=>(e[t+"Error"]=te[t],e),{});function Si(e,t){if(!e||e instanceof tt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!pr[e.name])return e;var n=new pr[e.name](t||e.message,e);return"stack"in e&&ze(n,"stack",{get:function(){return this.inner.stack}}),n}var Dt=fn.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=te[t]),e),{});Dt.ModifyError=Rt;Dt.DexieError=tt;Dt.BulkError=pt;function se(){}function mt(e){return e}function Ei(e,t){return e==null||e===mt?t:function(n){return t(e(n))}}function He(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ci(e,t){return e===se?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?He(r,this.onsuccess):r),i&&(this.onerror=this.onerror?He(i,this.onerror):i),s!==void 0?s:n}}function Ai(e,t){return e===se?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?He(n,this.onsuccess):n),r&&(this.onerror=this.onerror?He(r,this.onerror):r)}}function Ii(e,t){return e===se?t:function(n){var r=e.apply(this,arguments);_e(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?He(i,this.onsuccess):i),s&&(this.onerror=this.onerror?He(s,this.onerror):s),r===void 0?a===void 0?void 0:a:_e(r,a)}}function Ti(e,t){return e===se?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function dn(e,t){return e===se?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}var gt={},zi=100,Oi=20,mr=100,[pn,Bt,mn]=typeof Promise=="undefined"?[]:(()=>{let e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,ht(e),e];let t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ht(t),e]})(),gr=Bt&&Bt.then,Pt=pn&&pn.constructor,gn=!!mn,yn=!1,Ri=mn?()=>{mn.then(Nt)}:oe.setImmediate?setImmediate.bind(null,Nt):oe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Nt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Nt,0)},yt=function(e,t){_t.push([e,t]),Ft&&(Ri(),Ft=!1)},_n=!0,Ft=!0,Ve=[],Mt=[],vn=null,bn=mt,nt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Cr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Cr(e[0],e[1])}catch{}})}},q=nt,_t=[],$e=0,Kt=[];function G(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=se,this._lib=!1;var t=this._PSD=q;if(Ae&&(this._stackHolder=Ze(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==gt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&kn(this,this._value);return}this._state=null,this._value=null,++t.ref,_r(this,e)}var wn={get:function(){var e=q,t=Lt;function n(r,i){var s=!e.global&&(e!==q||t!==Lt);let a=s&&!De();var l=new G((m,p)=>{xn(this,new yr(Zt(r,e,s,a),Zt(i,e,s,a),m,p,e))});return Ae&&wr(l,this),l}return n.prototype=gt,n},set:function(e){ze(this,"then",e&&e.prototype===gt?wn:{get:function(){return e},set:wn.set})}};qe(G.prototype,{then:wn,_then:function(e,t){xn(this,new yr(null,null,e,t,q))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):jt(r)):this.then(null,r=>r&&r.name===t?n(r):jt(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),jt(t)))},stack:{get:function(){if(this._stack)return this._stack;try{yn=!0;var e=br(this,[],Oi),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{yn=!1}}},timeout:function(e,t){return e<1/0?new G((n,r)=>{var i=setTimeout(()=>r(new te.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&ze(G.prototype,Symbol.toStringTag,"Dexie.Promise");nt.env=kr();function yr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}qe(G,{all:function(){var e=Re.apply(null,arguments).map(Wt);return new G(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,s)=>G.resolve(i).then(a=>{e[s]=a,--r||t(e)},n))})},resolve:e=>{if(e instanceof G)return e;if(e&&typeof e.then=="function")return new G((n,r)=>{e.then(n,r)});var t=new G(gt,!0,e);return wr(t,vn),t},reject:jt,race:function(){var e=Re.apply(null,arguments).map(Wt);return new G((t,n)=>{e.map(r=>G.resolve(r).then(t,n))})},PSD:{get:()=>q,set:e=>q=e},totalEchoes:{get:()=>Lt},newPSD:Ne,usePSD:it,scheduler:{get:()=>yt,set:e=>{yt=e}},rejectionMapper:{get:()=>bn,set:e=>{bn=e}},follow:(e,t)=>new G((n,r)=>Ne((i,s)=>{var a=q;a.unhandleds=[],a.onunhandled=s,a.finalize=He(function(){Bi(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},a.finalize),e()},t,n,r))});Pt&&(Pt.allSettled&&ze(G,"allSettled",function(){let e=Re.apply(null,arguments).map(Wt);return new G(t=>{e.length===0&&t([]);let n=e.length,r=new Array(n);e.forEach((i,s)=>G.resolve(i).then(a=>r[s]={status:"fulfilled",value:a},a=>r[s]={status:"rejected",reason:a}).then(()=>--n||t(r)))})}),Pt.any&&typeof AggregateError!="undefined"&&ze(G,"any",function(){let e=Re.apply(null,arguments).map(Wt);return new G((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length,i=new Array(r);e.forEach((s,a)=>G.resolve(s).then(l=>t(l),l=>{i[a]=l,--r||n(new AggregateError(i))}))})}));function _r(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&vt();n&&typeof n.then=="function"?_r(e,(i,s)=>{n instanceof G?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,vr(e)),r&&bt()}},kn.bind(null,e))}catch(n){kn(e,n)}}function kn(e,t){if(Mt.push(t),e._state===null){var n=e._lib&&vt();t=bn(t),e._state=!1,e._value=t,Ae&&t!==null&&typeof t=="object"&&!t._promise&&di(()=>{var r=an(t,"stack");t._promise=e,ze(t,"stack",{get:()=>yn?r&&(r.get?r.get.apply(t):r.value):e.stack})}),Pi(e),vr(e),n&&bt()}}function vr(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)xn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),$e===0&&(++$e,yt(()=>{--$e===0&&Sn()},[]))}function xn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++$e,yt(Di,[n,e,t])}function Di(e,t,n){try{vn=t;var r,i=t._value;t._state?r=e(i):(Mt.length&&(Mt=[]),r=e(i),Mt.indexOf(i)===-1&&Fi(t)),n.resolve(r)}catch(s){n.reject(s)}finally{vn=null,--$e===0&&Sn(),--n.psd.ref||n.psd.finalize()}}function br(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,s,a;i!=null?(s=i.name||"Error",a=i.message||i,r=hn(i,0)):(s=i,a=""),t.push(s+(a?": "+a:"")+r)}return Ae&&(r=hn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&br(e._prev,t,n)),t}function wr(e,t){var n=t?t._numPrev+1:0;n<zi&&(e._prev=t,e._numPrev=n)}function Nt(){vt()&&bt()}function vt(){var e=_n;return _n=!1,Ft=!1,e}function bt(){var e,t,n;do for(;_t.length>0;)for(e=_t,_t=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(_t.length>0);_n=!0,Ft=!0}function Sn(){var e=Ve;Ve=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Kt.slice(0),n=t.length;n;)t[--n]()}function Bi(e){function t(){e(),Kt.splice(Kt.indexOf(t),1)}Kt.push(t),++$e,yt(()=>{--$e===0&&Sn()},[])}function Pi(e){Ve.some(t=>t._value===e._value)||Ve.push(e)}function Fi(e){for(var t=Ve.length;t;)if(Ve[--t]._value===e._value){Ve.splice(t,1);return}}function jt(e){return new G(gt,!1,e)}function ue(e,t){var n=q;return function(){var r=vt(),i=q;try{return je(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{je(i,!1),r&&bt()}}}var ye={awaits:0,echoes:0,id:0},Mi=0,Ut=[],En=0,Lt=0,Ki=0;function Ne(e,t,n,r){var i=q,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Ki;var a=nt.env;s.env=gn?{Promise:G,PromiseProp:{value:G,configurable:!0,writable:!0},all:G.all,race:G.race,allSettled:G.allSettled,any:G.any,resolve:G.resolve,reject:G.reject,nthen:Sr(a.nthen,s),gthen:Sr(a.gthen,s)}:{},t&&_e(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=it(s,e,n,r);return s.ref===0&&s.finalize(),l}function rt(){return ye.id||(ye.id=++Mi),++ye.awaits,ye.echoes+=mr,ye.id}function De(){return ye.awaits?(--ye.awaits===0&&(ye.id=0),ye.echoes=ye.awaits*mr,!0):!1}(""+gr).indexOf("[native code]")===-1&&(rt=De=se);function Wt(e){return ye.echoes&&e&&e.constructor===Pt?(rt(),e.then(t=>(De(),t),t=>(De(),pe(t)))):e}function Ni(e){++Lt,(!ye.echoes||--ye.echoes===0)&&(ye.echoes=ye.id=0),Ut.push(q),je(e,!0)}function ji(){var e=Ut[Ut.length-1];Ut.pop(),je(e,!1)}function je(e,t){var n=q;if((t?ye.echoes&&(!En++||e!==q):En&&(!--En||e!==q))&&xr(t?Ni.bind(null,e):ji),e!==q&&(q=e,n===nt&&(nt.env=kr()),gn)){var r=nt.env.Promise,i=e.env;Bt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(oe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function kr(){var e=oe.Promise;return gn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(oe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Bt.then,gthen:e.prototype.then}:{}}function it(e,t,n,r,i){var s=q;try{return je(e,!0),t(n,r,i)}finally{je(s,!1)}}function xr(e){gr.call(pn,e)}function Zt(e,t,n,r){return typeof e!="function"?e:function(){var i=q;n&&rt(),je(t,!0);try{return e.apply(this,arguments)}finally{je(i,!1),r&&xr(De)}}}function Sr(e,t){return function(n,r){return e.call(this,Zt(n,t),Zt(r,t))}}var Er="unhandledrejection";function Cr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(oe.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Er,!0,!0),_e(r,i)):oe.CustomEvent&&(r=new CustomEvent(Er,{detail:i}),_e(r,i)),r&&oe.dispatchEvent&&(dispatchEvent(r),!oe.PromiseRejectionEvent&&oe.onunhandledrejection))try{oe.onunhandledrejection(r)}catch{}Ae&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var pe=G.reject;function Ar(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!q.letThrough&&!e._vip){if(e._state.openComplete)return pe(new te.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return pe(new te.DatabaseClosed);e.open().catch(se)}return e._state.dbReadyPromise.then(()=>Ar(e,t,n,r))}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create()}catch(s){return pe(s)}return i._promise(t,(s,a)=>Ne(()=>(q.trans=i,r(s,a,i)))).then(s=>i._completion.then(()=>s))}}var Ir="3.2.0",Ge=String.fromCharCode(65535),Cn=-1/0,Be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Tr="String expected.",wt=[],Ht=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ui=Ht,Li=Ht,zr=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Vt="__dbnames",An="readonly",In="readwrite";function Ye(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Or={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function $t(e){return typeof e=="string"&&!/\./.test(e)?t=>(t[e]===void 0&&e in t&&(t=dt(t),delete t[e]),t):t=>t}var Rr=class{_trans(t,n,r){let i=this._tx||q.trans,s=this.name;function a(m,p,y){if(!y.schema[s])throw new te.NotFound("Table "+s+" not part of transaction");return n(y.idbtrans,y)}let l=vt();try{return i&&i.db===this.db?i===q.trans?i._promise(t,a,r):Ne(()=>i._promise(t,a,r),{trans:i,transless:q.transless||q}):Ar(this.db,t,[this.name],a)}finally{l&&bt()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(ge(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);let n=fe(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);let r=this.schema.indexes.concat(this.schema.primKey).filter(p=>p.compound&&n.every(y=>p.keyPath.indexOf(y)>=0)&&p.keyPath.every(y=>n.indexOf(y)>=0))[0];if(r&&this.db._maxKey!==Ge)return this.where(r.name).equals(r.keyPath.map(p=>t[p]));!r&&Ae&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function a(p,y){try{return s.cmp(p,y)===0}catch{return!1}}let[l,m]=n.reduce(([p,y],u)=>{let d=i[u],g=t[u];return[p||d,p||!d?Ye(y,d&&d.multi?h=>{let f=Oe(h,u);return ge(f)&&f.some(_=>a(g,_))}:h=>a(g,Oe(h,u))):y]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(m):r?this.filter(m):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,ge(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;let n=r=>{if(!r)return r;let i=Object.create(t.prototype);for(var s in r)if(ke(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){function t(n){_e(this,n)}return this.mapToClass(t)}add(t,n){let{auto:r,keyPath:i}=this.schema.primKey,s=t;return i&&r&&(s=$t(i)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[s]})).then(a=>a.numFailures?G.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Se(t,i,a)}catch{}return a})}update(t,n){if(typeof t=="object"&&!ge(t)){let r=Oe(t,this.schema.primKey.keyPath);if(r===void 0)return pe(new te.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?fe(n).forEach(i=>{Se(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)}put(t,n){let{auto:r,keyPath:i}=this.schema.primKey,s=t;return i&&r&&(s=$t(i)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[s],keys:n!=null?[n]:null})).then(a=>a.numFailures?G.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Se(t,i,a)}catch{}return a})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?G.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:Or})).then(t=>t.numFailures?G.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let s=r?r.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:l,keyPath:m}=this.schema.primKey;if(m&&i)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");let p=t.length,y=m&&l?t.map($t(m)):t;return this.core.mutate({trans:a,type:"add",keys:i,values:y,wantResults:s}).then(({numFailures:u,results:d,lastResult:g,failures:h})=>{let f=s?d:g;if(u===0)return f;throw new pt(`${this.name}.bulkAdd(): ${u} of ${p} operations failed`,h)})})}bulkPut(t,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let s=r?r.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:l,keyPath:m}=this.schema.primKey;if(m&&i)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");let p=t.length,y=m&&l?t.map($t(m)):t;return this.core.mutate({trans:a,type:"put",keys:i,values:y,wantResults:s}).then(({numFailures:u,results:d,lastResult:g,failures:h})=>{let f=s?d:g;if(u===0)return f;throw new pt(`${this.name}.bulkPut(): ${u} of ${p} operations failed`,h)})})}bulkDelete(t){let n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new pt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}};function kt(e){var t={},n=function(l,m){if(m){for(var p=arguments.length,y=new Array(p-1);--p;)y[p-1]=arguments[p];return t[l].subscribe.apply(null,y),e}else if(typeof l=="string")return t[l]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(l,m,p){if(typeof l=="object")return a(l);m||(m=Ti),p||(p=se);var y={subscribers:[],fire:p,subscribe:function(u){y.subscribers.indexOf(u)===-1&&(y.subscribers.push(u),y.fire=m(y.fire,u))},unsubscribe:function(u){y.subscribers=y.subscribers.filter(function(d){return d!==u}),y.fire=y.subscribers.reduce(m,p)}};return t[l]=n[l]=y,y}function a(l){fe(l).forEach(function(m){var p=l[m];if(ge(p))s(m,l[m][0],l[m][1]);else if(p==="asap")var y=s(m,mt,function(){for(var d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];y.subscribers.forEach(function(h){sr(function(){h.apply(null,g)})})});else throw new te.InvalidArgument("Invalid event config")})}}function xt(e,t){return Qe(t).from({prototype:e}),t}function Wi(e){return xt(Rr.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:kt(null,{creating:[Ci,se],reading:[Ei,mt],updating:[Ii,se],deleting:[Ai,se]})})}function st(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Tn(e,t){e.filter=Ye(e.filter,t)}function zn(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Ye(r(),t()):t,e.justLimit=n&&!r}function Zi(e,t){e.isMatch=Ye(e.isMatch,t)}function Gt(e,t){if(e.isPrimKey)return t.primaryKey;let n=t.getIndexByKeyPath(e.index);if(!n)throw new te.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Dr(e,t,n){let r=Gt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Yt(e,t,n,r){let i=e.replayFilter?Ye(e.filter,e.replayFilter()):e.filter;if(e.or){let s={},a=(l,m,p)=>{if(!i||i(m,p,d=>m.stop(d),d=>m.fail(d))){var y=m.primaryKey,u=""+y;u==="[object ArrayBuffer]"&&(u=""+new Uint8Array(y)),ke(s,u)||(s[u]=!0,t(l,m,p))}};return Promise.all([e.or._iterate(a,n),Br(Dr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return Br(Dr(e,r,n),Ye(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Br(e,t,n,r){var i=r?(a,l,m)=>n(r(a),l,m):n,s=ue(i);return e.then(a=>{if(a)return a.start(()=>{var l=()=>a.continue();(!t||t(a,m=>l=m,m=>{a.stop(m),l=se},m=>{a.fail(m),l=se}))&&s(a.value,a,m=>l=m),l()})})}function ve(e,t){try{let n=Pr(e),r=Pr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Vi(Fr(e),Fr(t));case"Array":return Hi(e,t)}}catch{}return NaN}function Hi(e,t){let n=e.length,r=t.length,i=n<r?n:r;for(let s=0;s<i;++s){let a=ve(e[s],t[s]);if(a!==0)return a}return n===r?0:n<r?-1:1}function Vi(e,t){let n=e.length,r=t.length,i=n<r?n:r;for(let s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}function Pr(e){let t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";let n=un(e);return n==="ArrayBuffer"?"binary":n}function Fr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Mr=class{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,pe.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,pe.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Ye(n.algorithm,t)}_iterate(t,n){return Yt(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&_e(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>Yt(n,t,r,n.table.core))}count(t){return this._read(n=>{let r=this._ctx,i=r.table.core;if(st(r,!0))return i.count({trans:n,query:{index:Gt(r,i.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var s=0;return Yt(r,()=>(++s,!1),n,i).then(()=>s)}).then(t)}sortBy(t,n){let r=t.split(".").reverse(),i=r[0],s=r.length-1;function a(p,y){return y?a(p[r[y]],y-1):p[i]}var l=this._ctx.dir==="next"?1:-1;function m(p,y){var u=a(p,s),d=a(y,s);return u<d?-l:u>d?l:0}return this.toArray(function(p){return p.sort(m)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&st(r,!0)&&r.limit>0){let{valueMapper:i}=r,s=Gt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:a})=>i?a.map(i):a)}else{let i=[];return Yt(r,s=>i.push(s),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0?this:(n.offset+=t,st(n)?zn(n,()=>{var r=t;return(i,s)=>r===0?!0:r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1)}):zn(n,()=>{var r=t;return()=>--r<0}),this)}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),zn(this._ctx,()=>{var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(t,n){return Tn(this._ctx,function(r,i,s){return t(r.value)?(i(s),n):!0}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){return Tn(this._ctx,function(n){return t(n.value)}),Zi(this._ctx,t),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&st(n,!0)&&n.limit>0)return this._read(i=>{var s=Gt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Tn(this._ctx,function(i){var s=i.primaryKey.toString(),a=ke(r,s);return r[s]=!0,!a}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var s=fe(t),a=s.length;i=function(f){for(var _=!1,v=0;v<a;++v){var E=s[v],x=t[E];Oe(f,E)!==x&&(Se(f,E,x),_=!0)}return _}}let l=n.table.core,{outbound:m,extractKey:p}=l.schema.primaryKey,y=this.db._options.modifyChunkSize||200,u=[],d=0,g=[],h=(f,_)=>{let{failures:v,numFailures:E}=_;d+=f-E;for(let x of fe(v))u.push(v[x])};return this.clone().primaryKeys().then(f=>{let _=v=>{let E=Math.min(y,f.length-v);return l.getMany({trans:r,keys:f.slice(v,v+E),cache:"immutable"}).then(x=>{let S=[],A=[],R=m?[]:null,C=[];for(let L=0;L<E;++L){let k=x[L],T={value:dt(k),primKey:f[v+L]};i.call(T,T.value,T)!==!1&&(T.value==null?C.push(f[v+L]):!m&&ve(p(k),p(T.value))!==0?(C.push(f[v+L]),S.push(T.value)):(A.push(T.value),m&&R.push(f[v+L])))}let F=st(n)&&n.limit===1/0&&(typeof t!="function"||t===On)&&{index:n.index,range:n.range};return Promise.resolve(S.length>0&&l.mutate({trans:r,type:"add",values:S}).then(L=>{for(let k in L.failures)C.splice(parseInt(k),1);h(S.length,L)})).then(()=>(A.length>0||F&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:R,values:A,criteria:F,changeSpec:typeof t!="function"&&t}).then(L=>h(A.length,L))).then(()=>(C.length>0||F&&t===On)&&l.mutate({trans:r,type:"delete",keys:C,criteria:F}).then(L=>h(C.length,L))).then(()=>f.length>v+E&&_(v+y))})};return _(0).then(()=>{if(u.length>0)throw new Rt("Error modifying one or more objects",u,d,g);return f.length})})})}delete(){var t=this._ctx,n=t.range;return st(t)&&(t.isPrimKey&&!Li||n.type===3)?this._write(r=>{let{primaryKey:i}=t.table.core.schema,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(a=>t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:l,lastResult:m,results:p,numFailures:y})=>{if(y)throw new Rt("Could not delete some values",Object.keys(l).map(u=>l[u]),a-y);return a-y}))}):this.modify(On)}},On=(e,t)=>t.value=null;function $i(e){return xt(Mr.prototype,function(n,r){this.db=e;let i=Or,s=null;if(r)try{i=r()}catch(p){s=p}let a=n._ctx,l=a.table,m=l.hook.reading.fire;this._ctx={table:l,index:a.index,isPrimKey:!a.index||l.schema.primKey.keyPath&&a.index===l.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:a.or,valueMapper:m!==mt?m:null}})}function Gi(e,t){return e<t?-1:e===t?0:1}function Yi(e,t){return e>t?-1:e===t?0:1}function be(e,t,n){var r=e instanceof Rn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function at(e){return new e.Collection(e,()=>Kr("")).limit(0)}function Xi(e){return e==="next"?t=>t.toUpperCase():t=>t.toLowerCase()}function Ji(e){return e==="next"?t=>t.toLowerCase():t=>t.toUpperCase()}function qi(e,t,n,r,i,s){for(var a=Math.min(e.length,r.length),l=-1,m=0;m<a;++m){var p=t[m];if(p!==r[m])return i(e[m],n[m])<0?e.substr(0,m)+n[m]+n.substr(m+1):i(e[m],r[m])<0?e.substr(0,m)+r[m]+n.substr(m+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;i(e[m],p)<0&&(l=m)}return a<r.length&&s==="next"?e+n.substr(e.length):a<e.length&&s==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function Xt(e,t,n,r){var i,s,a,l,m,p,y,u=n.length;if(!n.every(f=>typeof f=="string"))return be(e,Tr);function d(f){i=Xi(f),s=Ji(f),a=f==="next"?Gi:Yi;var _=n.map(function(v){return{lower:s(v),upper:i(v)}}).sort(function(v,E){return a(v.lower,E.lower)});l=_.map(function(v){return v.upper}),m=_.map(function(v){return v.lower}),p=f,y=f==="next"?"":r}d("next");var g=new e.Collection(e,()=>Ue(l[0],m[u-1]+r));g._ondirectionchange=function(f){d(f)};var h=0;return g._addAlgorithm(function(f,_,v){var E=f.key;if(typeof E!="string")return!1;var x=s(E);if(t(x,m,h))return!0;for(var S=null,A=h;A<u;++A){var R=qi(E,x,l[A],m[A],a,p);R===null&&S===null?h=A+1:(S===null||a(S,R)>0)&&(S=R)}return _(S!==null?function(){f.continue(S+y)}:v),!1}),g}function Ue(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Kr(e){return{type:1,lower:e,upper:e}}var Rn=class{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?at(this):new this.Collection(this,()=>Ue(t,n,!r,!i))}catch{return be(this,Be)}}equals(t){return t==null?be(this,Be):new this.Collection(this,()=>Kr(t))}above(t){return t==null?be(this,Be):new this.Collection(this,()=>Ue(t,void 0,!0))}aboveOrEqual(t){return t==null?be(this,Be):new this.Collection(this,()=>Ue(t,void 0,!1))}below(t){return t==null?be(this,Be):new this.Collection(this,()=>Ue(void 0,t,!1,!0))}belowOrEqual(t){return t==null?be(this,Be):new this.Collection(this,()=>Ue(void 0,t))}startsWith(t){return typeof t!="string"?be(this,Tr):this.between(t,t+Ge,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Xt(this,(n,r)=>n.indexOf(r[0])===0,[t],Ge)}equalsIgnoreCase(t){return Xt(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=Re.apply(et,arguments);return t.length===0?at(this):Xt(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Re.apply(et,arguments);return t.length===0?at(this):Xt(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Ge)}anyOf(){let t=Re.apply(et,arguments),n=this._cmp;try{t.sort(n)}catch{return be(this,Be)}if(t.length===0)return at(this);let r=new this.Collection(this,()=>Ue(t[0],t[t.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((s,a,l)=>{let m=s.key;for(;n(m,t[i])>0;)if(++i,i===t.length)return a(l),!1;return n(m,t[i])===0?!0:(a(()=>{s.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[Cn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let t=Re.apply(et,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return be(this,Be)}let n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Cn,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){let r=this._cmp,i=this._ascending,s=this._descending,a=this._min,l=this._max;if(t.length===0)return at(this);if(!t.every(S=>S[0]!==void 0&&S[1]!==void 0&&i(S[0],S[1])<=0))return be(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);let m=!n||n.includeLowers!==!1,p=n&&n.includeUppers===!0;function y(S,A){let R=0,C=S.length;for(;R<C;++R){let F=S[R];if(r(A[0],F[1])<0&&r(A[1],F[0])>0){F[0]=a(F[0],A[0]),F[1]=l(F[1],A[1]);break}}return R===C&&S.push(A),S}let u=i;function d(S,A){return u(S[0],A[0])}let g;try{g=t.reduce(y,[]),g.sort(d)}catch{return be(this,Be)}let h=0,f=p?S=>i(S,g[h][1])>0:S=>i(S,g[h][1])>=0,_=m?S=>s(S,g[h][0])>0:S=>s(S,g[h][0])>=0;function v(S){return!f(S)&&!_(S)}let E=f,x=new this.Collection(this,()=>Ue(g[0][0],g[g.length-1][1],!m,!p));return x._ondirectionchange=S=>{S==="next"?(E=f,u=i):(E=_,u=s),g.sort(d)},x._addAlgorithm((S,A,R)=>{for(var C=S.key;E(C);)if(++h,h===g.length)return A(R),!1;return v(C)?!0:(this._cmp(C,g[h][1])===0||this._cmp(C,g[h][0])===0||A(()=>{u===i?S.continue(g[h][0]):S.continue(g[h][1])}),!1)}),x}startsWithAnyOf(){let t=Re.apply(et,arguments);return t.every(n=>typeof n=="string")?t.length===0?at(this):this.inAnyRange(t.map(n=>[n,n+Ge])):be(this,"startsWithAnyOf() only works with strings")}};function Qi(e){return xt(Rn.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};let s=e._deps.indexedDB;if(!s)throw new te.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(a,l)=>s.cmp(l,a),this._max=(a,l)=>s.cmp(a,l)>0?a:l,this._min=(a,l)=>s.cmp(a,l)<0?a:l,this._IDBKeyRange=e._deps.IDBKeyRange})}function Ie(e){return ue(function(t){return St(t),e(t.target.error),!1})}function St(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Et="storagemutated",Le="x-storagemutated-1",We=kt(null,Et),Nr=class{_lock(){return ft(!q.global),++this._reculock,this._reculock===1&&!q.global&&(q.lockOwnerFor=this),this}_unlock(){if(ft(!q.global),--this._reculock===0)for(q.global||(q.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{it(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&q.lockOwnerFor!==this}create(t){if(!this.mode)return this;let n=this.db.idbdb,r=this.db._state.dbOpenError;if(ft(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new te.DatabaseClosed(r);case"MissingAPIError":throw new te.MissingAPI(r.message,r);default:throw new te.OpenFailed(r)}if(!this.active)throw new te.TransactionInactive;return ft(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=ue(i=>{St(i),this._reject(t.error)}),t.onabort=ue(i=>{St(i),this.active&&this._reject(new te.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=ue(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&We.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return pe(new te.ReadOnly("Transaction is readonly"));if(!this.active)return pe(new te.TransactionInactive);if(this._locked())return new G((s,a)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(s,a)},q])});if(r)return Ne(()=>{var s=new G((a,l)=>{this._lock();let m=n(a,l,this);m&&m.then&&m.then(a,l)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new G((s,a)=>{var l=n(s,a,this);l&&l.then&&l.then(s,a)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();let r=G.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new G((a,l)=>{r.then(m=>n._waitingQueue.push(ue(a.bind(null,m))),m=>n._waitingQueue.push(ue(l.bind(null,m)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new te.Abort))}table(t){let n=this._memoizedTables||(this._memoizedTables={});if(ke(n,t))return n[t];let r=this.schema[t];if(!r)throw new te.NotFound("Table "+t+" not part of transaction");let i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}};function es(e){return xt(Nr.prototype,function(n,r,i,s,a){this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=kt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new G((l,m)=>{this._resolve=l,this._reject=m}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},l=>{var m=this.active;return this.active=!1,this.on.error.fire(l),this.parent?this.parent._reject(l):m&&this.idbtrans&&this.idbtrans.abort(),pe(l)})})}function Dn(e,t,n,r,i,s,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+jr(t)}}function jr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ur(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ar(n,r=>[r.name,r])}}function ts(e){return e.length===1?e[0]:e}var Ct=e=>{try{return e.only([[]]),Ct=()=>[[]],[[]]}catch{return Ct=()=>Ge,Ge}};function Bn(e){return e==null?()=>{}:typeof e=="string"?ns(e):t=>Oe(t,e)}function ns(e){return e.split(".").length===1?n=>n[e]:n=>Oe(n,e)}function Lr(e){return[].slice.call(e)}var rs=0;function At(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function is(e,t,n){function r(y,u){let d=Lr(y.objectStoreNames);return{schema:{name:y.name,tables:d.map(g=>u.objectStore(g)).map(g=>{let{keyPath:h,autoIncrement:f}=g,_=ge(h),v=h==null,E={},x={name:g.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v,compound:_,keyPath:h,autoIncrement:f,unique:!0,extractKey:Bn(h)},indexes:Lr(g.indexNames).map(S=>g.index(S)).map(S=>{let{name:A,unique:R,multiEntry:C,keyPath:F}=S,L=ge(F),k={name:A,compound:L,keyPath:F,unique:R,multiEntry:C,extractKey:Bn(F)};return E[At(F)]=k,k}),getIndexByKeyPath:S=>E[At(S)]};return E[":id"]=x.primaryKey,h!=null&&(E[At(h)]=x.primaryKey),x})},hasGetAll:d.length>0&&"getAll"in u.objectStore(d[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:u,upper:d,lowerOpen:g,upperOpen:h}=y;return u===void 0?d===void 0?null:t.upperBound(d,!!h):d===void 0?t.lowerBound(u,!!g):t.bound(u,d,!!g,!!h)}function s(y){let u=y.name;function d({trans:f,type:_,keys:v,values:E,range:x}){return new Promise((S,A)=>{S=ue(S);let R=f.objectStore(u),C=R.keyPath==null,F=_==="put"||_==="add";if(!F&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);let{length:L}=v||E||{length:1};if(v&&E&&v.length!==E.length)throw new Error("Given keys array must have same length as given values array.");if(L===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let k,T=[],c=[],O=0,X=Q=>{++O,St(Q)};if(_==="deleteRange"){if(x.type===4)return S({numFailures:O,failures:c,results:[],lastResult:void 0});x.type===3?T.push(k=R.clear()):T.push(k=R.delete(i(x)))}else{let[Q,j]=F?C?[E,v]:[E,null]:[v,null];if(F)for(let Y=0;Y<L;++Y)T.push(k=j&&j[Y]!==void 0?R[_](Q[Y],j[Y]):R[_](Q[Y])),k.onerror=X;else for(let Y=0;Y<L;++Y)T.push(k=R[_](Q[Y])),k.onerror=X}let K=Q=>{let j=Q.target.result;T.forEach((Y,B)=>Y.error!=null&&(c[B]=Y.error)),S({numFailures:O,failures:c,results:_==="delete"?v:T.map(Y=>Y.result),lastResult:j})};k.onerror=Q=>{X(Q),K(Q)},k.onsuccess=K})}function g({trans:f,values:_,query:v,reverse:E,unique:x}){return new Promise((S,A)=>{S=ue(S);let{index:R,range:C}=v,F=f.objectStore(u),L=R.isPrimaryKey?F:F.index(R.name),k=E?x?"prevunique":"prev":x?"nextunique":"next",T=_||!("openKeyCursor"in L)?L.openCursor(i(C),k):L.openKeyCursor(i(C),k);T.onerror=Ie(A),T.onsuccess=ue(c=>{let O=T.result;if(!O){S(null);return}O.___id=++rs,O.done=!1;let X=O.continue.bind(O),K=O.continuePrimaryKey;K&&(K=K.bind(O));let Q=O.advance.bind(O),j=()=>{throw new Error("Cursor not started")},Y=()=>{throw new Error("Cursor not stopped")};O.trans=f,O.stop=O.continue=O.continuePrimaryKey=O.advance=j,O.fail=ue(A),O.next=function(){let B=1;return this.start(()=>B--?this.continue():this.stop()).then(()=>this)},O.start=B=>{let D=new Promise((V,H)=>{V=ue(V),T.onerror=Ie(H),O.fail=H,O.stop=le=>{O.stop=O.continue=O.continuePrimaryKey=O.advance=Y,V(le)}}),J=()=>{if(T.result)try{B()}catch(V){O.fail(V)}else O.done=!0,O.start=()=>{throw new Error("Cursor behind last entry")},O.stop()};return T.onsuccess=ue(V=>{T.onsuccess=J,J()}),O.continue=X,O.continuePrimaryKey=K,O.advance=Q,J(),D},S(O)},A)})}function h(f){return _=>new Promise((v,E)=>{v=ue(v);let{trans:x,values:S,limit:A,query:R}=_,C=A===1/0?void 0:A,{index:F,range:L}=R,k=x.objectStore(u),T=F.isPrimaryKey?k:k.index(F.name),c=i(L);if(A===0)return v({result:[]});if(f){let O=S?T.getAll(c,C):T.getAllKeys(c,C);O.onsuccess=X=>v({result:X.target.result}),O.onerror=Ie(E)}else{let O=0,X=S||!("openKeyCursor"in T)?T.openCursor(c):T.openKeyCursor(c),K=[];X.onsuccess=Q=>{let j=X.result;if(!j)return v({result:K});if(K.push(S?j.value:j.primaryKey),++O===A)return v({result:K});j.continue()},X.onerror=Ie(E)}})}return{name:u,schema:y,mutate:d,getMany({trans:f,keys:_}){return new Promise((v,E)=>{v=ue(v);let x=f.objectStore(u),S=_.length,A=new Array(S),R=0,C=0,F,L=T=>{let c=T.target;(A[c._pos]=c.result)!=null,++C===R&&v(A)},k=Ie(E);for(let T=0;T<S;++T)_[T]!=null&&(F=x.get(_[T]),F._pos=T,F.onsuccess=L,F.onerror=k,++R);R===0&&v(A)})},get({trans:f,key:_}){return new Promise((v,E)=>{v=ue(v);let S=f.objectStore(u).get(_);S.onsuccess=A=>v(A.target.result),S.onerror=Ie(E)})},query:h(l),openCursor:g,count({query:f,trans:_}){let{index:v,range:E}=f;return new Promise((x,S)=>{let A=_.objectStore(u),R=v.isPrimaryKey?A:A.index(v.name),C=i(E),F=C?R.count(C):R.count();F.onsuccess=ue(L=>x(L.target.result)),F.onerror=Ie(S)})}}}let{schema:a,hasGetAll:l}=r(e,n),m=a.tables.map(y=>s(y)),p={};return m.forEach(y=>p[y.name]=y),{stack:"dbcore",transaction:e.transaction.bind(e),table(y){if(!p[y])throw new Error(`Table '${y}' not found`);return p[y]},MIN_KEY:-1/0,MAX_KEY:Ct(t),schema:a}}function ss(e,t){return t.reduce((n,{create:r})=>({...n,...r(n)}),e)}function as(e,t,{IDBKeyRange:n,indexedDB:r},i){return{dbcore:ss(is(t,n,i),e.dbcore)}}function Pn({_novip:e},t){let n=t.db,r=as(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{let s=i.name;e.core.schema.tables.some(a=>a.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Jt({_novip:e},t,n,r){n.forEach(i=>{let s=r[i];t.forEach(a=>{let l=an(a,i);(!l||"value"in l&&l.value===void 0)&&(a===e.Transaction.prototype||a instanceof e.Transaction?ze(a,i,{get(){return this.table(i)},set(m){rr(this,i,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):a[i]=new e.Table(i,s))})})}function Fn({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function os(e,t){return e._cfg.version-t._cfg.version}function us(e,t,n,r){let i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);let a=s._reject.bind(s),l=q.transless||q;Ne(()=>{q.trans=s,q.transless=l,t===0?(fe(i).forEach(m=>{Mn(n,m,i[m].primKey,i[m].indexes)}),Pn(e,n),G.follow(()=>e.on.populate.fire(s)).catch(a)):ls(e,t,s,n).catch(a)})}function ls({_novip:e},t,n,r){let i=[],s=e._versions,a=e._dbSchema=Nn(e,e.idbdb,r),l=!1;s.filter(y=>y._cfg.version>=t).forEach(y=>{i.push(()=>{let u=a,d=y._cfg.dbschema;jn(e,u,r),jn(e,d,r),a=e._dbSchema=d;let g=Wr(u,d);g.add.forEach(f=>{Mn(r,f[0],f[1].primKey,f[1].indexes)}),g.change.forEach(f=>{if(f.recreate)throw new te.Upgrade("Not yet support for changing primary key");{let _=r.objectStore(f.name);f.add.forEach(v=>Kn(_,v)),f.change.forEach(v=>{_.deleteIndex(v.name),Kn(_,v)}),f.del.forEach(v=>_.deleteIndex(v))}});let h=y._cfg.contentUpgrade;if(h&&y._cfg.version>t){Pn(e,r),n._memoizedTables={},l=!0;let f=or(d);g.del.forEach(x=>{f[x]=u[x]}),Fn(e,[e.Transaction.prototype]),Jt(e,[e.Transaction.prototype],fe(f),f),n.schema=f;let _=cn(h);_&&rt();let v,E=G.follow(()=>{if(v=h(n),v&&_){var x=De.bind(null,null);v.then(x,x)}});return v&&typeof v.then=="function"?G.resolve(v):E.then(()=>v)}}),i.push(u=>{if(!l||!Ui){let d=y._cfg.dbschema;hs(d,u)}Fn(e,[e.Transaction.prototype]),Jt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})});function p(){return i.length?G.resolve(i.shift()(n.idbtrans)).then(p):G.resolve()}return p().then(()=>{cs(a,r)})}function Wr(e,t){let n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){let i=e[r],s=t[r];if(!i)n.add.push([r,s]);else{let a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Ht)a.recreate=!0,n.change.push(a);else{let l=i.idxByName,m=s.idxByName,p;for(p in l)m[p]||a.del.push(p);for(p in m){let y=l[p],u=m[p];y?y.src!==u.src&&a.change.push(u):a.add.push(u)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function Mn(e,t,n,r){let i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>Kn(i,s)),i}function cs(e,t){fe(e).forEach(n=>{t.db.objectStoreNames.contains(n)||Mn(t,n,e[n].primKey,e[n].indexes)})}function hs(e,t){[].slice.call(t.db.objectStoreNames).forEach(n=>e[n]==null&&t.db.deleteObjectStore(n))}function Kn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Nn(e,t,n){let r={};return Ot(t.objectStoreNames,0).forEach(s=>{let a=n.objectStore(s),l=a.keyPath,m=Dn(jr(l),l||"",!1,!1,!!a.autoIncrement,l&&typeof l!="string",!0),p=[];for(let u=0;u<a.indexNames.length;++u){let d=a.index(a.indexNames[u]);l=d.keyPath;var y=Dn(d.name,l,!!d.unique,!!d.multiEntry,!1,l&&typeof l!="string",!1);p.push(y)}r[s]=Ur(s,m,p)}),r}function fs({_novip:e},t,n){e.verno=t.version/10;let r=e._dbSchema=Nn(e,t,n);e._storeNames=Ot(t.objectStoreNames,0),Jt(e,[e._allTables],fe(r),r)}function ds(e,t){let n=Nn(e,e.idbdb,t),r=Wr(n,e._dbSchema);return!(r.add.length||r.change.some(i=>i.add.length||i.change.length))}function jn({_novip:e},t,n){let r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){let s=r[i],a=n.objectStore(s);e._hasGetAll="getAll"in a;for(let l=0;l<a.indexNames.length;++l){let m=a.indexNames[l],p=a.index(m).keyPath,y=typeof p=="string"?p:"["+Ot(p).join("+")+"]";if(t[s]){let u=t[s].idxByName[y];u&&(u.name=m,delete t[s].idxByName[y],t[s].idxByName[m]=u)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&oe.WorkerGlobalScope&&oe instanceof oe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ps(e){return e.split(",").map((t,n)=>{t=t.trim();let r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Dn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),ge(i),n===0)})}var Zr=class{_parseStoresSpec(t,n){fe(t).forEach(r=>{if(t[r]!==null){var i=ps(t[r]),s=i.shift();if(s.multi)throw new te.Schema("Primary key cannot be multi-valued");i.forEach(a=>{if(a.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ur(r,s,i)}})}stores(t){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?_e(this._cfg.storesSource,t):t;let r=n._versions,i={},s={};return r.forEach(a=>{_e(i,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(i,s)}),n._dbSchema=s,Fn(n,[n._allTables,n,n.Transaction.prototype]),Jt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],fe(s),s),n._storeNames=fe(s),this}upgrade(t){return this._cfg.contentUpgrade=dn(this._cfg.contentUpgrade||se,t),this}};function ms(e){return xt(Zr.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Un(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Fe(Vt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ln(e){return e&&typeof e.databases=="function"}function gs({indexedDB:e,IDBKeyRange:t}){return Ln(e)?Promise.resolve(e.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==Vt)):Un(e,t).toCollection().primaryKeys()}function ys({indexedDB:e,IDBKeyRange:t},n){!Ln(e)&&n!==Vt&&Un(e,t).put({name:n}).catch(se)}function _s({indexedDB:e,IDBKeyRange:t},n){!Ln(e)&&n!==Vt&&Un(e,t).delete(n).catch(se)}function Wn(e){return Ne(function(){return q.letThrough=!0,e()})}function vs(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function bs(e){let t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?pe(t.dbOpenError):e);Ae&&(t.openCanceller._stackHolder=Ze()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;let r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new te.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,a=null,l=!1;return G.race([r,(typeof navigator=="undefined"?G.resolve():vs()).then(()=>new G((m,p)=>{if(i(),!n)throw new te.MissingAPI;let y=e.name,u=t.autoSchema?n.open(y):n.open(y,Math.round(e.verno*10));if(!u)throw new te.MissingAPI;u.onerror=Ie(p),u.onblocked=ue(e._fireOnBlocked),u.onupgradeneeded=ue(d=>{if(a=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=St,a.abort(),u.result.close();let h=n.deleteDatabase(y);h.onsuccess=h.onerror=ue(()=>{p(new te.NoSuchDatabase(`Database ${y} doesnt exist`))})}else{a.onerror=Ie(p);var g=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;l=g<1,e._novip.idbdb=u.result,us(e,g/10,a,p)}},p),u.onsuccess=ue(()=>{a=null;let d=e._novip.idbdb=u.result,g=Ot(d.objectStoreNames);if(g.length>0)try{let h=d.transaction(ts(g),"readonly");t.autoSchema?fs(e,d,h):(jn(e,e._dbSchema,h),ds(e,h)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Pn(e,h)}catch{}wt.push(e),d.onversionchange=ue(h=>{t.vcFired=!0,e.on("versionchange").fire(h)}),d.onclose=ue(h=>{e.on("close").fire(h)}),l&&ys(e._deps,y),m()},p)}))]).then(()=>(i(),t.onReadyBeingFired=[],G.resolve(Wn(()=>e.on.ready.fire(e.vip))).then(function m(){if(t.onReadyBeingFired.length>0){let p=t.onReadyBeingFired.reduce(dn,se);return t.onReadyBeingFired=[],G.resolve(Wn(()=>p(e.vip))).then(m)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(m=>{t.dbOpenError=m;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),pe(m)}).finally(()=>{t.openComplete=!0,s()})}function Zn(e){var t=a=>e.next(a),n=a=>e.throw(a),r=s(t),i=s(n);function s(a){return l=>{var m=a(l),p=m.value;return m.done?p:!p||typeof p.then!="function"?ge(p)?Promise.all(p).then(r,i):r(p):p.then(r,i)}}return s(t)()}function ws(e,t,n){var r=arguments.length;if(r<2)throw new te.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=ur(i);return[e,s,n]}function ks(e,t,n,r,i){return G.resolve().then(()=>{let s=q.transless||q,a=e._createTransaction(t,n,e._dbSchema,r),l={trans:a,transless:s};r?a.idbtrans=r.idbtrans:a.create();let m=cn(i);m&&rt();let p,y=G.follow(()=>{if(p=i.call(a,a),p)if(m){var u=De.bind(null,null);p.then(u,u)}else typeof p.next=="function"&&typeof p.throw=="function"&&(p=Zn(p))},l);return(p&&typeof p.then=="function"?G.resolve(p).then(u=>a.active?u:pe(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):y.then(()=>p)).then(u=>(r&&a._resolve(),a._completion.then(()=>u))).catch(u=>(a._reject(u),pe(u)))})}function qt(e,t,n){let r=ge(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}function xs(e){return{...e,table(t){let n=e.table(t),{schema:r}=n,i={},s=[];function a(d,g,h){let f=At(d),_=i[f]=i[f]||[],v=d==null?0:typeof d=="string"?1:d.length,E=g>0,x={...h,isVirtual:E,keyTail:g,keyLength:v,extractKey:Bn(d),unique:!E&&h.unique};if(_.push(x),x.isPrimaryKey||s.push(x),v>1){let S=v===2?d[0]:d.slice(0,v-1);a(S,g+1,h)}return _.sort((S,A)=>S.keyTail-A.keyTail),x}let l=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(let d of r.indexes)a(d.keyPath,0,d);function m(d){let g=i[At(d)];return g&&g[0]}function p(d,g){return{type:d.type===1?2:d.type,lower:qt(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:qt(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0}}function y(d){let g=d.query.index;return g.isVirtual?{...d,query:{index:g,range:p(d.query.range,g.keyTail)}}:d}return{...n,schema:{...r,primaryKey:l,indexes:s,getIndexByKeyPath:m},count(d){return n.count(y(d))},query(d){return n.query(y(d))},openCursor(d){let{keyTail:g,isVirtual:h,keyLength:f}=d.query.index;if(!h)return n.openCursor(d);function _(v){function E(S){S!=null?v.continue(qt(S,d.reverse?e.MAX_KEY:e.MIN_KEY,g)):d.unique?v.continue(v.key.slice(0,f).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,g)):v.continue()}return Object.create(v,{continue:{value:E},continuePrimaryKey:{value(S,A){v.continuePrimaryKey(qt(S,e.MAX_KEY,g),A)}},primaryKey:{get(){return v.primaryKey}},key:{get(){let S=v.key;return f===1?S[0]:S.slice(0,f)}},value:{get(){return v.value}}})}return n.openCursor(y(d)).then(v=>v&&_(v))}}}}}var Ss={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:xs};function Hn(e,t,n,r){return n=n||{},r=r||"",fe(e).forEach(i=>{if(!ke(t,i))n[r+i]=void 0;else{var s=e[i],a=t[i];if(typeof s=="object"&&typeof a=="object"&&s&&a){let l=un(s),m=un(a);l!==m?n[r+i]=t[i]:l==="Object"?Hn(s,a,n,r+i+"."):s!==a&&(n[r+i]=t[i])}else s!==a&&(n[r+i]=t[i])}}),fe(t).forEach(i=>{ke(e,i)||(n[r+i]=t[i])}),n}function Es(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Cs={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){let n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(s){let a=q.trans,{deleting:l,creating:m,updating:p}=a.table(t).hook;switch(s.type){case"add":if(m.fire===se)break;return a._promise("readwrite",()=>y(s),!0);case"put":if(m.fire===se&&p.fire===se)break;return a._promise("readwrite",()=>y(s),!0);case"delete":if(l.fire===se)break;return a._promise("readwrite",()=>y(s),!0);case"deleteRange":if(l.fire===se)break;return a._promise("readwrite",()=>u(s),!0)}return n.mutate(s);function y(g){let h=q.trans,f=g.keys||Es(r,g);if(!f)throw new Error("Keys missing");return g=g.type==="add"||g.type==="put"?{...g,keys:f}:{...g},g.type!=="delete"&&(g.values=[...g.values]),g.keys&&(g.keys=[...g.keys]),As(n,g,f).then(_=>{let v=f.map((E,x)=>{let S=_[x],A={onerror:null,onsuccess:null};if(g.type==="delete")l.fire.call(A,E,S,h);else if(g.type==="add"||S===void 0){let R=m.fire.call(A,E,g.values[x],h);E==null&&R!=null&&(E=R,g.keys[x]=E,r.outbound||Se(g.values[x],r.keyPath,E))}else{let R=Hn(S,g.values[x]),C=p.fire.call(A,R,E,S,h);if(C){let F=g.values[x];Object.keys(C).forEach(L=>{ke(F,L)?F[L]=C[L]:Se(F,L,C[L])})}}return A});return n.mutate(g).then(({failures:E,results:x,numFailures:S,lastResult:A})=>{for(let R=0;R<f.length;++R){let C=x?x[R]:f[R],F=v[R];C==null?F.onerror&&F.onerror(E[R]):F.onsuccess&&F.onsuccess(g.type==="put"&&_[R]?g.values[R]:C)}return{failures:E,results:x,numFailures:S,lastResult:A}}).catch(E=>(v.forEach(x=>x.onerror&&x.onerror(E)),Promise.reject(E)))})}function u(g){return d(g.trans,g.range,1e4)}function d(g,h,f){return n.query({trans:g,values:!1,query:{index:r,range:h},limit:f}).then(({result:_})=>y({type:"delete",keys:_,trans:g}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):_.length<f?{failures:[],numFailures:0,lastResult:void 0}:d(g,{...h,lower:_[_.length-1],lowerOpen:!0},f)))}}}}})};function As(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Hr(e,t,n){try{if(!t||t.keys.length<e.length)return null;let r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)ve(t.keys[i],e[s])===0&&(r.push(n?dt(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}var Is={stack:"dbcore",level:-1,create:e=>({table:t=>{let n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);let i=Hr(r.keys,r.trans._cache,r.cache==="clone");return i?G.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?dt(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Vn(e){return!("from"in e)}var Pe=function(e,t){if(this)_e(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{let n=new Pe;return e&&"d"in e&&_e(n,e),n}};qe(Pe.prototype,{add(e){return Qt(this,e),this},addKey(e){return It(this,e,e),this},addKeys(e){return e.forEach(t=>It(this,t,t)),this},[ln](){return $n(this)}});function It(e,t,n){let r=ve(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Vn(e))return _e(e,{from:t,to:n,d:1});let i=e.l,s=e.r;if(ve(n,e.from)<0)return i?It(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Vr(e);if(ve(t,e.to)>0)return s?It(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Vr(e);ve(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),ve(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);let a=!e.r;i&&!e.l&&Qt(e,i),s&&a&&Qt(e,s)}function Qt(e,t){function n(r,{from:i,to:s,l:a,r:l}){It(r,i,s),a&&n(r,a),l&&n(r,l)}Vn(t)||n(e,t)}function Ts(e,t){let n=$n(t),r=n.next();if(r.done)return!1;let i=r.value,s=$n(e),a=s.next(i.from),l=a.value;for(;!r.done&&!a.done;){if(ve(l.from,i.to)<=0&&ve(l.to,i.from)>=0)return!0;ve(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(a=s.next(i.from)).value}return!1}function $n(e){let t=Vn(e)?null:{s:0,n:e};return{next(n){let r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ve(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ve(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Vr(e){var t,n;let r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){let s=i==="r"?"l":"r",a={...e},l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],a[i]=l[s],e[s]=a,a.d=$r(a)}e.d=$r(e)}function $r({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var zs={stack:"dbcore",level:0,create:e=>{let t=e.schema.name,n=new Pe(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{let i=e.table(r),{schema:s}=i,{primaryKey:a}=s,{extractKey:l,outbound:m}=a,p={...i,mutate:d=>{let g=d.trans,h=g.mutatedParts||(g.mutatedParts={}),f=R=>{let C=`idb://${t}/${r}/${R}`;return h[C]||(h[C]=new Pe)},_=f(""),v=f(":dels"),{type:E}=d,[x,S]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],A=d.trans._cache;return i.mutate(d).then(R=>{if(ge(x)){E!=="delete"&&(x=R.results),_.addKeys(x);let C=Hr(x,A);!C&&E!=="add"&&v.addKeys(x),(C||S)&&Os(f,s,C,S)}else if(x){let C={from:x.lower,to:x.upper};v.add(C),_.add(C)}else _.add(n),v.add(n),s.indexes.forEach(C=>f(C.name).add(n));return R})}},y=({query:{index:d,range:g}})=>{var h,f;return[d,new Pe((h=g.lower)!==null&&h!==void 0?h:e.MIN_KEY,(f=g.upper)!==null&&f!==void 0?f:e.MAX_KEY)]},u={get:d=>[a,new Pe(d.key)],getMany:d=>[a,new Pe().addKeys(d.keys)],count:y,query:y,openCursor:y};return fe(u).forEach(d=>{p[d]=function(g){let{subscr:h}=q;if(h){let f=S=>{let A=`idb://${t}/${r}/${S}`;return h[A]||(h[A]=new Pe)},_=f(""),v=f(":dels"),[E,x]=u[d](g);if(f(E.name||"").add(x),!E.isPrimaryKey)if(d==="count")v.add(n);else{let S=d==="query"&&m&&g.values&&i.query({...g,values:!1});return i[d].apply(this,arguments).then(A=>{if(d==="query"){if(m&&g.values)return S.then(({result:C})=>(_.addKeys(C),A));let R=g.values?A.result.map(l):A.result;g.values?_.addKeys(R):v.addKeys(R)}else if(d==="openCursor"){let R=A,C=g.values;return R&&Object.create(R,{key:{get(){return v.addKey(R.primaryKey),R.key}},primaryKey:{get(){let F=R.primaryKey;return v.addKey(F),F}},value:{get(){return C&&_.addKey(R.primaryKey),R.value}}})}return A})}}return i[d].apply(this,arguments)}}),p}}}};function Os(e,t,n,r){function i(s){let a=e(s.name||"");function l(p){return p!=null?s.extractKey(p):null}let m=p=>s.multiEntry&&ge(p)?p.forEach(y=>a.addKey(y)):a.addKey(p);(n||r).forEach((p,y)=>{let u=n&&l(n[y]),d=r&&l(r[y]);ve(u,d)!==0&&(u!=null&&m(u),d!=null&&m(d))})}t.indexes.forEach(i)}var Fe=class{constructor(t,n){this._middlewares={},this.verno=0;let r=Fe.dependencies;this._options=n={addons:Fe.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:se,dbReadyPromise:null,cancelOpen:se,openCanceller:null,autoSchema:!0};s.dbReadyPromise=new G(a=>{s.dbReadyResolve=a}),s.openCanceller=new G((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=t,this.on=kt(this,"populate","blocked","versionchange","close",{ready:[dn,se]}),this.on.ready.subscribe=ir(this.on.ready.subscribe,a=>(l,m)=>{Fe.vip(()=>{let p=this._state;if(p.openComplete)p.dbOpenError||G.resolve().then(l),m&&a(l);else if(p.onReadyBeingFired)p.onReadyBeingFired.push(l),m&&a(l);else{a(l);let y=this;m||a(function u(){y.on.ready.unsubscribe(l),y.on.ready.unsubscribe(u)})}})}),this.Collection=$i(this),this.Table=Wi(this),this.Transaction=es(this),this.Version=ms(this),this.WhereClause=Qi(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Ct(n.IDBKeyRange),this._createTransaction=(a,l,m,p)=>new this.Transaction(a,l,m,this._options.chromeTransactionDurability,p),this._fireOnBlocked=a=>{this.on("blocked").fire(a),wt.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Ss),this.use(Cs),this.use(zs),this.use(Is),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(t){if(isNaN(t)||t<.1)throw new te.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);let n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(os),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||q.letThrough||this._vip)?t():new G((n,r)=>{if(this._state.openComplete)return r(new te.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){r(new te.DatabaseClosed);return}this.open().catch(se)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});let s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:r??10,name:i}),s.sort((a,l)=>a.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:n?i.name!==n:!1)),this}open(){return bs(this)}_close(){let t=this._state,n=wt.indexOf(this);if(n>=0&&wt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new G(r=>{t.dbReadyResolve=r}),t.openCanceller=new G((r,i)=>{t.cancelOpen=i})}close(){this._close();let t=this._state;this._options.autoOpen=!1,t.dbOpenError=new te.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){let t=arguments.length>0,n=this._state;return new G((r,i)=>{let s=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=ue(()=>{_s(this._deps,this.name),r()}),a.onerror=Ie(i),a.onblocked=this._fireOnBlocked};if(t)throw new te.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return fe(this._allTables).map(t=>this._allTables[t])}transaction(){let t=ws.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=q.trans;(!i||i.db!==this||t.indexOf("!")!==-1)&&(i=null);let s=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");let a,l;try{if(l=n.map(p=>{var y=p instanceof this.Table?p.name:p;if(typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),t=="r"||t===An)a=An;else if(t=="rw"||t==In)a=In;else throw new te.InvalidArgument("Invalid transaction mode: "+t);if(i){if(i.mode===An&&a===In)if(s)i=null;else throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&l.forEach(p=>{if(i&&i.storeNames.indexOf(p)===-1)if(s)i=null;else throw new te.SubTransaction("Table "+p+" not included in parent transaction.")}),s&&i&&!i.active&&(i=null)}}catch(p){return i?i._promise(null,(y,u)=>{u(p)}):pe(p)}let m=ks.bind(null,this,a,l,i,r);return i?i._promise(a,m,"lock"):q.trans?it(q.transless,()=>this._whenReady(m)):this._whenReady(m)}table(t){if(!ke(this._allTables,t))throw new te.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}},Rs=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Gr=class{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)}[Rs](){return this}};function Yr(e,t){return fe(t).forEach(n=>{let r=e[n]||(e[n]=new Pe);Qt(r,t[n])}),e}function Ds(e){return new Gr(t=>{let n=cn(e);function r(g){n&&rt();let h=()=>Ne(e,{subscr:g,trans:null}),f=q.trans?it(q.transless,h):h();return n&&f.then(De,De),f}let i=!1,s={},a={},l={get closed(){return i},unsubscribe:()=>{i=!0,We.storagemutated.unsubscribe(u)}};t.start&&t.start(l);let m=!1,p=!1;function y(){return fe(a).some(g=>s[g]&&Ts(s[g],a[g]))}let u=g=>{Yr(s,g),y()&&d()},d=()=>{if(m||i)return;s={};let g={},h=r(g);p||(We(Et,u),p=!0),m=!0,Promise.resolve(h).then(f=>{m=!1,!i&&(y()?d():(s={},a=g,t.next&&t.next(f)))},f=>{m=!1,t.error&&t.error(f),l.unsubscribe()})};return d(),l})}var Gn;try{Gn={indexedDB:oe.indexedDB||oe.mozIndexedDB||oe.webkitIndexedDB||oe.msIndexedDB,IDBKeyRange:oe.IDBKeyRange||oe.webkitIDBKeyRange}}catch{Gn={indexedDB:null,IDBKeyRange:null}}var Xe=Fe;qe(Xe,{...Dt,delete(e){return new Xe(e,{addons:[]}).delete()},exists(e){return new Xe(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(e){try{return gs(Xe.dependencies).then(e)}catch{return pe(new te.MissingAPI)}},defineClass(){function e(t){_e(this,t)}return e},ignoreTransaction(e){return q.trans?it(q.transless,e):e()},vip:Wn,async:function(e){return function(){try{var t=Zn(e.apply(this,arguments));return!t||typeof t.then!="function"?G.resolve(t):t}catch(n){return pe(n)}}},spawn:function(e,t,n){try{var r=Zn(e.apply(n,t||[]));return!r||typeof r.then!="function"?G.resolve(r):r}catch(i){return pe(i)}},currentTransaction:{get:()=>q.trans||null},waitFor:function(e,t){let n=G.resolve(typeof e=="function"?Xe.ignoreTransaction(e):e).timeout(t||6e4);return q.trans?q.trans.waitFor(n):n},Promise:G,debug:{get:()=>Ae,set:e=>{cr(e,e==="dexie"?()=>!0:zr)}},derive:Qe,extend:_e,props:qe,override:ir,Events:kt,on:We,liveQuery:Ds,extendObservabilitySet:Yr,getByKeyPath:Oe,setByKeyPath:Se,delByKeyPath:pi,shallowClone:or,deepClone:dt,getObjectDiff:Hn,cmp:ve,asap:sr,minKey:Cn,addons:[],connections:wt,errnames:ki,dependencies:Gn,semVer:Ir,version:Ir.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,n*2))});Xe.maxKey=Ct(Xe.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(We(Et,e=>{if(!Me){let t;Ht?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Le,!0,!0,e)):t=new CustomEvent(Le,{detail:e}),Me=!0,dispatchEvent(t),Me=!1}}),addEventListener(Le,({detail:e})=>{Me||en(e)}));function en(e){let t=Me;try{Me=!0,We.storagemutated.fire(e)}finally{Me=t}}var Me=!1;if(typeof BroadcastChannel!="undefined"){let e=new BroadcastChannel(Le);We(Et,t=>{Me||e.postMessage(t)}),e.onmessage=t=>{t.data&&en(t.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){We(Et,t=>{try{Me||(typeof localStorage!="undefined"&&localStorage.setItem(Le,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Le,changedParts:t})))}catch{}}),addEventListener("storage",t=>{if(t.key===Le){let n=JSON.parse(t.newValue);n&&en(n.changedParts)}});let e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",Bs)}function Bs({data:e}){e&&e.type===Le&&en(e.changedParts)}G.rejectionMapper=Si;cr(Ae,zr);var tn=class extends Fe{constructor(){super("je2be-dl");this.version(1).stores({chunks:"name"})}};self.importScripts("./core.js");self.onmessage=e=>{if(Jn(e.data)){let t=e.data.id;Ps(e.data).catch(n=>Us(n,t)).finally(()=>Ws(t))}};async function Ps(e){let t=e.id;console.log(`[${t}] converter: received StartMessage`),Je("/je2be"),nr("je2be"),Je(`/je2be/${t}/in`),Je(`/je2be/${t}/out`),Je("/je2be/dl"),await Fs(),console.log(`[${t}] extract...`),await Ms(e.file,e.id),console.log(`[${t}] extract done`),console.log(`[${t}] convert...`);let n=await Ns(t);if(console.log(`[${t}] convert done`),n<1)throw{type:"ConverterFailed"};console.log(`[${t}] copy...`),await js(t,n),console.log(`[${t}] copy done`),Ls(t)}async function Fs(){let e=new tn;await e.chunks.clear(),e.close()}async function Ms(e,t){let n;try{n=await Xr.default.loadAsync(e)}catch(u){throw{type:"Unzip",native:u}}let r=[];if(n.forEach((u,d)=>{!u.endsWith("level.dat")||r.push(u)}),r.length===0)throw{type:"NoLevelDatFound"};if(r.length!==1)throw{type:"2OrMoreLevelDatFound"};let i=r[0],s=i.lastIndexOf("level.dat"),a=i.substring(0,s),l=[];n.forEach((u,d)=>{!u.startsWith(a)||d.dir||l.push(u)});let m=0,p=l.length,y=l.map(u=>Ks({id:t,zip:n,path:u,prefix:a}).then(()=>{m++;let d={type:"progress",id:t,stage:"unzip",progress:m,total:p};self.postMessage(d)}));await Promise.all(y)}async function Ks({id:e,zip:t,path:n,prefix:r}){return new Promise((i,s)=>{let a=n.substring(r.length),l=`/je2be/${e}/in/${a}`,m=er(l);Je(m),t.file(n).async("uint8array").then(p=>{FS.writeFile(l,p),i()}).catch(s)})}async function Ns(e){try{return Module.core(e,`/je2be/${e}/in`,`/je2be/${e}/out`,`/je2be/dl/${e}`)}catch(t){throw console.error(t),{type:"ConverterFailed",native:t}}}async function js(e,t){let n=new tn;for(let r=0;r<t;r++){let i=`/je2be/dl/${e}/${r}.bin`,s=FS.readFile(i);FS.unlink(i);try{await n.chunks.add({name:i,data:s});let a={type:"progress",stage:"copy",id:e,progress:r+1,total:t};self.postMessage(a)}catch(a){throw console.error(a),n.close(),{type:"CopyToIdb"}}}n.close(),Module.cleanup(`/je2be/${e}`),Module.cleanup(`/je2be/dl/${e}`)}function Us(e,t){let n={type:"failed",id:t,error:e};self.postMessage(n)}function Ls(e){let t={type:"success",id:e};self.postMessage(t)}function Ws(e){tr("/je2be")}})();
/*!

JSZip v3.7.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
